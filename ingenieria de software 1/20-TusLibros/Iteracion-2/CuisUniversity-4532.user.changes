

----QUIT----(9 March 2021 14:58:42) CuisUniversity-4532.image priorSource: 13044060!

----STARTUP---- (9 March 2021 14:58:43) as /Users/hernan/Documents/Cuis/5.0-64Bits/Cuis-University-Installer/CuisUniversity-4532.image!


----QUIT----(9 March 2021 14:58:43) CuisUniversity-4532.image priorSource: 16885479!

----STARTUP---- (7 June 2021 20:20:50) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!


----End fileIn of /media/Datos/Cuis/Ej-Libros/linux64/TDDStateIcon-setBalloonText.st----!

Object subclass: #XXX
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #XXX category: 'Ejercicio-Libros' stamp: 'G.L.S 6/7/2021 20:31:04'!
Object subclass: #XXX
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

TestCase subclass: #TestXXX
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #TestXXX category: 'Ejercicio-Libros' stamp: 'G.L.S 6/7/2021 20:31:20'!
TestCase subclass: #TestXXX
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classRenamed: #TestXXX as: #XXXTest stamp: 'G.L.S 6/7/2021 20:31:35'!
Smalltalk renameClassNamed: #TestXXX as: #XXXTest!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/7/2021 20:31:50'!
test01! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/7/2021 20:38:42' prior: 50859369!
test01

	| badRequest result sistema |
	sistema := XXX start.
	
	result := sistema request: ''.
	
	badRequest := 0.
	
	self assert: result equals: badRequest
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/7/2021 20:40:10' prior: 50859372!
test01

	| badRequest result sistema |
	
	sistema := XXX start.
	
	result := sistema request: ''.
	
	badRequest := 400.
	
	self assert: result equals: badRequest
	! !

----QUIT----(7 June 2021 22:51:48) CuisUniversity-4532.image priorSource: 16885703!

----STARTUP---- (9 June 2021 17:05:28) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!


!classDefinition: #Carrito category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 17:14:22'!
Object subclass: #Carrito
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:14:28' prior: 50859380!
test01

	| carrito aPassword idCliente |
	
	idCliente := 0.
	aPassword := '1234'.
	
	carrito := Carrito forClient: idCliente withPassword: aPassword.
	
	self assert: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:25:44' prior: 50859401!
test01

	| carrito |
	
	carrito := Carrito createNew.
	
	self assert: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:33:25' prior: 50859410!
test01

	| carrito |
	
	carrito := Carrito createNew.
	
	self assert: carrito isEmpty.
	! !

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 17:33:28'!
ERROR!
!Carrito class methodsFor: 'instance creation' stamp: 'G.L.S 6/9/2021 17:33:35'!
createNew
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeCreateNew! !
!Carrito class methodsFor: 'instance creation' stamp: 'G.L.S 6/9/2021 17:33:44' prior: 50859424!
createNew
	^self new initialize.! !

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 17:33:45'!
ERROR!
!Carrito methodsFor: 'no messages' stamp: 'G.L.S 6/9/2021 17:33:55' overrides: 16896425!
initialize! !

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 17:34:10'!
ERROR!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 17:36:05'!
ERROR!
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/9/2021 17:36:17'!
isEmpty
	self shouldBeImplemented.! !
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/9/2021 17:36:29' prior: 50859446!
isEmpty
	^true.! !

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 17:36:30'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 17:36:30'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 17:36:33'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 17:36:33'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:37:04'!
test02

	| carrito |
	
	carrito := Carrito createNew.
	
	carrito add: 'libro'.
	
	self deny: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:38:35' prior: 50859462!
test02

	| carrito |
	
	carrito := Carrito createNew.
	
	carrito add: '978-3-16-148410-0'.
	
	self deny: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:39:18' prior: 50859469!
test02

	| carrito unLibro |
	
	carrito := Carrito createNew.
	
	unLibro := '978-3-16-148410-0'.
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:39:21' prior: 50859476!
test02

	| carrito unLibro |
	
	carrito := Carrito createNew.
	
	unLibro := '978-3-16-148410-0'.
	
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:42:53' prior: 50859484!
test02

	| carrito unLibro |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	! !

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 17:44:43'!
ERROR!
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 17:44:57'!
add: aString 
	self shouldBeImplemented.! !

!classDefinition: #Carrito category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 17:45:23'!
Object subclass: #Carrito
	instanceVariableNames: 'libro'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 17:45:21' prior: 50859502!
add: aString 
	libro := aString.! !

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 17:45:29'!
FAILURE!
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/9/2021 17:45:52' prior: 50859450!
isEmpty
	^libro isNil.! !

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 17:45:59'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 17:45:59'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 17:45:59'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:48:24'!
test03

	| carrito unLibro |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	
	carrito add: unLibro.
	carrito add: unLibro.
	carrito add: unLibro.
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	self assert: 4 equals: carrito size.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:50:24' prior: 50859492!
test02

	| carrito unLibro |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	
	carrito add: unLibro amount: 1.
	
	self deny: carrito isEmpty.
	! !

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 17:50:28'!
ERROR!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:51:06' prior: 50859541!
test02

	| carrito unLibro |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 17:56:53' prior: 50859530!
test03

	| carrito unLibro |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	
	carrito add: unLibro amount: 4.
	
	self deny: carrito isEmpty.
	self assert: 4 equals: carrito listItems size.! !

----End fileIn of /media/Datos/Cuis/Ej-Libros/linux64/Packages/TerseGuide.pck.st----!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:07:10' prior: 50859559!
test03

	| carrito unLibro tuplaLibroCant |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	carrito add: unLibro amount: 4.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 1 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.! !

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:07:27'!
ERROR!
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:07:37'!
add: aString amount: aSmallInteger 
	self shouldBeImplemented.! !

!classDefinition: #Carrito category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:08:50'!
Object subclass: #Carrito
	instanceVariableNames: 'libro libros'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:09:00' prior: 50862511!
add: aString amount: aSmallInteger 
	| tuplaLibroCant |
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: aString.
	tuplaLibroCant add: aSmallInteger.
	
	libros add: tuplaLibroCant.! !
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:09:08' prior: 50862524!
add: aString amount: aSmallInteger 
	| tuplaLibroCant |
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: aString.
	tuplaLibroCant add: aSmallInteger.
	
	libros add: tuplaLibroCant.! !

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:09:39'!
ERROR!
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:10:04' prior: 50859439 overrides: 16896425!
initialize
	libros := OrderedCollection new.! !

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:10:06'!
FAILURE!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:10:06'!
FAILURE!
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/9/2021 18:10:27' prior: 50859520!
isEmpty
	^libros isEmpty .! !
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/9/2021 18:10:28' prior: 50862555!
isEmpty
	^libros isEmpty.! !
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:10:46' prior: 50859514!
add: aString 
	self add: aString amount: 1.! !
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:10:55' prior: 50862563!
add: aLibro 
	self add: aLibro amount: 1.! !
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:11:05' prior: 50862534!
add: aLibro amount: aSmallInteger 
	| tuplaLibroCant |
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: aLibro.
	tuplaLibroCant add: aSmallInteger.
	
	libros add: tuplaLibroCant.! !
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:11:14' prior: 50862573!
add: aLibro amount: anAmount 
	| tuplaLibroCant |
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: aLibro.
	tuplaLibroCant add: anAmount.
	
	libros add: tuplaLibroCant.! !
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:11:20' prior: 50862583!
add: aBook amount: anAmount 
	| tuplaLibroCant |
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: aBook.
	tuplaLibroCant add: anAmount.
	
	libros add: tuplaLibroCant.! !
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:11:29' prior: 50862568!
add: aBook 
	self add: aBook amount: 1.! !

!classDefinition: #Carrito category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:11:38'!
Object subclass: #Carrito
	instanceVariableNames: 'libro books'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:11:38' prior: 50862592!
add: aBook amount: anAmount 
	| tuplaLibroCant |
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: aBook.
	tuplaLibroCant add: anAmount.
	
	books add: tuplaLibroCant.! !
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:11:38' prior: 50862559!
isEmpty
	^books isEmpty.! !
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:11:38' prior: 50862546 overrides: 16896425!
initialize
	books := OrderedCollection new.! !

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:11:50'!
ERROR!
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:12:05'!
listItems
	^books! !
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:12:06' prior: 50862634!
listItems
	^books.! !

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:12:11'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:12:11'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:12:11'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:12:11'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:13:51'!
test04

	| carrito unLibro tuplaLibroCant unLibro2 unLibro3 |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	unLibro2 := ''.
	unLibro3 := ''.
	
	carrito add: unLibro amount: 4.
	carrito add: unLibro2 amount: 10.
	carrito add: unLibro3 amount: 100.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 1 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:14:05' prior: 50862650!
test04

	| carrito unLibro tuplaLibroCant unLibro2 unLibro3 |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	unLibro2 := ''.
	unLibro3 := ''.
	
	carrito add: unLibro amount: 4.
	carrito add: unLibro2 amount: 10.
	carrito add: unLibro3 amount: 100.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 3 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:15:14' prior: 50862669!
test04

	| carrito unLibro tuplaLibroCant unLibro2 unLibro3 |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	unLibro2 := ''.
	unLibro3 := ''.
	
	carrito add: unLibro amount: 4.
	carrito add: unLibro2 amount: 10.
	carrito add: unLibro3 amount: 100.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 3 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro2.
	tuplaLibroCant add: 10.
	
	self assert: tuplaLibroCant equals: carrito listItems second.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro3.
	tuplaLibroCant add: 100.
	
	self assert: tuplaLibroCant equals: carrito listItems third.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:15:36' prior: 50862688!
test04

	| carrito unLibro tuplaLibroCant unLibro2 unLibro3 |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	unLibro2 := '9780201184624'.
	unLibro3 := ''.
	
	carrito add: unLibro amount: 4.
	carrito add: unLibro2 amount: 10.
	carrito add: unLibro3 amount: 100.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 3 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro2.
	tuplaLibroCant add: 10.
	
	self assert: tuplaLibroCant equals: carrito listItems second.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro3.
	tuplaLibroCant add: 100.
	
	self assert: tuplaLibroCant equals: carrito listItems third.! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:16:39'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:16:39'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:16:39'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:16:39'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:16:39'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:16:57' prior: 50862494!
test03

	| carrito unLibro tuplaLibroCant |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201184624'.
	carrito add: unLibro amount: 4.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 1 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.! !

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:16:58'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:16:58'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:16:58'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:16:58'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:16:58'!
PASSED!

!methodRemoval: XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:17:02'!
test04

	| carrito unLibro tuplaLibroCant unLibro2 unLibro3 |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	unLibro2 := '9780201184624'.
	unLibro3 := ''.
	
	carrito add: unLibro amount: 4.
	carrito add: unLibro2 amount: 10.
	carrito add: unLibro3 amount: 100.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 3 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro2.
	tuplaLibroCant add: 10.
	
	self assert: tuplaLibroCant equals: carrito listItems second.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro3.
	tuplaLibroCant add: 100.
	
	self assert: tuplaLibroCant equals: carrito listItems third.!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:19:00' prior: 50862758!
test03

	| carrito unLibro tuplaLibroCant unLibro2 |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201184624'.
	unLibro2 := '9780201113723'.
	
	carrito add: unLibro amount: 4.
	carrito add: unLibro2 amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 1 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:19:34' prior: 50862813!
test03

	| carrito unLibro tuplaLibroCant unLibro2 |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201184624'.
	unLibro2 := '9780201113723'.
	
	carrito add: unLibro amount: 4.
	carrito add: unLibro2 amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro2.
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito listItems second.! !

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:19:35'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:19:35'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:19:35'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:19:35'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:23:18'!
test04

	| carrito unLibro |
	
	carrito := Carrito createNew.
	
	unLibro := '9780201113723'.
	
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:24:47' prior: 50862861!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	
	
	carrito := Carrito createNewWithValidList: 12.
	
	unLibro := '9780201113723'.
	
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:25:15' prior: 50862869!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: ''.
	
	carrito := Carrito createNewWithValidList: librosValidos.
	
	unLibro := '9780201113723'.
	
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:25:39' prior: 50862879!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithValidList: librosValidos.
	
	unLibro := '9780201113723'.
	
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:26:14' prior: 50862890!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithValidList: librosValidos.
	
	unLibro := '9780201113723'.
	carrito add: unLibro.
	
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:26:15' prior: 50862902!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithValidList: librosValidos.
	
	unLibro := '9780201113723'.
	carrito add: unLibro.
	
	
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:27:00' prior: 50862913!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithValidList: librosValidos.
	
	unLibro := '9780201113723'.
	carrito add: unLibro.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:31:12' prior: 50862924!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		unLibro := ''.
		carrito add: unLibro.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			anError message = Carrito errorBookNotInAllowedList
			] 
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:31:26' prior: 50862935!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		unLibro := '9780201113723'.
		carrito add: unLibro.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			anError message = Carrito errorBookNotInAllowedList
			] 
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:31:30' prior: 50862949!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		unLibro := '9780201113723'.
		carrito add: unLibro.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			anError message = Carrito errorBookNotInAllowedList
			].
	! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:31:35'!
ERROR!
!Carrito class methodsFor: 'instance creation' stamp: 'G.L.S 6/9/2021 18:31:42'!
createNewWithAllowedList: anOrderedCollection 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeCreateNewWithAllowedList: anOrderedCollection ! !
!Carrito class methodsFor: 'instance creation' stamp: 'G.L.S 6/9/2021 18:31:57' prior: 50862981!
createNewWithAllowedList: anOrderedCollection 
	^self new initializeWith: anOrderedCollection ! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:32:00'!
ERROR!

!classDefinition: #Carrito category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:32:10'!
Object subclass: #Carrito
	instanceVariableNames: 'libro books orderedCollection'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!Carrito methodsFor: 'initialization' stamp: 'G.L.S 6/9/2021 18:32:10'!
initializeWith: anOrderedCollection 
	self shouldBeImplemented.
	orderedCollection := anOrderedCollection.! !
!Carrito methodsFor: 'initialization' stamp: 'G.L.S 6/9/2021 18:32:19' prior: 50863007!
initializeWith: anOrderedCollection
	orderedCollection := anOrderedCollection.! !

!classDefinition: #Carrito category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:32:26'!
Object subclass: #Carrito
	instanceVariableNames: 'libro books allowedBooks'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!Carrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:32:26' prior: 50863014!
initializeWith: anOrderedCollection
	allowedBooks := anOrderedCollection.! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:32:30'!
FAILURE!
!Carrito class methodsFor: 'instance creation' stamp: 'G.L.S 6/9/2021 18:32:52' prior: 50862991!
createNewWithAllowedList: anOrderedCollection 
	^self new initializeWith: anOrderedCollection.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:33:12' prior: 50862964!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		unLibro := '9780201113723'.
		carrito add: unLibro.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			anError message = Carrito errorBookNotInAllowedList.
			].
	! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:33:14'!
FAILURE!
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/9/2021 18:33:57' prior: 50862613!
add: aBook amount: anAmount 
	| tuplaLibroCant |
	
	self assertBookIsAllowed: aBook.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: aBook.
	tuplaLibroCant add: anAmount.
	
	books add: tuplaLibroCant.! !
!Carrito methodsFor: 'initialization' stamp: 'G.L.S 6/9/2021 18:34:17' prior: 50863028!
initializeWith: anOrderedCollection
	allowedBooks := anOrderedCollection.
	books := OrderedCollection new.! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:34:33'!
ERROR!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:34:33'!
ERROR!
!Carrito class methodsFor: 'errors' stamp: 'G.L.S 6/9/2021 18:34:46'!
errorBookNotInAllowedList
	self shouldBeImplemented.! !
!Carrito class methodsFor: 'errors' stamp: 'G.L.S 6/9/2021 18:35:13' prior: 50863079!
errorBookNotInAllowedList
	^'Error - El Libro no está en la lista de productos permitidos'.! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:35:14'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:35:19'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:35:57'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:35:57'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:35:57'!
ERROR!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:35:57'!
ERROR!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:35:57'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:36:03'!
ERROR!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:37:03'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:37:07' prior: 50863042!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		unLibro := '9780201113723'.
		carrito add: unLibro.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			anError message == Carrito errorBookNotInAllowedList.
			].
	! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:37:10'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:37:20'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:37:25' prior: 50863110!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		unLibro := '9780201113723'.
		carrito add: unLibro.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			anError message = Carrito errorBookNotInAllowedList.
			].
	! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:38:59'!
PASSED!
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/9/2021 18:40:39'!
assertBookIsAllowed: aBook

	(allowedBooks includes: aBook) ifFalse:[self error: self class errorBookNotInAllowedList.].! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:40:44'!
ERROR!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:40:44'!
ERROR!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:41:19' prior: 50863129!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		unLibro := '9780201113723'.
		carrito add: unLibro.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Carrito errorBookNotInAllowedList.
			].
	! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:41:20'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:41:20'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:41:20'!
ERROR!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:41:20'!
ERROR!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:41:20'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:41:25'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:41:42' prior: 50862830!
test03

	| carrito unLibro tuplaLibroCant unLibro2 librosValidos |
	
	carrito := Carrito createNew.
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	
	unLibro := '9780201184624'.
	unLibro2 := '9780201113723'.
	
	carrito add: unLibro amount: 4.
	carrito add: unLibro2 amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro2.
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito listItems second.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:41:54' prior: 50863186!
test03

	| carrito unLibro tuplaLibroCant unLibro2 librosValidos |
	
	carrito := Carrito createNew.
	
	librosValidos := OrderedCollection new.
	librosValidos add: '9780201184624'.
	librosValidos add: '9780201113723'.
	
	unLibro := '9780201184624'.
	unLibro2 := '9780201113723'.
	
	carrito add: unLibro amount: 4.
	carrito add: unLibro2 amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro2.
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito listItems second.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:42:37' prior: 50863211!
test03

	| carrito unLibro tuplaLibroCant unLibro2 librosValidos |
	
	unLibro := '9780201184624'.
	unLibro2 := '9780201113723'.	
	
	librosValidos := OrderedCollection new.
	librosValidos add: unLibro.
	librosValidos add: unLibro2.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
		
	carrito add: unLibro amount: 4.
	carrito add: unLibro2 amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro2.
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito listItems second.! !

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:42:42'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:42:42'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:42:42'!
ERROR!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:42:42'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:42:42'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:42:42'!
ERROR!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:43:16'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:43:16'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:43:16'!
ERROR!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:43:16'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:43:16'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:43:16'!
ERROR!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:43:51' prior: 50859551!
test02

	| carrito unLibro librosValidos |
	
	unLibro := '9780201113723'.
	
	librosValidos := OrderedCollection new.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:44:08' prior: 50863291!
test02

	| carrito unLibro librosValidos |
	
	unLibro := '9780201113723'.
	
	librosValidos := OrderedCollection new.
	librosValidos add: unLibro.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	carrito add: unLibro.
	
	self deny: carrito isEmpty.
	! !

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:44:14'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:44:14'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:44:14'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:44:14'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:44:14'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:44:27' prior: 50859416!
test01

	| carrito |
	
	carrito := Carrito createNewWithAllowedList: ''.
	
	self assert: carrito isEmpty.
	! !

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:44:28'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:44:28'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:44:28'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:44:28'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:44:28'!
PASSED!

!methodRemoval: Carrito #initialize stamp: 'G.L.S 6/9/2021 18:44:39'!
initialize
	books := OrderedCollection new.!

!methodRemoval: Carrito class #createNew stamp: 'G.L.S 6/9/2021 18:44:44'!
createNew
	^self new initialize.!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:44:51'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:44:51'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:44:51'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:44:51'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:48:07' overrides: 16927572!
setUp! !

!classDefinition: #XXXTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:48:39'!
TestCase subclass: #XXXTest
	instanceVariableNames: 'libro1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #XXXTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:48:40'!
TestCase subclass: #XXXTest
	instanceVariableNames: 'libro1 libro2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #XXXTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:48:41'!
TestCase subclass: #XXXTest
	instanceVariableNames: 'libro1 libro2 libro3'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:48:36' prior: 50863356 overrides: 16927572!
setUp

	libro1 := 0.
	libro2 := 0.
	libro3 := 0.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:49:13' prior: 50863382 overrides: 16927572!
setUp

	libro1 := '9780201113723'.
	libro2 := 0.
	libro3 := 0.! !

!classDefinition: #XXXTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:49:23'!
TestCase subclass: #XXXTest
	instanceVariableNames: 'smalltalk80 libro2 libro3'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!XXXTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:49:23' prior: 50863387 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	libro2 := 0.
	libro3 := 0.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:49:50' prior: 50863401 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	libro2 := '9780201184624'.
	libro3 := 0.! !

!classDefinition: #XXXTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:50:06'!
TestCase subclass: #XXXTest
	instanceVariableNames: 'smalltalk80 designPatters libro3'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!XXXTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:50:06' prior: 50863407 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatters := '9780201184624'.
	libro3 := 0.! !

!classDefinition: #XXXTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:50:16'!
TestCase subclass: #XXXTest
	instanceVariableNames: 'smalltalk80 designPatterns libro3'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!XXXTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:50:16' prior: 50863422 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	libro3 := 0.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:50:27' prior: 50863437 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	libro3 := '9780735619654'.! !

!classDefinition: #XXXTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/9/2021 18:50:37'!
TestCase subclass: #XXXTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!XXXTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/9/2021 18:50:37' prior: 50863444 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:51:05' prior: 50863301!
test02

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80 .
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	carrito add: smalltalk80.
	
	self deny: carrito isEmpty.
	! !

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:51:08'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:51:08'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:51:08'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:51:08'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:51:08'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:51:59' prior: 50863238!
test03

	| carrito tuplaLibroCant unLibro2 librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	librosValidos add: designPatterns.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
		
	carrito add: smalltalk80 amount: 4.
	carrito add: designPatterns amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: smalltalk80.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: unLibro2.
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito listItems second.! !
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:52:23' prior: 50863488!
test03

	| carrito tuplaLibroCant librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	librosValidos add: designPatterns.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
		
	carrito add: smalltalk80 amount: 4.
	carrito add: designPatterns amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: smalltalk80.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: designPatterns .
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito listItems second.! !

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:52:27'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:52:27'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:52:27'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:52:27'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:52:27'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:52:47' prior: 50863157!
test04

	| carrito unLibro librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: designPatterns.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		unLibro := smalltalk80.
		carrito add: unLibro.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Carrito errorBookNotInAllowedList.
			].
	! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:52:48'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:52:48'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:52:48'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:52:48'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:52:48'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/9/2021 18:53:03' prior: 50863551!
test04

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: designPatterns.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Carrito errorBookNotInAllowedList.
			].
	! !

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:53:05'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/9/2021 18:53:05'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/9/2021 18:53:05'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/9/2021 18:53:05'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/9/2021 18:53:05'!
PASSED!

----QUIT----(9 June 2021 18:55:59) CuisUniversity-4532.image priorSource: 16887590!

----STARTUP---- (10 June 2021 13:32:39) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!

!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 13:34:03'!
test05

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: 1.5.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Carrito errorAmountNotInteger.
			].
	! !

!testRun: #XXXTest #test05 stamp: 'G.L.S 6/10/2021 13:34:09'!
FAILURE!
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 13:34:42' prior: 50863059!
add: aBook amount: anAmount 
	| tuplaLibroCant |
	
	self assertBookIsAllowed: aBook.
	self assertAmountIsValid: anAmount.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: aBook.
	tuplaLibroCant add: anAmount.
	
	books add: tuplaLibroCant.! !

!testRun: #XXXTest #test05 stamp: 'G.L.S 6/10/2021 13:34:49'!
ERROR!
!Carrito class methodsFor: 'errors' stamp: 'G.L.S 6/10/2021 13:35:06'!
errorAmountNotInteger
	self shouldBeImplemented.! !
!Carrito class methodsFor: 'errors' stamp: 'G.L.S 6/10/2021 13:35:33' prior: 50863638!
errorAmountNotInteger
	^'Error - La cantidad tiene que ser un número entero'.! !

!testRun: #XXXTest #test05 stamp: 'G.L.S 6/10/2021 13:35:36'!
FAILURE!
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 13:37:08'!
assertAmountIsValid: anAmount.

	anAmount isInteger ifFalse: [self error: self class errorAmountNotInteger].! !

!testRun: #XXXTest #test05 stamp: 'G.L.S 6/10/2021 13:37:13'!
PASSED!

!testRun: #XXXTest #test05 stamp: 'G.L.S 6/10/2021 13:37:17'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 13:37:40'!
test06

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: -1.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Carrito errorAmountNegative.
			].
	! !

!testRun: #XXXTest #test06 stamp: 'G.L.S 6/10/2021 13:37:47'!
FAILURE!
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 13:38:29' prior: 50863650!
assertAmountIsValid: anAmount.

	(anAmount isInteger) ifFalse: [self error: self class errorAmountNotInteger].! !
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 13:39:15' prior: 50863677!
assertAmountIsValid: anAmount.

	(anAmount isInteger) ifFalse: [self error: self class errorAmountNotInteger].
	(anAmount < 0) ifFalse: [self error: self class errorAmountNegative]. ! !
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 13:39:19' prior: 50863684!
assertAmountIsValid: anAmount.

	(anAmount isInteger) ifFalse: [self error: self class errorAmountNotInteger].
	(anAmount < 0) ifFalse: [self error: self class errorAmountNegative].! !

!testRun: #XXXTest #test06 stamp: 'G.L.S 6/10/2021 13:39:25'!
FAILURE!
!Carrito class methodsFor: 'errors' stamp: 'G.L.S 6/10/2021 13:39:58'!
errorAmountNegative
	^'Error - '.! !
!Carrito class methodsFor: 'errors' stamp: 'G.L.S 6/10/2021 13:40:37' prior: 50863704!
errorAmountNegative
	^'Error - La cantidad no puede ser negativa'.! !

!testRun: #XXXTest #test06 stamp: 'G.L.S 6/10/2021 13:46:48'!
FAILURE!

!testRun: #XXXTest #test06 stamp: 'G.L.S 6/10/2021 13:46:48'!
FAILURE!

!testRun: #XXXTest #test06 stamp: 'G.L.S 6/10/2021 13:46:55'!
FAILURE!

!testRun: #XXXTest #test06 stamp: 'G.L.S 6/10/2021 13:47:07'!
FAILURE!

!testRun: #XXXTest #test06 stamp: 'G.L.S 6/10/2021 13:47:07'!
FAILURE!
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 13:47:49' prior: 50863693!
assertAmountIsValid: anAmount.

	(anAmount isInteger) ifFalse: [self error: self class errorAmountNotInteger].
	(anAmount < 0) ifTrue: [self error: self class errorAmountNegative].! !

!testRun: #XXXTest #test06 stamp: 'G.L.S 6/10/2021 13:47:54'!
PASSED!
!XXXTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 13:48:15'!
test07

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Carrito createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: 0.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Carrito errorAmountZero.
			].
	! !

!testRun: #XXXTest #test07 stamp: 'G.L.S 6/10/2021 13:48:32'!
FAILURE!
!Carrito class methodsFor: 'errors' stamp: 'G.L.S 6/10/2021 13:49:02'!
errorAmountZero
	^'Error - La cantidad de libros no puede ser 0'.! !
!Carrito methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 13:49:35' prior: 50863725!
assertAmountIsValid: anAmount.

	(anAmount isInteger) ifFalse: [self error: self class errorAmountNotInteger].
	(anAmount < 0) ifTrue: [self error: self class errorAmountNegative].
	(anAmount = 0) ifTrue: [self error: self class errorAmountZero].! !

!testRun: #XXXTest #test07 stamp: 'G.L.S 6/10/2021 13:49:41'!
PASSED!

!testRun: #XXXTest #test01 stamp: 'G.L.S 6/10/2021 13:49:41'!
PASSED!

!testRun: #XXXTest #test02 stamp: 'G.L.S 6/10/2021 13:49:41'!
PASSED!

!testRun: #XXXTest #test03 stamp: 'G.L.S 6/10/2021 13:49:41'!
PASSED!

!testRun: #XXXTest #test04 stamp: 'G.L.S 6/10/2021 13:49:41'!
PASSED!

!testRun: #XXXTest #test05 stamp: 'G.L.S 6/10/2021 13:49:41'!
PASSED!

!testRun: #XXXTest #test06 stamp: 'G.L.S 6/10/2021 13:49:41'!
PASSED!

!testRun: #XXXTest #test07 stamp: 'G.L.S 6/10/2021 13:49:41'!
PASSED!

!classRenamed: #XXXTest as: #CarritoTest stamp: 'G.L.S 6/10/2021 13:49:54'!
Smalltalk renameClassNamed: #XXXTest as: #CarritoTest!

Object subclass: #ItemCarrito
	instanceVariableNames: 'book amount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #ItemCarrito category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 13:51:48'!
Object subclass: #ItemCarrito
	instanceVariableNames: 'book amount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #Carrito category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 13:52:04'!
Object subclass: #Carrito
	instanceVariableNames: 'books allowedBooks'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!ItemCarrito class methodsFor: 'no messages' stamp: 'G.L.S 6/10/2021 14:01:18'!
for: aBook amount: anAmount

	^self initializeFor: aBook withAmount: anAmount.! !
!ItemCarrito methodsFor: 'nil' stamp: 'G.L.S 6/10/2021 14:01:46'!
initializeFor: aBook withAmount: anAmount! !
!ItemCarrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:02:13' prior: 50863814!
initializeFor: aBook withAmount: anAmount
	book = aBook.
	amount = anAmount.! !
!ItemCarrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:02:16' prior: 50863819!
initializeFor: aBook withAmount: anAmount

	book = aBook.
	amount = anAmount.! !
!ItemCarrito methodsFor: 'nil' stamp: 'G.L.S 6/10/2021 14:03:46'!
book
	^book.! !
!ItemCarrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:03:55'!
amount
	^amount! !
!ItemCarrito methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:03:56' prior: 50863834!
amount
	^amount.! !

!classRenamed: #Carrito as: #Cart stamp: 'G.L.S 6/10/2021 14:05:03'!
Smalltalk renameClassNamed: #Carrito as: #Cart!
!CarritoTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:05:03' prior: 50863608!
test05

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: 1.5.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountNotInteger.
			].
	! !
!CarritoTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:05:03' prior: 50863660!
test06

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: -1.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountNegative.
			].
	! !
!CarritoTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:05:03' prior: 50863514!
test03

	| carrito tuplaLibroCant librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	librosValidos add: designPatterns.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
		
	carrito add: smalltalk80 amount: 4.
	carrito add: designPatterns amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: smalltalk80.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: designPatterns .
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito listItems second.! !
!CarritoTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:05:03' prior: 50863467!
test02

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80 .
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	carrito add: smalltalk80.
	
	self deny: carrito isEmpty.
	! !
!CarritoTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:05:03' prior: 50863323!
test01

	| carrito |
	
	carrito := Cart createNewWithAllowedList: ''.
	
	self assert: carrito isEmpty.
	! !
!CarritoTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:05:03' prior: 50863577!
test04

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: designPatterns.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorBookNotInAllowedList.
			].
	! !
!CarritoTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 14:05:03' prior: 50863736!
test07

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: 0.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountZero.
			].
	! !

!testRun: #CarritoTest #test01 stamp: 'G.L.S 6/10/2021 14:05:15'!
PASSED!

!testRun: #CarritoTest #test02 stamp: 'G.L.S 6/10/2021 14:05:15'!
PASSED!

!testRun: #CarritoTest #test03 stamp: 'G.L.S 6/10/2021 14:05:15'!
PASSED!

!testRun: #CarritoTest #test04 stamp: 'G.L.S 6/10/2021 14:05:15'!
PASSED!

!testRun: #CarritoTest #test05 stamp: 'G.L.S 6/10/2021 14:05:15'!
PASSED!

!testRun: #CarritoTest #test06 stamp: 'G.L.S 6/10/2021 14:05:15'!
PASSED!

!testRun: #CarritoTest #test07 stamp: 'G.L.S 6/10/2021 14:05:15'!
PASSED!

!classRenamed: #CarritoTest as: #CartTest stamp: 'G.L.S 6/10/2021 14:05:22'!
Smalltalk renameClassNamed: #CarritoTest as: #CartTest!

!testRun: #CartTest #test01 stamp: 'G.L.S 6/10/2021 14:05:27'!
PASSED!

!testRun: #CartTest #test02 stamp: 'G.L.S 6/10/2021 14:05:27'!
PASSED!

!testRun: #CartTest #test03 stamp: 'G.L.S 6/10/2021 14:05:27'!
PASSED!

!testRun: #CartTest #test04 stamp: 'G.L.S 6/10/2021 14:05:27'!
PASSED!

!testRun: #CartTest #test05 stamp: 'G.L.S 6/10/2021 14:05:27'!
PASSED!

!testRun: #CartTest #test06 stamp: 'G.L.S 6/10/2021 14:05:27'!
PASSED!

!testRun: #CartTest #test07 stamp: 'G.L.S 6/10/2021 14:05:27'!
PASSED!

!classRenamed: #ItemCarrito as: #CartItem stamp: 'G.L.S 6/10/2021 14:05:39'!
Smalltalk renameClassNamed: #ItemCarrito as: #CartItem!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:06:27'!
test01CartThatWasJustCreatedIsEmpty

	| carrito |
	
	carrito := Cart createNewWithAllowedList: ''.
	
	self assert: carrito isEmpty.
	! !

!methodRemoval: CartTest #test01 stamp: 'G.L.S 6/10/2021 14:06:27'!
test01

	| carrito |
	
	carrito := Cart createNewWithAllowedList: ''.
	
	self assert: carrito isEmpty.
	!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:07:00'!
test02CartWithAnItemIsNotEmpty

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80 .
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	carrito add: smalltalk80.
	
	self deny: carrito isEmpty.
	! !

!methodRemoval: CartTest #test02 stamp: 'G.L.S 6/10/2021 14:07:00'!
test02

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80 .
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	carrito add: smalltalk80.
	
	self deny: carrito isEmpty.
	!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:12:05'!
test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts

	| carrito tuplaLibroCant librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	librosValidos add: designPatterns.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
		
	carrito add: smalltalk80 amount: 4.
	carrito add: designPatterns amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: smalltalk80.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: designPatterns .
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito listItems second.! !

!methodRemoval: CartTest #test03 stamp: 'G.L.S 6/10/2021 14:12:05'!
test03

	| carrito tuplaLibroCant librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	librosValidos add: designPatterns.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
		
	carrito add: smalltalk80 amount: 4.
	carrito add: designPatterns amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: smalltalk80.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito listItems size.
	self assert: tuplaLibroCant equals: carrito listItems first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: designPatterns .
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito listItems second.!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:17:49'!
test04CartCannotAddItemsThatAreNotAllowed

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: designPatterns.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorBookNotInAllowedList.
			].
	! !

!methodRemoval: CartTest #test04 stamp: 'G.L.S 6/10/2021 14:17:49'!
test04

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: designPatterns.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorBookNotInAllowedList.
			].
	!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:18:31'!
test05CartCannotAddANonIntegerAmountOfAnItem

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: 1.5.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountNotInteger.
			].
	! !

!methodRemoval: CartTest #test05 stamp: 'G.L.S 6/10/2021 14:18:31'!
test05

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: 1.5.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountNotInteger.
			].
	!

!classRemoval: #XXX stamp: 'G.L.S 6/10/2021 14:18:47'!
Object subclass: #XXX
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:19:33'!
test06CartCannotAddANegativeAmountOfAnItem

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: -1.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountNegative.
			].
	! !

!methodRemoval: CartTest #test06 stamp: 'G.L.S 6/10/2021 14:19:33'!
test06

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: -1.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountNegative.
			].
	!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:20:05'!
test07CartCannotAddAZeroAmountOfAnItem

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: 0.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountZero.
			].
	! !

!methodRemoval: CartTest #test07 stamp: 'G.L.S 6/10/2021 14:20:05'!
test07

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: 0.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountZero.
			].
	!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/10/2021 14:37:11'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/10/2021 14:37:11'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/10/2021 14:37:11'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/10/2021 14:37:11'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:37:11'!
PASSED!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:37:11'!
PASSED!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:37:11'!
PASSED!

!classRemoval: #CartItem stamp: 'G.L.S 6/10/2021 14:52:12'!
Object subclass: #CartItem
	instanceVariableNames: 'book amount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:55:51'!
testCartFailToAdd: aBook withAmount: anAmount whileAllowing: aBookList expectingErrorMessage: anErrorMessage

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	aBookList do: [:aBookToAllow | librosValidos add: aBookToAllow.].
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: aBook amount: 0.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountZero.
			].
	! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:56:14' prior: 50864222!
testCartFailToAdd: aBook withAmount: anAmount whileAllowing: aBookList expectingErrorMessage: anErrorMessage

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	aBookList do: [:aBookToAllow | librosValidos add: aBookToAllow.].
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: aBook amount: anAmount.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: anErrorMessage.
			].
	! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:58:16' prior: 50864164!
test07CartCannotAddAZeroAmountOfAnItem

	"| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: 0.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountZero.
			]."
	
	self testCartFailToAdd: smalltalk80 
		withAmount: 0
		whileAllowing: {smalltalk80.}  
		expectingErrorMessage: Cart errorAmountZero. 
	! !

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:58:18'!
PASSED!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/10/2021 14:58:18'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/10/2021 14:58:18'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/10/2021 14:58:18'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/10/2021 14:58:18'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:58:18'!
PASSED!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:58:18'!
PASSED!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:58:18'!
PASSED!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:58:28' prior: 50864258!
test07CartCannotAddAZeroAmountOfAnItem
	
	self testCartFailToAdd: smalltalk80 
		withAmount: 0
		whileAllowing: {smalltalk80.}  
		expectingErrorMessage: Cart errorAmountZero. 
	! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:58:29' prior: 50864305!
test07CartCannotAddAZeroAmountOfAnItem
	
	self testCartFailToAdd: smalltalk80 
		withAmount: 0
		whileAllowing: {smalltalk80.}  
		expectingErrorMessage: Cart errorAmountZero.
	! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:58:57' prior: 50864135!
test06CartCannotAddANegativeAmountOfAnItem

	"| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: -1.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountNegative.
			]."
	
	self testCartFailToAdd: smalltalk80 
		withAmount: -1
		whileAllowing: {smalltalk80.}  
		expectingErrorMessage: Cart errorAmountNegative.! !

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:59:01'!
PASSED!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/10/2021 14:59:01'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/10/2021 14:59:01'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/10/2021 14:59:01'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/10/2021 14:59:01'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:59:01'!
PASSED!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:59:01'!
PASSED!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:59:01'!
PASSED!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:59:07' prior: 50864323!
test06CartCannotAddANegativeAmountOfAnItem
	
	self testCartFailToAdd: smalltalk80 
		withAmount: -1
		whileAllowing: {smalltalk80.}  
		expectingErrorMessage: Cart errorAmountNegative.! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:59:34' prior: 50864100!
test05CartCannotAddANonIntegerAmountOfAnItem

	"| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80 amount: 1.5.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorAmountNotInteger.
			]."
	
	self testCartFailToAdd: smalltalk80 
		withAmount: 1.5
		whileAllowing: {smalltalk80.}  
		expectingErrorMessage: Cart errorAmountNotInteger.
	! !

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:59:36'!
PASSED!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/10/2021 14:59:36'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/10/2021 14:59:36'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/10/2021 14:59:36'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/10/2021 14:59:36'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:59:36'!
PASSED!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:59:36'!
PASSED!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/10/2021 14:59:36'!
PASSED!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 14:59:42' prior: 50864379!
test05CartCannotAddANonIntegerAmountOfAnItem
	
	self testCartFailToAdd: smalltalk80 
		withAmount: 1.5
		whileAllowing: {smalltalk80.}  
		expectingErrorMessage: Cart errorAmountNotInteger.
	! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 15:00:13' prior: 50864072!
test04CartCannotAddItemsThatAreNotAllowed

	"| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: designPatterns.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
	
	self should: [
		carrito add: smalltalk80.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: Cart errorBookNotInAllowedList.
			]."
		
	self testCartFailToAdd: smalltalk80 
		withAmount: 1
		whileAllowing: {designPatterns.}  
		expectingErrorMessage: Cart errorBookNotInAllowedList.
	! !

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/10/2021 15:00:15'!
PASSED!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/10/2021 15:00:15'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/10/2021 15:00:15'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/10/2021 15:00:15'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/10/2021 15:00:15'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/10/2021 15:00:15'!
PASSED!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/10/2021 15:00:15'!
PASSED!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/10/2021 15:00:15'!
PASSED!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 15:00:22' prior: 50864435!
test04CartCannotAddItemsThatAreNotAllowed
		
	self testCartFailToAdd: smalltalk80 
		withAmount: 1
		whileAllowing: {designPatterns.}  
		expectingErrorMessage: Cart errorBookNotInAllowedList.
	! !

----QUIT----(10 June 2021 15:03:38) CuisUniversity-4532.image priorSource: 17022446!

----STARTUP---- (10 June 2021 15:13:46) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!


!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/10/2021 15:13:57'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/10/2021 15:13:57'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/10/2021 15:13:57'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/10/2021 15:13:57'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/10/2021 15:13:57'!
PASSED!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/10/2021 15:13:57'!
PASSED!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/10/2021 15:13:57'!
PASSED!

----QUIT----(10 June 2021 15:19:09) CuisUniversity-4532.image priorSource: 17050885!

----STARTUP---- (10 June 2021 15:27:47) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!


pepe _ Dictionary new.!

pepe add: 'jorge'->5.!

pepe add: 'jorge'->5.!

pepe at: 'jorge'.!

----QUIT----(10 June 2021 15:30:31) CuisUniversity-4532.image priorSource: 17051833!

----STARTUP---- (10 June 2021 17:47:27) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!

!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 17:48:49' prior: 50864021!
test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts

	| carrito tuplaLibroCant librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	librosValidos add: designPatterns.
	
	carrito := Cart createNewWithAllowedList: librosValidos.
		
	carrito add: smalltalk80 amount: 4.
	carrito add: designPatterns amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: smalltalk80.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito size.
	self assert: tuplaLibroCant equals: carrito first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: designPatterns .
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito second.! !

!methodRemoval: Cart #listItems stamp: 'G.L.S 6/10/2021 17:48:59'!
listItems
	^books.!
!Cart methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 17:49:14' overrides: 16880927!
size
	^books size.! !
!Cart methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 17:49:24'!
first
	^books first.! !
!Cart methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 17:49:35'!
second
	^books second.! !

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/10/2021 17:49:57'!
PASSED!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/10/2021 17:49:57'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/10/2021 17:49:57'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/10/2021 17:49:57'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/10/2021 17:49:57'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/10/2021 17:49:57'!
PASSED!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/10/2021 17:49:57'!
PASSED!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/10/2021 17:49:57'!
PASSED!

----QUIT----(10 June 2021 18:15:03) CuisUniversity-4532.image priorSource: 17052120!

----STARTUP---- (10 June 2021 19:39:29) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!


TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 19:42:00'!
TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 19:42:19'!
test01! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 19:47:05'!
test01CashierCannotCheckoutWithAnEmptyCart! !

!methodRemoval: CashierTest #test01 stamp: 'G.L.S 6/10/2021 19:47:13'!
test01!

!classDefinition: #Cashier category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 19:52:27'!
Object subclass: #Cashier
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 19:52:16' prior: 50864623!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart] 
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			]! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 19:52:49' prior: 50864637!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart] 
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			]! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 19:56:32' prior: 50864650!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier card |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: ''.
	card := '0000000000000000'.
	
	
	self should: [cashier checkout: cart] 
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			]! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 19:57:31' prior: 50864663!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart] 
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			]! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 19:57:42' prior: 50864677!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart] 
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 19:58:20'!
ERROR!
!Cashier class methodsFor: 'errors' stamp: 'G.L.S 6/10/2021 19:58:37'!
errorCannotCheckoutEmptyCart
	self shouldBeImplemented.! !
!Cashier class methodsFor: 'errors' stamp: 'G.L.S 6/10/2021 20:01:29' prior: 50864706!
errorCannotCheckoutEmptyCart
	^'Error - No se puede hacer checkout de un carrito vacío'.! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 20:01:31'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 20:01:31'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 20:01:42'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 20:01:42'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:02:08' prior: 50864690!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/10/2021 20:08:00'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/10/2021 20:08:00'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/10/2021 20:08:00'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/10/2021 20:08:00'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/10/2021 20:08:00'!
PASSED!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/10/2021 20:08:00'!
PASSED!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/10/2021 20:08:00'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 20:09:16'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 20:09:16'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:20:12'!
test02
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:22:13' prior: 50864774!
test02
	
	| cart cashier catalog |
	
	catalog := Dictionary new.
	
	cashier := Cashier withCatalog: ''.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !

pepe _ Dictionary new.!

pepe add: 'jorge' -> 5.!

pepe at: 'jorge'.!

 5 !

 5 !

 5 !

pepe at: 'jorge'.!

 5 !

pepe add: 'jorge' -> 2324254.!

pepe at: 'jorge'.!

 2324254 !

 2324254 !

 2324254 !

pepe at: 'jorge' put: 10.!

pepe at: 'jorge'.!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:23:45' prior: 50864785!
test02
	
	| cart cashier catalog |
	
	catalog := Dictionary new.
	catalog add: '' -> 10.
	
	cashier := Cashier withCatalog: ''.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 20:24:09'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 20:24:10'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 20:24:11'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:24:05' overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:24:50' prior: 50864806!
test02
	
	| cart cashier |
	
	cashier := Cashier withCatalog: ''.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 20:25:28'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking aCatalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:25:26' prior: 50864844 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	
	aCatalog := Dictionary new.
	aCatalog add: smalltalk80 -> 10.
	aCatalog add: designPatterns -> 100.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:25:44' prior: 50864872 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	
	aCatalog := Dictionary new.
	aCatalog add: smalltalk80 -> 10.
	aCatalog add: designPatterns -> 100.
	aCatalog add: objectThinking -> 50.! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 20:26:00'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 20:26:00' prior: 50864883 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 20:26:19'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:26:17' prior: 50864904 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	emptyCatalog := Dictionary new.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:26:37' prior: 50864851!
test02
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:27:31' prior: 50864937!
test02
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {smalltalk80. designPatterns. objectThinking.}.
	cart add: smalltalk80.
	cart add: designPatterns.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:31:02' prior: 50864949!
test02
	
	"| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {smalltalk80. designPatterns. objectThinking.}.
	cart add: smalltalk80.
	cart add: designPatterns.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			]."! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:31:09' prior: 50864731!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: ''.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 20:31:10'!
FAILURE!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 20:31:22'!
FAILURE!
!Cashier methodsFor: 'nil' stamp: 'G.L.S 6/10/2021 20:31:50'!
checkout: aCart! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 20:32:19' prior: 50864998!
checkout: aCart
	
	self assertCartIsNotEmpty: aCart.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 20:32:42'!
assertCartIsNotEmpty: aCart
	
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 20:33:20' prior: 50865007!
assertCartIsNotEmpty: aCart
	
	aCart isEmpty ifTrue: [self error: self class errorCannotCheckoutEmptyCart].! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 20:33:23'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:33:41' prior: 50864964!
test02
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {smalltalk80. designPatterns. objectThinking.}.
	cart add: smalltalk80.
	cart add: designPatterns.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:37:27' prior: 50865022!
test02
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {smalltalk80. designPatterns. objectThinking.}.
	cart add: smalltalk80.
	cart add: designPatterns.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:40:10' prior: 50864925 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:40:13' prior: 50865053 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 20:40:39'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:40:35' prior: 50865066 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 20:41:47'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:41:52' prior: 50865088 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:42:16' prior: 50865112 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:42:33' prior: 50865037!
test02
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {smalltalk80. designPatterns. objectThinking.}.
	cart add: smalltalk80.
	cart add: designPatterns.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:43:16'!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {smalltalk80. designPatterns. objectThinking.}.
	cart add: smalltalk80.
	cart add: designPatterns.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !

!methodRemoval: CashierTest #test02 stamp: 'G.L.S 6/10/2021 20:43:16'!
test02
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {smalltalk80. designPatterns. objectThinking.}.
	cart add: smalltalk80.
	cart add: designPatterns.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:43:55' prior: 50865155!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {donQuixote }.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/10/2021 20:44:13' prior: 50865187!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {donQuixote }.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/10/2021 20:44:17'!
ERROR!
!Cashier class methodsFor: 'instance creation' stamp: 'G.L.S 6/10/2021 20:44:26'!
withCatalog: aDictionary 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeWithCatalog: aDictionary ! !
!Cashier class methodsFor: 'instance creation' stamp: 'G.L.S 6/10/2021 20:44:34' prior: 50865222!
withCatalog: aDictionary 
	^self new initializeWithCatalog: aDictionary. ! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/10/2021 20:44:36'!
ERROR!

!classDefinition: #Cashier category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 20:44:46'!
Object subclass: #Cashier
	instanceVariableNames: 'dictionary'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!Cashier methodsFor: 'initialization' stamp: 'G.L.S 6/10/2021 20:44:46'!
initializeWithCatalog: aDictionary 
	self shouldBeImplemented.
	dictionary := aDictionary.! !
!Cashier methodsFor: 'initialization' stamp: 'G.L.S 6/10/2021 20:44:56' prior: 50865248!
initializeWithCatalog: aDictionary 
	dictionary := aDictionary.! !

!classDefinition: #Cashier category: 'Ejercicio-Libros' stamp: 'G.L.S 6/10/2021 20:45:01'!
Object subclass: #Cashier
	instanceVariableNames: 'catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 20:45:01' prior: 50865254!
initializeWithCatalog: aDictionary 
	catalog := aDictionary.! !
!Cashier methodsFor: 'initialization' stamp: 'G.L.S 6/10/2021 20:45:21' prior: 50865267!
initializeWithCatalog: aCatalog 
	catalog := aCatalog.! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/10/2021 20:45:24'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 20:46:27' prior: 50865002!
checkout: aCart
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 20:46:38'!
assertCartHasTheSameCatalog: aCart

	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 20:47:45' prior: 50865288!
assertCartHasTheSameCatalog: aCart

	aCart hasCatalog: catalog.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 20:48:20' prior: 50865293!
assertCartHasTheSameCatalog: aCart

	(aCart hasCatalog: catalog) ifFalse: [self error: self class].! !
!Cashier class methodsFor: 'errors' stamp: 'G.L.S 6/10/2021 20:48:53'!
errorCannotCheckoutACartWithADifferentCatalog
	^'Error - No se puede hacer checkout de un carrito con un catálogo diferente'.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/10/2021 20:49:32' prior: 50865299!
assertCartHasTheSameCatalog: aCart

	(aCart hasCatalog: catalog) ifFalse: [self error: self class errorCannotCheckoutACartWithADifferentCatalog].! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/10/2021 20:49:42'!
FAILURE!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/10/2021 20:49:42'!
FAILURE!
!Cart methodsFor: 'operations' stamp: 'G.L.S 6/10/2021 20:50:27'!
hasCatalog: aCatalog
	^allowedBooks = aCatalog.! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/10/2021 20:50:38'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/10/2021 20:50:38'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/10/2021 20:50:38'!
PASSED!

----QUIT----(10 June 2021 21:23:14) CuisUniversity-4532.image priorSource: 17054443!

----STARTUP---- (14 June 2021 17:15:25) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!


!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/14/2021 18:01:44'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/14/2021 18:01:45'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:34:59' prior: 50864979!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: emptyCatalog .
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:35:00' prior: 50865359!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: emptyCatalog.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/14/2021 18:35:01'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/14/2021 18:35:01'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/14/2021 18:35:01'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:43:09'!
test03
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {donQuixote }.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:44:32' prior: 50865202!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: {donQuixote}.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:44:58' prior: 50865127 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:45:15' prior: 50865410!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog2.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/14/2021 18:45:21'!
ERROR!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/14/2021 18:45:21'!
ERROR!

pepe keys.!
!Cart methodsFor: 'operations' stamp: 'G.L.S 6/14/2021 18:45:59' prior: 50863146!
assertBookIsAllowed: aBook

	(allowedBooks keys includes: aBook) ifFalse:[self error: self class errorBookNotInAllowedList.].! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/14/2021 18:46:06'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/14/2021 18:46:08'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:46:27' prior: 50865396!
test03
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:46:41' prior: 50865482!
test03
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 30.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:46:53' prior: 50865496!
test03
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:47:15' prior: 50865510!
test03
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 18:50:32' prior: 50865524!
test03
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart.
	
	self assert: 530 equals: result.! !

!testRun: #CashierTest #test03 stamp: 'G.L.S 6/14/2021 18:50:39'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 18:52:33' prior: 50865282!
checkout: aCart
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	
	^530.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 18:53:07' prior: 50865554!
checkout: aCart
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 18:54:48' prior: 50865561!
checkout: aCart
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	
	^aCart totalItemPrice.! !

!testRun: #CashierTest #test03 stamp: 'G.L.S 6/14/2021 18:55:00'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 18:55:47'!
totalItemPrice
	self shouldBeImplemented.! !

pepe2 _ OrderedCollection new.!

pepe2 add: 2.!

pepe2 add: 5.!

pepe2 add: 6.!

pepe2!

pepe2 sum: [:val | val*2]!
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 18:59:43' prior: 50865577!
totalItemPrice
	
	^books sum: [:bookAmountTuple | allowedBooks at: bookAmountTuple first].! !

!classDefinition: #Cart category: 'Ejercicio-Libros' stamp: 'G.L.S 6/14/2021 19:00:17'!
Object subclass: #Cart
	instanceVariableNames: 'books catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:00:17' prior: 50865585!
totalItemPrice
	
	^books sum: [:bookAmountTuple | catalog at: bookAmountTuple first].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:00:17' prior: 50865328!
hasCatalog: aCatalog
	^catalog = aCatalog.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:00:17' prior: 50863069!
initializeWith: anOrderedCollection
	catalog := anOrderedCollection.
	books := OrderedCollection new.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:00:17' prior: 50865467!
assertBookIsAllowed: aBook

	(catalog keys includes: aBook) ifFalse:[self error: self class errorBookNotInAllowedList.].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:01:17' prior: 50865598!
totalItemPrice
	
	^books sum: [:bookAmountTuple | catalog at: bookAmountTuple first * bookAmountTuple second].! !

!testRun: #CashierTest #test03 stamp: 'G.L.S 6/14/2021 19:01:30'!
ERROR!

!testRun: #CashierTest #test03 stamp: 'G.L.S 6/14/2021 19:01:30'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:02:09' prior: 50865623!
totalItemPrice
	
	^books sum: [:bookAmountTuple | (catalog at: bookAmountTuple first) * bookAmountTuple second].! !

!testRun: #CashierTest #test03 stamp: 'G.L.S 6/14/2021 19:02:43'!
PASSED!

!testRun: #CashierTest #test03 stamp: 'G.L.S 6/14/2021 19:04:53'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:05:57' prior: 50865539!
test03
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:06:18'!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart.
	
	self assert: 530 equals: result.! !

!methodRemoval: CashierTest #test03 stamp: 'G.L.S 6/14/2021 19:06:18'!
test03
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart.
	
	self assert: 530 equals: result.!

!classDefinition: #Cart category: 'Ejercicio-Libros' stamp: 'G.L.S 6/14/2021 19:08:23'!
Object subclass: #Cart
	instanceVariableNames: 'cartItems catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:08:23' prior: 50864571!
second
	^cartItems second.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:08:23' prior: 50864565 overrides: 16880927!
size
	^cartItems size.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:08:23' prior: 50864568!
first
	^cartItems first.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:08:24' prior: 50865609!
initializeWith: anOrderedCollection
	catalog := anOrderedCollection.
	cartItems := OrderedCollection new.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:08:24' prior: 50865635!
totalItemPrice
	
	^cartItems sum: [:bookAmountTuple | (catalog at: bookAmountTuple first) * bookAmountTuple second].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:08:24' prior: 50863625!
add: aBook amount: anAmount 
	| tuplaLibroCant |
	
	self assertBookIsAllowed: aBook.
	self assertAmountIsValid: anAmount.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: aBook.
	tuplaLibroCant add: anAmount.
	
	cartItems add: tuplaLibroCant.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:08:24' prior: 50862622!
isEmpty
	^cartItems isEmpty.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:10:40'!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:10:53' prior: 50865731!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart.
	
	self assert: 530 equals: result.! !

!classDefinition: #CreditCard category: 'Ejercicio-Libros' stamp: 'G.L.S 6/14/2021 19:12:30'!
Object subclass: #CreditCard
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:12:50' prior: 50865744!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier result creditCard |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	creditCard := CreditCard for: 'Jorge' number: '' expirationDate: ''.
	
	result := cashier checkout: cart withCreditCard: creditCard.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:13:27' prior: 50865764!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier result creditCard |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	creditCard := CreditCard for: 'Jorge' number: '000000000000' expirationDate: ''.
	
	result := cashier checkout: cart withCreditCard: creditCard.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:14:05' prior: 50865781!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier result creditCard |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	creditCard := CreditCard for: 'Jorge' number: '000000000000' expirationDate: ''.
	
	result := cashier checkout: cart.
	
	self assert: 530 equals: result.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:22:34'!
checkout: aCart withCreditCard: aCreditCard 
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	
	^aCart totalItemPrice.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:22:34' prior: 50865657!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart withCreditCard: creditCard.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:22:35' prior: 50865798!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier result creditCard |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	creditCard := CreditCard for: 'Jorge' number: '000000000000' expirationDate: ''.
	
	result := cashier checkout: cart withCreditCard: creditCard.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:22:35' prior: 50865372!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: emptyCatalog.
	
	self should: [cashier checkout: cart withCreditCard: creditCard]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:22:35' prior: 50865442!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog2.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart withCreditCard: creditCard]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !

!methodRemoval: Cashier #checkout: stamp: 'G.L.S 6/14/2021 19:22:35'!
checkout: aCart
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	
	^aCart totalItemPrice.!

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/14/2021 19:24:08'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:24:06' prior: 50865427 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := nil.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:24:23' prior: 50865853!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: emptyCatalog.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:24:31' prior: 50865868!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog2.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard ]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:24:32' prior: 50865932!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog2.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:24:39' prior: 50865822!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart withCreditCard: workingCreditCard .
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:24:40' prior: 50865966!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart withCreditCard: workingCreditCard.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:24:55' prior: 50865836!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier result creditCard |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	"creditCard := CreditCard for: 'Jorge' number: '000000000000' expirationDate: ''."
	
	result := cashier checkout: cart withCreditCard: creditCard.
	
	self assert: 530 equals: result.! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/14/2021 19:25:23'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:25:18' prior: 50865994!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier result|
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	"creditCard := CreditCard for: 'Jorge' number: '000000000000' expirationDate: ''."
	
	result := cashier checkout: cart withCreditCard: expiredCreditCard.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:25:34' prior: 50865902 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := nil.
	expiredCreditCard := nil.! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/14/2021 19:25:36'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/14/2021 19:25:39'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:26:11' prior: 50866022!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier result|
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart withCreditCard: expiredCreditCard.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:28:47' prior: 50866039 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := nil.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate today.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:28:58' prior: 50866078 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := nil.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:29:35' prior: 50866099 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.! !

FixedGregorianDate today.!

FixedGregorianDate yesterday .!

FixedGregorianDate yesterday. !

FixedGregorianDate tomorrow.!

FixedGregorianDate theBeginningOfTime .!

12/05/2021!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:32:26' prior: 50866120 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marcos' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:32:27' prior: 50866150 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:32:45' prior: 50866063!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier result|
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart withCreditCard: expiredCreditCard.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:32:52' prior: 50866198!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	cashier checkout: cart withCreditCard: expiredCreditCard.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 19:34:39' prior: 50866211!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !
!CreditCard class methodsFor: 'instance creation' stamp: 'G.L.S 6/14/2021 19:38:52'!
forOwner: aString withNumber: aString2 withExpirationDate: aFixedGregorianDate 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeForOwner: aString withNumber: aString2 withExpirationDate: aFixedGregorianDate ! !
!CreditCard class methodsFor: 'instance creation' stamp: 'G.L.S 6/14/2021 19:39:10' prior: 50866240!
forOwner: aString withNumber: aString2 withExpirationDate: aFixedGregorianDate
	^self new initializeForOwner: aString withNumber: aString2 withExpirationDate: aFixedGregorianDate ! !
!CreditCard class methodsFor: 'instance creation' stamp: 'G.L.S 6/14/2021 19:39:19' prior: 50866252!
forOwner: anOwner withNumber: aString2 withExpirationDate: aFixedGregorianDate
	^self new initializeForOwner: anOwner withNumber: aString2 withExpirationDate: aFixedGregorianDate ! !
!CreditCard class methodsFor: 'instance creation' stamp: 'G.L.S 6/14/2021 19:39:35' prior: 50866261!
forOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aFixedGregorianDate
	^self new initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aFixedGregorianDate ! !
!CreditCard class methodsFor: 'instance creation' stamp: 'G.L.S 6/14/2021 19:39:49' prior: 50866270!
forOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate
	^self new initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate ! !

!classDefinition: #CreditCard category: 'Ejercicio-Libros' stamp: 'G.L.S 6/14/2021 19:40:13'!
Object subclass: #CreditCard
	instanceVariableNames: 'owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #CreditCard category: 'Ejercicio-Libros' stamp: 'G.L.S 6/14/2021 19:40:13'!
Object subclass: #CreditCard
	instanceVariableNames: 'owner creditCardNumber'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #CreditCard category: 'Ejercicio-Libros' stamp: 'G.L.S 6/14/2021 19:40:14'!
Object subclass: #CreditCard
	instanceVariableNames: 'owner creditCardNumber date'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CreditCard methodsFor: 'initialization' stamp: 'G.L.S 6/14/2021 19:40:14'!
initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate 
	self shouldBeImplemented.
	owner := anOwner.
	creditCardNumber := aCreditCardNumber.
	date := aDate.! !
!CreditCard methodsFor: 'initialization' stamp: 'G.L.S 6/14/2021 19:40:27' prior: 50866311!
initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate 
	owner := anOwner.
	creditCardNumber := aCreditCardNumber.
	date := aDate.! !

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/14/2021 19:40:47'!
FAILURE!
!Cashier class methodsFor: 'errors' stamp: 'G.L.S 6/14/2021 19:41:47'!
errorExpiredCard
	^'Error - No se puede hacer checkout con una tarjeta de crédito vacía'.! !

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/14/2021 19:42:03'!
FAILURE!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/14/2021 19:42:03'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:47:55' prior: 50865814!
checkout: aCart withCreditCard: aCreditCard 
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	
	(aCreditCard isExpiredOn: FixedGregorianDate today) ifTrue: [].
	
	^aCart totalItemPrice.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:48:51' prior: 50866344!
checkout: aCart withCreditCard: aCreditCard 
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	
	(aCreditCard isExpiredOn: FixedGregorianDate today) ifTrue: [self error: self class errorExpiredCard].
	
	^aCart totalItemPrice.! !
!CreditCard methodsFor: 'nil' stamp: 'G.L.S 6/14/2021 19:49:09'!
isExpiredOn: aDate
! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:49:26' prior: 50866365!
isExpiredOn: aDate
	^ true.! !

!classDefinition: #CreditCard category: 'Ejercicio-Libros' stamp: 'G.L.S 6/14/2021 19:49:48'!
Object subclass: #CreditCard
	instanceVariableNames: 'owner creditCardNumber expirationDate'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CreditCard methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:49:48' prior: 50866320!
initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate 
	owner := anOwner.
	creditCardNumber := aCreditCardNumber.
	expirationDate := aDate.! !
!CreditCard methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:50:01' prior: 50866369!
isExpiredOn: aDate
	^ expirationDate < aDate.! !

FixedGregorianDate yesterday < FixedGregorianDate today.!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/14/2021 19:50:47'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:52:01'!
checkout: aCart withCreditCard: aCreditCard onDate: aDate  
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	
	(aCreditCard isExpiredOn: FixedGregorianDate today) ifTrue: [self error: self class errorExpiredCard].
	
	^aCart totalItemPrice.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:52:01' prior: 50866223!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:52:02' prior: 50865918!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: emptyCatalog.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:52:02' prior: 50865980!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:52:02' prior: 50865949!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog2.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !

!methodRemoval: Cashier #checkout:withCreditCard: stamp: 'G.L.S 6/14/2021 19:52:02'!
checkout: aCart withCreditCard: aCreditCard 
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	
	(aCreditCard isExpiredOn: FixedGregorianDate today) ifTrue: [self error: self class errorExpiredCard].
	
	^aCart totalItemPrice.!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:52:13' prior: 50866401!
checkout: aCart withCreditCard: aCreditCard onDate: aDate  
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	
	(aCreditCard isExpiredOn: aDate) ifTrue: [self error: self class errorExpiredCard].
	
	^aCart totalItemPrice.! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/14/2021 19:52:28'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/14/2021 19:52:28'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/14/2021 19:52:28'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/14/2021 19:52:28'!
PASSED!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:53:26' prior: 50866491!
checkout: aCart withCreditCard: aCreditCard onDate: aDate  
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCardHasNotExpiredOn: aDate.
	
	^aCart totalItemPrice.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:53:30' prior: 50866517!
checkout: aCart withCreditCard: aCreditCard onDate: aDate  
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCardHasNotExpiredOn: aDate.
	
	(aCreditCard isExpiredOn: aDate) ifTrue: [self error: self class errorExpiredCard].
	
	^aCart totalItemPrice.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:54:02'!
assertCard: aCreditCard HasNotExpiredOn: aDate.
	
	(aCreditCard isExpiredOn: aDate) ifTrue: [self error: self class errorExpiredCard].! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:54:14' prior: 50866527!
checkout: aCart withCreditCard: aCreditCard onDate: aDate  
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard HasNotExpiredOn: aDate.
	
	(aCreditCard isExpiredOn: aDate) ifTrue: [self error: self class errorExpiredCard].
	
	^aCart totalItemPrice.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:54:19' prior: 50866547!
checkout: aCart withCreditCard: aCreditCard onDate: aDate  
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard HasNotExpiredOn: aDate.
	
	^aCart totalItemPrice.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:54:34'!
assertCard: aCreditCard hasNotExpiredOn: aDate.
	
	(aCreditCard isExpiredOn: aDate) ifTrue: [self error: self class errorExpiredCard].! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 19:54:34' prior: 50866560!
checkout: aCart withCreditCard: aCreditCard onDate: aDate  
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	
	^aCart totalItemPrice.! !

!methodRemoval: Cashier #assertCard:HasNotExpiredOn: stamp: 'G.L.S 6/14/2021 19:54:34'!
assertCard: aCreditCard HasNotExpiredOn: aDate.
	
	(aCreditCard isExpiredOn: aDate) ifTrue: [self error: self class errorExpiredCard].!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/14/2021 19:54:47'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/14/2021 19:54:49'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/14/2021 19:54:49'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/14/2021 19:54:49'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/14/2021 19:54:49'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/14/2021 19:58:09'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/14/2021 19:58:09'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/14/2021 19:58:09'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/14/2021 19:58:09'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/14/2021 19:58:09'!
PASSED!

TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #CreditCardTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/14/2021 21:19:44'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 21:20:12'!
test01! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 21:22:25'!
test01CreditCardCannotHaveEmptyOwner
	
	self should: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today]  
		raise: Error
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorOwnerEmpty].! !

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/14/2021 21:22:32'!
FAILURE!
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 21:22:54' prior: 50866646!
test01CreditCardCannotHaveEmptyOwner
	
	self should: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorOwnerEmpty].! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 21:22:56' prior: 50866661!
test01CreditCardCannotHaveEmptyOwner
	
	self should: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorOwnerEmpty].! !

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/14/2021 21:22:57'!
FAILURE!
!CreditCard class methodsFor: 'nil' stamp: 'G.L.S 6/14/2021 21:23:40'!
errorOwnerEmpty
	^'Error - El nombre dueño de la tarjeta de crédito no puede estar vacío'! !
!CreditCard methodsFor: 'initialization' stamp: 'G.L.S 6/14/2021 21:24:13' prior: 50866382!
initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate 

	self assertNameNotEmpty: anOwner.

	owner := anOwner.
	creditCardNumber := aCreditCardNumber.
	expirationDate := aDate.! !
!CreditCard methodsFor: 'initialization' stamp: 'G.L.S 6/14/2021 21:24:30'!
assertNameNotEmpty: anOwner
	
	anOwner! !
!CreditCard methodsFor: 'initialization' stamp: 'G.L.S 6/14/2021 21:25:06' prior: 50866705!
assertNameNotEmpty: anOwner
	
	anOwner withBlanksTrimmed isEmpty ifTrue: [self error: self class errorOwnerEmpty].! !

!methodRemoval: CreditCardTest #test01 stamp: 'G.L.S 6/14/2021 21:26:36'!
test01!

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/14/2021 21:26:40'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/14/2021 21:26:40'!
PASSED!
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 21:27:27'!
test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits
	
	self should: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorOwnerEmpty].! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 21:27:54' prior: 50866726!
test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits
	
	self should: [CreditCard forOwner: 'Jorge' withNumber: ''  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorNumberFormatNotCorrect].! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 21:28:17' prior: 50866739!
test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits
	
	self should: [CreditCard forOwner: 'Jorge' withNumber: ''  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorCardNumberLessThan16Digits].! !

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/14/2021 21:28:26'!
FAILURE!
!CreditCard class methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 21:28:55'!
errorCardNumberLessThan16Digits
	^'Error - El número de la tarjeta de crédito tiene menos de 16 dígitos'! !
!CreditCard class methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 21:28:57' prior: 50866771!
errorCardNumberLessThan16Digits
	^'Error - El número de la tarjeta de crédito tiene menos de 16 dígitos'.! !
!CreditCard methodsFor: 'initialization' stamp: 'G.L.S 6/14/2021 21:30:19' prior: 50866696!
initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate 

	self assertNameNotEmpty: anOwner.
	self assertCardNumberIsCorrect: aCreditCardNumber.

	owner := anOwner.
	creditCardNumber := aCreditCardNumber.
	expirationDate := aDate.! !

'jorge' length .!

'jorge' size!
!CreditCard methodsFor: 'initialization' stamp: 'G.L.S 6/14/2021 21:31:29'!
assertCardNumberIsCorrect: aCreditCardNumber

	(aCreditCardNumber size < 16) ifTrue: [self error: self class errorCardNumberLessThan16Digits].! !

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/14/2021 21:31:36'!
PASSED!
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 21:31:50'!
test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits
	
	self should: [CreditCard forOwner: 'Jorge' withNumber: ''  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorCardNumberLessThan16Digits].! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 21:32:06' prior: 50866809!
test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits
	
	self should: [CreditCard forOwner: 'Jorge' withNumber: '00000000000000001'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorCardNumberLessThan16Digits].! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/14/2021 21:32:19' prior: 50866823!
test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits
	
	self should: [CreditCard forOwner: 'Jorge' withNumber: '00000000000000001'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorCardNumberMoreThan16Digits].! !

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/14/2021 21:32:28'!
FAILURE!
!CreditCard class methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/14/2021 21:32:51'!
errorCardNumberMoreThan16Digits
	^'Error - El número de la tarjeta de crédito tiene más de 16 dígitos'.! !
!CreditCard methodsFor: 'initialization' stamp: 'G.L.S 6/14/2021 21:35:08' prior: 50866797!
assertCardNumberIsCorrect: aCreditCardNumber

	(aCreditCardNumber size < 16) ifTrue: [self error: self class errorCardNumberLessThan16Digits].
	(aCreditCardNumber size > 16) ifTrue: [self error: self class errorCardNumberMoreThan16Digits].! !

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/14/2021 21:35:26'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/14/2021 21:35:26'!
PASSED!

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/14/2021 21:35:26'!
PASSED!

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/14/2021 21:35:26'!
PASSED!

----QUIT----(14 June 2021 21:36:35) CuisUniversity-4532.image priorSource: 17078199!

----STARTUP---- (14 June 2021 21:36:47) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!


----QUIT----(14 June 2021 21:46:54) CuisUniversity-4532.image priorSource: 17127600!

----STARTUP---- (15 June 2021 17:04:11) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!

!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 17:49:07'!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 17:53:27' prior: 50866900!
test05CashierCheckoutRegistersSale
	
	| cart cashier sales|
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 17:53:52' prior: 50866918!
test05CashierCheckoutRegistersSale
	
	| cart cashier sales|
	
	cashier := Cashier withCatalog: catalog1.
	
	sales := OrderedCollection new.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 17:54:27' prior: 50866936!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	"sales := OrderedCollection new."
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/15/2021 17:54:32'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard sales'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 17:54:31' prior: 50866955!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	sales := OrderedCollection new.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 17:54:57' prior: 50866985!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	sales := OrderedCollection new.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 17:55:35'!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook   
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	
	^aCart totalItemPrice.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 17:55:35' prior: 50866462!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog2.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 17:55:35' prior: 50866413!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today registerOn: sales.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 17:55:35' prior: 50866431!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: emptyCatalog.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 17:55:35' prior: 50866447!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 17:55:35' prior: 50867004!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	sales := OrderedCollection new.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today registerOn: sales]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !

!methodRemoval: Cashier #checkout:withCreditCard:onDate: stamp: 'G.L.S 6/15/2021 17:55:35'!
checkout: aCart withCreditCard: aCreditCard onDate: aDate  
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	
	^aCart totalItemPrice.!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 17:56:17' prior: 50867103!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	sales := OrderedCollection new.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 17:56:39' prior: 50867132!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	sales := OrderedCollection new.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales.
	
	self deny: sales isEmpty.
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 17:57:21' prior: 50867147!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	sales := OrderedCollection new.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales.
	
	self deny: sales isEmpty.
	self assert: 530 equals: (sales at: 1).! !

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/15/2021 17:57:25'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 17:58:23' prior: 50867022!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook   
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	
	aSalesBook add: aCart totalItemPrice.
	
	^aCart totalItemPrice.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 17:58:52' prior: 50867184!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook   
	
	| total |
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	
	total := aCart totalItemPrice.
	aSalesBook add: total.
	
	^total.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 17:59:02' prior: 50867196!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook   
	
	| total |
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	
	total := aCart totalItemPrice.
	aSalesBook add: total.
	
	^total.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:01:39' prior: 50866174 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:01:49' prior: 50867163!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales.
	
	self deny: sales isEmpty.
	self assert: 530 equals: (sales at: 1).! !

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/15/2021 18:01:52'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/15/2021 18:01:52'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/15/2021 18:01:52'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/15/2021 18:01:52'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/15/2021 18:01:52'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/15/2021 18:01:52'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:05:43'!
test06CashierCannotCheckoutAStolen
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today registerOn: sales.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/15/2021 18:07:18'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard sales merchantProcesor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #MockMerchantProcesor category: 'Ejercicio-Libros' stamp: 'G.L.S 6/15/2021 18:07:24'!
Object subclass: #MockMerchantProcesor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:07:17' prior: 50867222 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	merchantProcesor := MockMerchantProcesor new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:08:55' prior: 50867283!
test06CashierCannotCheckoutAStolen
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: expiredCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorStolenCard.
			]
	! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/15/2021 18:10:09'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard sales merchantProcesor stolenCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:10:07' prior: 50867321 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	merchantProcesor := MockMerchantProcesor new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:11:53'!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook forMerchantProcessor: aMerchantProcessor    
	
	| total |
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	
	total := aCart totalItemPrice.
	aSalesBook add: total.
	
	^total.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:11:53' prior: 50867347!
test06CashierCannotCheckoutAStolen
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: expiredCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales forMerchantProcessor: merchantProcessor.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorStolenCard.
			]
	! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:11:53' prior: 50867247!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales forMerchantProcessor: merchantProcessor.
	
	self deny: sales isEmpty.
	self assert: 530 equals: (sales at: 1).! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:11:53' prior: 50867052!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart withCreditCard: expiredCreditCard onDate: FixedGregorianDate today registerOn: sales forMerchantProcessor: merchantProcessor.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:11:53' prior: 50867087!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales forMerchantProcessor: merchantProcessor.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:11:53' prior: 50867033!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog2.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:11:53' prior: 50867071!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier new.
	
	cart := Cart createNewWithAllowedList: emptyCatalog.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !

!methodRemoval: Cashier #checkout:withCreditCard:onDate:registerOn: stamp: 'G.L.S 6/15/2021 18:11:53'!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook   
	
	| total |
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	
	total := aCart totalItemPrice.
	aSalesBook add: total.
	
	^total.!

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/15/2021 18:12:03'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard sales merchantProcesor stolenCreditCard merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:12:01' prior: 50867378 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	merchantProcessor := MockMerchantProcesor new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/15/2021 18:12:28'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard sales stolenCreditCard merchantProcessor'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:12:41' prior: 50867422!
test06CashierCannotCheckoutAStolen
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: expiredCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.] 
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorStolenCard.
			]
	! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:13:09'!
ERROR!
!Cashier class methodsFor: 'errors' stamp: 'G.L.S 6/15/2021 18:13:23'!
errorStolenCard
	self shouldBeImplemented.! !
!Cashier class methodsFor: 'errors' stamp: 'G.L.S 6/15/2021 18:14:00' prior: 50867626!
errorStolenCard
	^'Error - No se puede realizar una transacción con una tarjeta robada'.! !
!Cashier class methodsFor: 'errors' stamp: 'G.L.S 6/15/2021 18:14:08' prior: 50867631!
errorStolenCard
	^'Error - No se puede realizar una transacción con una tarjeta robada'.! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:14:10'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:15:15' prior: 50867408!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook forMerchantProcessor: aMerchantProcessor    
	
	| total |
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	self assertCard: aCreditCard isNotStolenFor: aMerchantProcessor.
	
	total := aCart totalItemPrice.
	aSalesBook add: total.
	
	^total.! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:15:25'!
FAILURE!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:15:25'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:15:45'!
assertCard: aCreditCard isNotStolenFor: aMerchantProcessor

	! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:16:42' prior: 50867669!
assertCard: aCreditCard isNotStolenFor: aMerchantProcessor

	(aMerchantProcessor isCardStolen: aCreditCard) ifTrue: [self error: self class errorStolenCard].! !
!MockMerchantProcesor methodsFor: 'no messages' stamp: 'G.L.S 6/15/2021 18:17:01'!
isCardStolen: aCreditCard

	! !

!classDefinition: #MockMerchantProcesor category: 'Ejercicio-Libros' stamp: 'G.L.S 6/15/2021 18:17:18'!
Object subclass: #MockMerchantProcesor
	instanceVariableNames: 'stolenCards'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!MockMerchantProcesor methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:17:16' prior: 50867682!
isCardStolen: aCreditCard

	^stolenCards includes: aCreditCard.! !
!MockMerchantProcesor methodsFor: 'nil' stamp: 'G.L.S 6/15/2021 18:17:35' overrides: 16896425!
initialize

	stolenCards := OrderedCollection new.! !
!MockMerchantProcesor methodsFor: 'nil' stamp: 'G.L.S 6/15/2021 18:18:55'!
registerStolenCard: aCreditCard! !
!MockMerchantProcesor methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/15/2021 18:19:08' prior: 50867706!
registerStolenCard: aCreditCard
	
	stolenCards add: aCreditCard.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:19:34' prior: 50867560 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: '1234567891011120'.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:20:03'!
FAILURE!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:20:03'!
FAILURE!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:20:37'!
FAILURE!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:21:33' prior: 50867603!
test06CashierCannotCheckoutAStolen
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: stolenCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.] 
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorStolenCard.
			]
	! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:21:36'!
FAILURE!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:21:36'!
FAILURE!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:21:43'!
FAILURE!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:21:43'!
FAILURE!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:22:58' prior: 50867717 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:23:04'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/15/2021 18:23:07'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/15/2021 18:23:07'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/15/2021 18:23:07'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/15/2021 18:23:07'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/15/2021 18:23:07'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:23:07'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/15/2021 18:24:48'!
test06CashierCannotCheckoutAStolenCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: stolenCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.] 
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorStolenCard.
			]
	! !

!methodRemoval: CashierTest #test06CashierCannotCheckoutAStolen stamp: 'G.L.S 6/15/2021 18:24:48'!
test06CashierCannotCheckoutAStolen
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: stolenCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.] 
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorStolenCard.
			]
	!

----QUIT----(15 June 2021 18:37:18) CuisUniversity-4532.image priorSource: 17127794!

----STARTUP---- (16 June 2021 15:52:48) as /media/Datos/Cuis/Ej-Libros/linux64/CuisUniversity-4532.image!

!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:07:12'!
test07CashierCannotCheckoutWithAFakeCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: stolenCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.] 
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorStolenCard.
			]
	! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 16:08:17'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard sales stolenCreditCard merchantProcessor fakeCreditCard'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:08:15' prior: 50867793 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:08:32' prior: 50867895!
test07CashierCannotCheckoutWithAFakeCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: fakeCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.] 
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorStolenCard.
			]
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:08:59' prior: 50867929 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:09:25' prior: 50867965!
test07CashierCannotCheckoutWithAFakeCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: fakeCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.] 
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorCardNotRegistered.
			]
	! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 16:16:25'!
FAILURE!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 16:16:25'!
FAILURE!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:17:47' prior: 50868022!
test07CashierCannotCheckoutWithAFakeCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: fakeCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.] 
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog .
			]
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:18:07' prior: 50868049!
test07CashierCannotCheckoutWithAFakeCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: fakeCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.] 
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorNotARegisteredCard.
			]
	! !
!Cashier class methodsFor: 'errors' stamp: 'G.L.S 6/16/2021 16:18:52'!
errorNotARegisteredCard
	^'Error - La tarjeta utilizada no se encuentra registrada'.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:19:04' prior: 50868070!
test07CashierCannotCheckoutWithAFakeCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: fakeCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.]
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorNotARegisteredCard.
			]
	! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 16:19:04'!
FAILURE!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:19:46' prior: 50867986 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	merchantProcessor registerCard: workingCreditCard.
	! !
!MockMerchantProcesor methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 16:20:11'!
registerCard: aCreditCard 
	self shouldBeImplemented.! !

!classDefinition: #MockMerchantProcesor category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 16:20:36'!
Object subclass: #MockMerchantProcesor
	instanceVariableNames: 'stolenCards registeredCards'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!MockMerchantProcesor methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 16:20:34' prior: 50868158!
registerCard: aCreditCard 
	registeredCards add: aCreditCard.! !
!MockMerchantProcesor methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 16:20:59' prior: 50867701 overrides: 16896425!
initialize

	stolenCards := OrderedCollection new.
	registeredCards := OrderedCollection new.! !
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 16:22:02' prior: 50867647!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook forMerchantProcessor: aMerchantProcessor    
	
	| total |
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	self assertCard: aCreditCard isNotStolenFor: aMerchantProcessor.
	self assertCard: aCreditCard isRegisteredOn: aMerchantProcessor.
	
	total := aCart totalItemPrice.
	aSalesBook add: total.
	
	^total.! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 16:22:12'!
FAILURE!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 16:22:12'!
FAILURE!
!Cashier methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 16:23:13'!
assertCard: aCreditCard isRegisteredOn: aMerchantProcessor
	(aMerchantProcessor isCardRegistered: aCreditCard) ifFalse: [self error: self class errorNotARegisteredCard].! !
!MockMerchantProcesor methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 16:23:39'!
isCardRegistered: aCreditCard
	^registeredCards includes: aCreditCard.! !
!Cashier methodsFor: 'private' stamp: 'G.L.S 6/16/2021 16:25:06' prior: 50868209!
assertCard: aCreditCard isRegisteredOn: aMerchantProcessor
	
	(aMerchantProcessor isCardRegistered: aCreditCard) ifFalse: [self error: self class errorNotARegisteredCard].! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 16:25:18'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 16:25:21'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 16:25:21'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 16:25:21'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 16:25:21'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 16:25:21'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 16:25:21'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 16:25:21'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 16:26:37'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:40:18'!
test08CashierCannotCheckoutWithACardWithoutMoney
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: fakeCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.]
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorNotARegisteredCard.
			]
	! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 16:44:48'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard sales stolenCreditCard merchantProcessor fakeCreditCard creditCardWithoutMoney'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:44:42' prior: 50868120 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	creditCardWithoutMoney := CreditCard  forOwner: 'Ivan' withNumber: '1200000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	merchantProcessor registerCard: workingCreditCard.
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:45:00' prior: 50868262!
test08CashierCannotCheckoutWithACardWithoutMoney
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: creditCardWithoutMoney 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.]
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorNotARegisteredCard.
			]
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 16:52:09' prior: 50868339!
test08CashierCannotCheckoutWithACardWithoutMoney
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: creditCardWithoutMoney 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.]
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorCardDoesNotHaveEnoughMoney.
			]
	! !
!Cashier class methodsFor: 'errors' stamp: 'G.L.S 6/16/2021 16:53:01'!
errorCardDoesNotHaveEnoughMoney

	^'Error - La tarjeta de crédito no tiene suficiente saldo'.! !

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 16:53:18'!
FAILURE!
!Cashier methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 16:55:17' prior: 50868184!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook forMerchantProcessor: aMerchantProcessor    
	
	| total |
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	self assertCard: aCreditCard isNotStolenFor: aMerchantProcessor.
	self assertCard: aCreditCard isRegisteredOn: aMerchantProcessor.
	self assertCard: aCreditCard hasEnoughMoneyOn: aMerchantProcessor.
	
	total := aCart totalItemPrice.
	aSalesBook add: total.
	
	^total.! !
!Cashier methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 17:02:31' prior: 50868391!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook forMerchantProcessor: aMerchantProcessor    
	
	| total |
	
	self assertCartIsNotEmpty: aCart.
	self assertCartHasTheSameCatalog: aCart.
	self assertCard: aCreditCard hasNotExpiredOn: aDate.
	self assertCard: aCreditCard isNotStolenFor: aMerchantProcessor.
	self assertCard: aCreditCard isRegisteredOn: aMerchantProcessor.
	
	total := aCart totalItemPrice.
	
	self assertCard: aCreditCard canSpend: total on: aMerchantProcessor.
	
	aSalesBook add: total.
	
	^total.! !
!MockMerchantProcesor methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 17:03:49'!
registerCard: aCreditCard withBalance: aBalance  
	registeredCards add: aCreditCard.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 17:03:49' prior: 50868297 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	creditCardWithoutMoney := CreditCard  forOwner: 'Ivan' withNumber: '1200000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	merchantProcessor registerCard: workingCreditCard withBalance: 1000.
	! !

!methodRemoval: MockMerchantProcesor #registerCard: stamp: 'G.L.S 6/16/2021 17:03:49'!
registerCard: aCreditCard 
	registeredCards add: aCreditCard.!
!MockMerchantProcesor methodsFor: 'initialization' stamp: 'G.L.S 6/16/2021 17:04:23' prior: 50868178 overrides: 16896425!
initialize

	stolenCards := OrderedCollection new.
	registeredCards := Dictionary new.! !
!MockMerchantProcesor methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 17:04:41' prior: 50868431!
registerCard: aCreditCard withBalance: aBalance  
	registeredCards at: aCreditCard -> aBalance.! !
!MockMerchantProcesor methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 17:04:50' prior: 50868492!
registerCard: aCreditCard withBalance: aBalance  
	registeredCards add: aCreditCard -> aBalance.! !

pepe _ Dictionary new.!

pepe add: 'jorge' -> 2324254.!

pepe at: 'jorge'.!

 2324254 !

 2324254 !

 2324254 !
!MockMerchantProcesor methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 17:05:25' prior: 50868217!
isCardRegistered: aCreditCard
	^registeredCards keys includes: aCreditCard.! !
!Cashier methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 17:06:00'!
assertCard: aCreditCard canSpend: aTotal on: aMerchantProcessor! !
!Cashier methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 17:06:50' prior: 50868514!
assertCard: aCreditCard canSpend: aTotal on: aMerchantProcessor
	
	(aMerchantProcessor can: aCreditCard spend: aTotal) ifFalse: [self error: self class errorCardDoesNotHaveEnoughMoney]! !
!Cashier class methodsFor: 'errors' stamp: 'G.L.S 6/16/2021 17:07:06'!
errorCardDoesNotHaveEnoughBalance

	^'Error - La tarjeta de crédito no tiene suficiente saldo'.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 17:07:06' prior: 50868360!
test08CashierCannotCheckoutWithACardWithoutMoney
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: creditCardWithoutMoney 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.]
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorCardDoesNotHaveEnoughBalance.
			]
	! !

!methodRemoval: Cashier class #errorCardDoesNotHaveEnoughMoney stamp: 'G.L.S 6/16/2021 17:07:06'!
errorCardDoesNotHaveEnoughMoney

	^'Error - La tarjeta de crédito no tiene suficiente saldo'.!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:07:19'!
FAILURE!
!MockMerchantProcesor methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 17:08:12'!
can: aCreditCard spend: aTotal

	^ (registeredCards at:aCreditCard) >= aTotal.! !

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:08:33'!
FAILURE!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:08:33'!
FAILURE!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:08:38'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 17:08:38'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 17:08:38'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 17:08:38'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 17:08:38'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 17:08:38'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 17:08:38'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:08:38'!
FAILURE!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:08:38'!
FAILURE!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:08:43'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 17:08:43'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 17:08:43'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 17:08:43'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 17:08:43'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 17:08:43'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 17:08:43'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:08:43'!
FAILURE!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:08:43'!
FAILURE!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:09:26' prior: 50868438 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	creditCardWithoutMoney := CreditCard  forOwner: 'Ivan' withNumber: '1200000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	merchantProcessor registerCard: workingCreditCard withBalance: 1000.
	merchantProcessor registerCard: creditCardWithoutMoney withBalance: 0.	! !

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:09:29'!
FAILURE!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:09:29'!
FAILURE!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:09:43'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 17:09:43'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 17:09:43'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 17:09:43'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 17:09:43'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 17:09:43'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 17:09:43'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:09:43'!
FAILURE!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:09:43'!
FAILURE!

(registeredCards at:aCreditCard) >= aTotal!
!Cashier methodsFor: 'operations' stamp: 'G.L.S 6/16/2021 17:21:01' prior: 50868519!
assertCard: aCreditCard canSpend: aTotal on: aMerchantProcessor
	
	(aMerchantProcessor can: aCreditCard spend: aTotal) ifFalse: [self error: self class errorCardDoesNotHaveEnoughBalance]! !

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:21:03'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:21:06'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:21:10'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 17:21:10'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 17:21:10'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 17:21:10'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 17:21:10'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 17:21:10'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 17:21:10'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:21:10'!
PASSED!
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:30:56'!
testCreditCardFail: aBlockToFail withErrorMessage: anErrorMessage
	
	self should: [CreditCard forOwner: 'Jorge' withNumber: '00000000000000001'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorCardNumberMoreThan16Digits].! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:31:24' prior: 50868774!
testCreditCardFail: aBlockToFail withErrorMessage: anErrorMessage
	
	self should: aBlockToFail 
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = anErrorMessage].! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:31:36' prior: 50868788!
testCreditCardFail: aBlockToFail withErrorMessage: anErrorMessage
	
	self should: aBlockToFail 
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = anErrorMessage].! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:32:12' prior: 50866674!
test01CreditCardCannotHaveEmptyOwner
	
	self should: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorOwnerEmpty].
	
	self testCreditCardFail: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today] 
		withErrorMessage: CreditCard errorOwnerEmpty.! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:32:23' prior: 50868808!
test01CreditCardCannotHaveEmptyOwner
	
	"self should: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorOwnerEmpty]."
		
	self testCreditCardFail: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today] 
		withErrorMessage: CreditCard errorOwnerEmpty.! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:32:25' prior: 50868826!
test01CreditCardCannotHaveEmptyOwner
	
	"self should: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorOwnerEmpty]."
	
	self testCreditCardFail: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today] 
		withErrorMessage: CreditCard errorOwnerEmpty.! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:32:31' prior: 50868844!
test01CreditCardCannotHaveEmptyOwner
	
	"self should: [CreditCard forOwner: '' withNumber: '0000000000000000'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorOwnerEmpty]."
	
	self testCreditCardFail: [CreditCard forOwner: '' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate today] 
		withErrorMessage: CreditCard errorOwnerEmpty.! !

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/16/2021 17:32:33'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/16/2021 17:32:33'!
PASSED!

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/16/2021 17:32:33'!
PASSED!

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/16/2021 17:32:33'!
PASSED!
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:32:43' prior: 50868862!
test01CreditCardCannotHaveEmptyOwner
	
	self testCreditCardFail: [CreditCard forOwner: '' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate today] 
		withErrorMessage: CreditCard errorOwnerEmpty.! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:33:28' prior: 50866753!
test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits
	
	self testCreditCardFail: [CreditCard forOwner: 'Jorge' withNumber: ''  withExpirationDate: FixedGregorianDate today] 
		 withErrorMessage: CreditCard errorCardNumberLessThan16Digits! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:33:30' prior: 50868905!
test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits
	
	self testCreditCardFail: [CreditCard forOwner: 'Jorge' withNumber: ''  withExpirationDate: FixedGregorianDate today] 
		 withErrorMessage: CreditCard errorCardNumberLessThan16Digits.! !

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/16/2021 17:33:33'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/16/2021 17:33:33'!
PASSED!

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/16/2021 17:33:33'!
PASSED!

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/16/2021 17:33:33'!
PASSED!
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:34:40' prior: 50866837!
test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits
	
	"self should: [CreditCard forOwner: 'Jorge' withNumber: '00000000000000001'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorCardNumberMoreThan16Digits]."
		
	self testCreditCardFail: [CreditCard forOwner: 'Jorge' withNumber: '00000000000000001'  withExpirationDate: FixedGregorianDate today]
		withErrorMessage: CreditCard errorCardNumberMoreThan16Digits ! !
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:34:42' prior: 50868943!
test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits
	
	"self should: [CreditCard forOwner: 'Jorge' withNumber: '00000000000000001'  withExpirationDate: FixedGregorianDate today]  
		raise: Error - MessageNotUnderstood
		withExceptionDo: [
			:anError |
			self assert: anError messageText = CreditCard errorCardNumberMoreThan16Digits]."
		
	self testCreditCardFail: [CreditCard forOwner: 'Jorge' withNumber: '00000000000000001'  withExpirationDate: FixedGregorianDate today]
		withErrorMessage: CreditCard errorCardNumberMoreThan16Digits.! !

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/16/2021 17:34:43'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/16/2021 17:34:43'!
PASSED!

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/16/2021 17:34:43'!
PASSED!

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/16/2021 17:34:43'!
PASSED!
!CreditCardTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:34:49' prior: 50868964!
test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits
	
	self testCreditCardFail: [CreditCard forOwner: 'Jorge' withNumber: '00000000000000001'  withExpirationDate: FixedGregorianDate today]
		withErrorMessage: CreditCard errorCardNumberMoreThan16Digits.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:44:32' prior: 50867517!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier withCatalog: emptyCatalog .
	
	cart := Cart createNewWithAllowedList: emptyCatalog.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:44:33' prior: 50869012!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier withCatalog: emptyCatalog.
	
	cart := Cart createNewWithAllowedList: emptyCatalog.
	
	self should: [cashier checkout: cart withCreditCard: workingCreditCard onDate: FixedGregorianDate today registerOn: sales forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:44:33'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:44:33'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 17:44:33'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 17:44:33'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 17:44:33'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 17:44:33'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 17:44:33'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 17:44:33'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:44:33'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:45:46' prior: 50869030!
test01CashierCannotCheckoutWithAnEmptyCart
	
	| cart cashier |
	
	cashier := Cashier withCatalog: emptyCatalog.
	
	cart := Cart createNewWithAllowedList: emptyCatalog.
	
	self should: [cashier checkout: cart 
					withCreditCard: workingCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:46:03' prior: 50867497!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog2.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart 
					withCreditCard: workingCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:46:45' prior: 50867480!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart 
				withCreditCard: workingCreditCard 
				onDate: FixedGregorianDate today 
				registerOn: sales 
				forMerchantProcessor: merchantProcessor.
	
	self assert: 530 equals: result.! !

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 17:46:47'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:46:47'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 17:46:47'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 17:46:47'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 17:46:47'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 17:46:47'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 17:46:47'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 17:46:47'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:46:47'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:47:04' prior: 50867460!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: expiredCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:47:28' prior: 50867442!
test05CashierCheckoutRegistersSale
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	cashier checkout: cart 
		withCreditCard: workingCreditCard 
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
	
	self deny: sales isEmpty.
	self assert: 530 equals: (sales at: 1).! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:53:12'!
testCashierWithCatalog: aCatalog cannotCheckoutWithCart: aCart withCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard ThrowingError: anErrorMessage
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	self should: [cashier checkout: cart 
					withCreditCard: aCreditCard
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = anErrorMessage.
			].! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:54:37' prior: 50869206!
testCashierWithCatalog: aCatalog cannotCheckoutWithCart: aCart withCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard ThrowingError: anErrorMessage
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem)].
	
	self should: [cashier checkout: cart 
					withCreditCard: aCreditCard
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = anErrorMessage.
			].! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 17:55:03'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard sales stolenCreditCard merchantProcessor fakeCreditCard creditCardWithoutMoney listToAdd'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:55:02' prior: 50868644 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	listToAdd := Dictionary new.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	creditCardWithoutMoney := CreditCard  forOwner: 'Ivan' withNumber: '1200000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	merchantProcessor registerCard: workingCreditCard withBalance: 1000.
	merchantProcessor registerCard: creditCardWithoutMoney withBalance: 0.	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:55:17' prior: 50869268 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	listToAdd := Dictionary new.
	listToAdd add: smalltalk80 -> 3.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	creditCardWithoutMoney := CreditCard  forOwner: 'Ivan' withNumber: '1200000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	merchantProcessor registerCard: workingCreditCard withBalance: 1000.
	merchantProcessor registerCard: creditCardWithoutMoney withBalance: 0.	! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 17:55:44'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard sales stolenCreditCard merchantProcessor fakeCreditCard creditCardWithoutMoney listToAdd emptyListToAdd'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:55:42' prior: 50869314 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	emptyListToAdd := Dictionary new.
	
	listToAdd := Dictionary new.
	listToAdd add: smalltalk80 -> 3.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	creditCardWithoutMoney := CreditCard  forOwner: 'Ivan' withNumber: '1200000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	merchantProcessor registerCard: workingCreditCard withBalance: 1000.
	merchantProcessor registerCard: creditCardWithoutMoney withBalance: 0.	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:57:21'!
testCashierWithCatalog: aCatalog cannotCheckoutWithCartwithCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard ThrowingError: anErrorMessage
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem)].
	
	self should: [cashier checkout: cart 
					withCreditCard: aCreditCard
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = anErrorMessage.
			].! !

!methodRemoval: CashierTest #testCashierWithCatalog:cannotCheckoutWithCart:withCatalog:withItems:withCreditCard:ThrowingError: stamp: 'G.L.S 6/16/2021 17:57:28'!
testCashierWithCatalog: aCatalog cannotCheckoutWithCart: aCart withCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard ThrowingError: anErrorMessage
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem)].
	
	self should: [cashier checkout: cart 
					withCreditCard: aCreditCard
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = anErrorMessage.
			].!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:58:33' prior: 50869080!
test01CashierCannotCheckoutWithAnEmptyCart
	
	"| cart cashier |
	
	cashier := Cashier withCatalog: emptyCatalog.
	
	cart := Cart createNewWithAllowedList: emptyCatalog.
	
	self should: [cashier checkout: cart 
					withCreditCard: workingCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutEmptyCart.
			]."
		
	self testCashierWithCatalog: emptyCatalog 
		cannotCheckoutWithCartwithCatalog: emptyCatalog 
		withItems: emptyListToAdd 
		withCreditCard: workingCreditCard 
		ThrowingError: Cashier errorCannotCheckoutEmptyCart.! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:58:34'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:58:34'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 17:58:34'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 17:58:34'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 17:58:34'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 17:58:34'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 17:58:34'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 17:58:34'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:58:34'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 17:58:57' prior: 50869476!
test01CashierCannotCheckoutWithAnEmptyCart
		
	self testCashierWithCatalog: emptyCatalog 
		cannotCheckoutWithCartwithCatalog: emptyCatalog 
		withItems: emptyListToAdd 
		withCreditCard: workingCreditCard 
		ThrowingError: Cashier errorCannotCheckoutEmptyCart.! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:58:58'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 17:58:58'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 17:58:58'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 17:58:58'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 17:58:58'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 17:58:58'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 17:58:58'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 17:58:58'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 17:58:58'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:00:37' prior: 50869099!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	"| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog2.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart 
					withCreditCard: workingCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			]."
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog2 
		withItems: ''
		withCreditCard:  '' 
		ThrowingError: Cashier errorCannotCheckoutACartWithADifferentCatalog! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:00:56' prior: 50869376 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	emptyListToAdd := Dictionary new.
	
	listToAdd := Dictionary new.
	listToAdd add: donQuixote -> 1.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	creditCardWithoutMoney := CreditCard  forOwner: 'Ivan' withNumber: '1200000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	merchantProcessor registerCard: workingCreditCard withBalance: 1000.
	merchantProcessor registerCard: creditCardWithoutMoney withBalance: 0.	! !

!classDefinition: #CashierTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 18:01:26'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking catalog1 emptyCatalog catalog2 donQuixote workingCreditCard expiredCreditCard sales stolenCreditCard merchantProcessor fakeCreditCard creditCardWithoutMoney listToAdd emptyListToAdd listToAdd2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:01:24' prior: 50869603 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	emptyListToAdd := Dictionary new.
	
	listToAdd := Dictionary new.
	listToAdd add: donQuixote -> 1.
	
	listToAdd2 := Dictionary new.
	listToAdd2 add: smalltalk80 -> 3.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	creditCardWithoutMoney := CreditCard  forOwner: 'Ivan' withNumber: '1200000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	merchantProcessor registerCard: workingCreditCard withBalance: 1000.
	merchantProcessor registerCard: creditCardWithoutMoney withBalance: 0.	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:01:46' prior: 50869576!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
	
	"| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog2.
	cart add: donQuixote.
	
	self should: [cashier checkout: cart 
					withCreditCard: workingCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = Cashier errorCannotCheckoutACartWithADifferentCatalog.
			]."
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog2 
		withItems: listToAdd 
		withCreditCard:  workingCreditCard 
		ThrowingError: Cashier errorCannotCheckoutACartWithADifferentCatalog! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:01:47'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:01:47'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:01:47'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:01:47'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:01:47'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:01:47'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:01:47'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:01:47'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:01:47'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:01:54' prior: 50869716!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog2 
		withItems: listToAdd 
		withCreditCard:  workingCreditCard 
		ThrowingError: Cashier errorCannotCheckoutACartWithADifferentCatalog! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:03:56' prior: 50869169!
test04CashierCannotCheckOutWithAnExpiredCard
	
	| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: expiredCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			].
	
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2  
		withCreditCard: expiredCreditCard 
		ThrowingError: Cashier errorExpiredCard.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:04:03' prior: 50869788!
test04CashierCannotCheckOutWithAnExpiredCard
	
	"| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: expiredCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.]  
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorExpiredCard.
			]."
	
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2  
		withCreditCard: expiredCreditCard 
		ThrowingError: Cashier errorExpiredCard.! !

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:04:08'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:04:08'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:04:08'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:04:08'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:04:08'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:04:08'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:04:08'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:04:08'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:04:08'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:04:23' prior: 50869666 overrides: 16927572!
setUp
	
	sales := OrderedCollection new.
	
	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.
	
	emptyListToAdd := Dictionary new.
	
	listToAdd := Dictionary new.
	listToAdd add: donQuixote -> 1.
	
	listToAdd2 := Dictionary new.
	listToAdd2 add: smalltalk80 -> 3.
	listToAdd2 add: designPatterns -> 5.
	
	workingCreditCard := CreditCard forOwner: 'Marco' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	expiredCreditCard := CreditCard forOwner: 'Jorge' withNumber: '0000000000000000' withExpirationDate: FixedGregorianDate yesterday.
	stolenCreditCard := CreditCard forOwner: 'Gervasio' withNumber: '1234567891011120' withExpirationDate: FixedGregorianDate tomorrow.
	fakeCreditCard := CreditCard  forOwner: 'Pepe' withNumber: '1000000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	creditCardWithoutMoney := CreditCard  forOwner: 'Ivan' withNumber: '1200000000000000' withExpirationDate: FixedGregorianDate tomorrow.
	
	merchantProcessor := MockMerchantProcesor new.
	merchantProcessor registerStolenCard: stolenCreditCard.
	merchantProcessor registerCard: workingCreditCard withBalance: 1000.
	merchantProcessor registerCard: creditCardWithoutMoney withBalance: 0.	! !

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:04:30'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:04:30'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:04:30'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:04:30'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:04:30'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:04:30'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:04:30'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:04:30'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:04:30'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:04:36' prior: 50869814!
test04CashierCannotCheckOutWithAnExpiredCard
	
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2  
		withCreditCard: expiredCreditCard 
		ThrowingError: Cashier errorExpiredCard.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:05:45' prior: 50867849!
test06CashierCannotCheckoutAStolenCard
	
	"| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: stolenCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.] 
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorStolenCard.
			]"
	
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: stolenCreditCard 
		ThrowingError: Cashier errorStolenCard.! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:05:51'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:05:51'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:05:51'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:05:51'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:05:51'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:05:51'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:05:51'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:05:51'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:05:51'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:05:59' prior: 50869967!
test06CashierCannotCheckoutAStolenCard
	
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: stolenCreditCard 
		ThrowingError: Cashier errorStolenCard.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:06:32' prior: 50868096!
test07CashierCannotCheckoutWithAFakeCard
	
	"| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: fakeCreditCard 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.]
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorNotARegisteredCard.
			]"
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: fakeCreditCard 
		ThrowingError: Cashier errorNotARegisteredCard .
	! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:06:35'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:06:35'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:06:35'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:06:35'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:06:35'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:06:35'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:06:35'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:06:35'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:06:35'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:06:41' prior: 50870035!
test07CashierCannotCheckoutWithAFakeCard
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: fakeCreditCard 
		ThrowingError: Cashier errorNotARegisteredCard .
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:06:53' prior: 50870093!
test07CashierCannotCheckoutWithAFakeCard
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: fakeCreditCard 
		ThrowingError: Cashier errorStolenCard .
	! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:06:54'!
FAILURE!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:06:59' prior: 50870104!
test07CashierCannotCheckoutWithAFakeCard
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: fakeCreditCard 
		ThrowingError: Cashier errorNotARegisteredCard .
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:07:00' prior: 50870118!
test07CashierCannotCheckoutWithAFakeCard
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: fakeCreditCard 
		ThrowingError: Cashier errorNotARegisteredCard.
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:07:03' prior: 50870129!
test07CashierCannotCheckoutWithAFakeCard
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: fakeCreditCard 
		ThrowingError: Cashier errorNotARegisteredCard.
	! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:07:03'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:07:03'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:07:03'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:07:03'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:07:03'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:07:03'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:07:03'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:07:03'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:07:03'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:07:54' prior: 50868535!
test08CashierCannotCheckoutWithACardWithoutMoney
	
	"| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	self should: [cashier checkout: cart 
					withCreditCard: creditCardWithoutMoney 
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor.]
		raise: Error 
		withExceptionDo: [
			:anError |
			self assert: anError messageText = Cashier errorCardDoesNotHaveEnoughBalance.
			]."
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: creditCardWithoutMoney 
		ThrowingError: Cashier errorCardDoesNotHaveEnoughBalance .
	! !

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:07:56'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:07:56'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:07:56'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:07:56'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:07:56'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:07:56'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:07:56'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:07:56'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:07:56'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:08:04' prior: 50870182!
test08CashierCannotCheckoutWithACardWithoutMoney
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutWithCartwithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: creditCardWithoutMoney 
		ThrowingError: Cashier errorCardDoesNotHaveEnoughBalance.
	! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:08:57'!
testCashierWithCatalog: aCatalog cannotCheckoutWithCartwithCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard Asserting: anAssertionBlock
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem)].
	
	cashier checkout: cart 
			withCreditCard: aCreditCard
			onDate: FixedGregorianDate today 
			registerOn: sales 
			forMerchantProcessor: merchantProcessor! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:09:02' prior: 50870253!
testCashierWithCatalog: aCatalog cannotCheckoutWithCartwithCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard Asserting: anAssertionBlock
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem)].
	
	cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:09:40' prior: 50870274!
testCashierWithCatalog: aCatalog cannotCheckoutWithCartwithCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard Asserting: anAssertionBlock
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem).].
	
	cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:10:04' prior: 50870295!
testCashierWithCatalog: aCatalog cannotCheckoutWithCartwithCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard Asserting: anAssertionBlock
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem).].
	
	cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:10:34' prior: 50870316!
testCashierWithCatalog: aCatalog cannotCheckoutWithCartwithCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard Asserting: anAssertionBlock
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem).].
	
	cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
		
	anAssertionBlock value.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:11:38' prior: 50869120!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart 
				withCreditCard: workingCreditCard 
				onDate: FixedGregorianDate today 
				registerOn: sales 
				forMerchantProcessor: merchantProcessor.
	
	self assert: 530 equals: result.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:12:43'!
testCashierWithCatalog: aCatalog checkoutCartWithItems: aListOfItemsAndAmounts withCreditCard: aCreditCard Asserting: anAssertionBlock
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCatalog.
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem).].
	
	cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
		
	anAssertionBlock value.! !

!methodRemoval: CashierTest #testCashierWithCatalog:cannotCheckoutWithCartwithCatalog:withItems:withCreditCard:Asserting: stamp: 'G.L.S 6/16/2021 18:12:50'!
testCashierWithCatalog: aCatalog cannotCheckoutWithCartwithCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard Asserting: anAssertionBlock
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem).].
	
	cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
		
	anAssertionBlock value.!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:13:22'!
testCashierWithCatalog: aCatalog cannotCheckoutCartWithCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard ThrowingError: anErrorMessage
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem)].
	
	self should: [cashier checkout: cart 
					withCreditCard: aCreditCard
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = anErrorMessage.
			].! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:13:22' prior: 50870140!
test07CashierCannotCheckoutWithAFakeCard
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutCartWithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: fakeCreditCard 
		ThrowingError: Cashier errorNotARegisteredCard.
	! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:13:22' prior: 50870025!
test06CashierCannotCheckoutAStolenCard
	
	self testCashierWithCatalog: catalog1 
		cannotCheckoutCartWithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: stolenCreditCard 
		ThrowingError: Cashier errorStolenCard.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:13:22' prior: 50870242!
test08CashierCannotCheckoutWithACardWithoutMoney
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutCartWithCatalog: catalog1 
		withItems: listToAdd2 
		withCreditCard: creditCardWithoutMoney 
		ThrowingError: Cashier errorCardDoesNotHaveEnoughBalance.
	! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:13:22' prior: 50869533!
test01CashierCannotCheckoutWithAnEmptyCart
		
	self testCashierWithCatalog: emptyCatalog 
		cannotCheckoutCartWithCatalog: emptyCatalog 
		withItems: emptyListToAdd 
		withCreditCard: workingCreditCard 
		ThrowingError: Cashier errorCannotCheckoutEmptyCart.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:13:22' prior: 50869776!
test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog
		
	self testCashierWithCatalog: catalog1 
		cannotCheckoutCartWithCatalog: catalog2 
		withItems: listToAdd 
		withCreditCard:  workingCreditCard 
		ThrowingError: Cashier errorCannotCheckoutACartWithADifferentCatalog! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:13:22' prior: 50869956!
test04CashierCannotCheckOutWithAnExpiredCard
	
	self testCashierWithCatalog: catalog1 
		cannotCheckoutCartWithCatalog: catalog1 
		withItems: listToAdd2  
		withCreditCard: expiredCreditCard 
		ThrowingError: Cashier errorExpiredCard.! !

!methodRemoval: CashierTest #testCashierWithCatalog:cannotCheckoutWithCartwithCatalog:withItems:withCreditCard:ThrowingError: stamp: 'G.L.S 6/16/2021 18:13:22'!
testCashierWithCatalog: aCatalog cannotCheckoutWithCartwithCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard ThrowingError: anErrorMessage
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem)].
	
	self should: [cashier checkout: cart 
					withCreditCard: aCreditCard
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = anErrorMessage.
			].!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:13:29'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:13:31'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:13:31'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:13:31'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:13:31'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:13:31'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:13:31'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:13:31'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:13:31'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:14:14' prior: 50870359!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart 
				withCreditCard: workingCreditCard 
				onDate: FixedGregorianDate today 
				registerOn: sales 
				forMerchantProcessor: merchantProcessor.
	
	self assert: 530 equals: result.
	
	self testCashierWithCatalog: catalog1 
		checkoutCartWithItems: listToAdd2 
		withCreditCard: workingCreditCard 
		Asserting: [self assert: 530 equals: result.]! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:14:52' prior: 50870572!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	"cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart 
				withCreditCard: workingCreditCard 
				onDate: FixedGregorianDate today 
				registerOn: sales 
				forMerchantProcessor: merchantProcessor.
	
	self assert: 530 equals: result."
	
	self testCashierWithCatalog: catalog1 
		checkoutCartWithItems: listToAdd2 
		withCreditCard: workingCreditCard 
		Asserting: [self assert: 530 equals: result.]! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:15:20' prior: 50870376!
testCashierWithCatalog: aCatalog checkoutCartWithItems: aListOfItemsAndAmounts withCreditCard: aCreditCard Asserting: anAssertionBlock
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCatalog.
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem).].
	
	result := cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
		
	anAssertionBlock value.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:15:27' prior: 50870617!
testCashierWithCatalog: aCatalog checkoutCartWithItems: aListOfItemsAndAmounts withCreditCard: aCreditCard Asserting: anAssertionBlock
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCatalog.
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem).].
	
	result := cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
		
	anAssertionBlock value: result.! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:15:45' prior: 50870594!
test03CheckoutReturnsTheRightAmount
	
	| cart cashier result |
	
	"cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart 
				withCreditCard: workingCreditCard 
				onDate: FixedGregorianDate today 
				registerOn: sales 
				forMerchantProcessor: merchantProcessor.
	
	self assert: 530 equals: result."
	
	self testCashierWithCatalog: catalog1 
		checkoutCartWithItems: listToAdd2 
		withCreditCard: workingCreditCard 
		Asserting: [:aResult | self assert: 530 equals: aResult.]! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:15:54' prior: 50870659!
test03CheckoutReturnsTheRightAmount
	
	"| cart cashier result |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	result := cashier checkout: cart 
				withCreditCard: workingCreditCard 
				onDate: FixedGregorianDate today 
				registerOn: sales 
				forMerchantProcessor: merchantProcessor.
	
	self assert: 530 equals: result."
	
	self testCashierWithCatalog: catalog1 
		checkoutCartWithItems: listToAdd2 
		withCreditCard: workingCreditCard 
		Asserting: [:aResult | self assert: 530 equals: aResult.]! !

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:15:56'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:15:56'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:15:56'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:15:56'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:15:56'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:15:56'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:15:56'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:15:56'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:15:56'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:16:03' prior: 50870682!
test03CheckoutReturnsTheRightAmount
	
	self testCashierWithCatalog: catalog1 
		checkoutCartWithItems: listToAdd2 
		withCreditCard: workingCreditCard 
		Asserting: [:aResult | self assert: 530 equals: aResult.]! !
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:17:35' prior: 50869189!
test05CashierCheckoutRegistersSale
	
	"| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	cashier checkout: cart 
		withCreditCard: workingCreditCard 
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
	
	self deny: sales isEmpty.
	self assert: 530 equals: (sales at: 1)."
	
	self testCashierWithCatalog: catalog1 
	 	checkoutCartWithItems: listToAdd2 
		withCreditCard: workingCreditCard 
		Asserting: [:aResult | self deny: sales isEmpty.
						self assert: 530 equals: (sales at: 1)].! !

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:17:44'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:17:44'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:17:44'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:17:44'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:17:44'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:17:44'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:17:44'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:17:44'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:17:44'!
PASSED!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:18:05'!
testCashierWithCatalog: aCatalog checkoutCartWithItems: aListOfItemsAndAmounts withCreditCard: aCreditCard asserting: anAssertionBlock
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCatalog.
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem).].
	
	result := cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
		
	anAssertionBlock value: result.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:18:05' prior: 50870736!
test03CheckoutReturnsTheRightAmount
	
	self testCashierWithCatalog: catalog1 
		checkoutCartWithItems: listToAdd2 
		withCreditCard: workingCreditCard 
		asserting: [:aResult | self assert: 530 equals: aResult.]! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:18:05' prior: 50870746!
test05CashierCheckoutRegistersSale
	
	"| cart cashier |
	
	cashier := Cashier withCatalog: catalog1.
	
	cart := Cart createNewWithAllowedList: catalog1 .
	cart add: smalltalk80 amount: 3.
	cart add: designPatterns amount: 5.
	
	cashier checkout: cart 
		withCreditCard: workingCreditCard 
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
	
	self deny: sales isEmpty.
	self assert: 530 equals: (sales at: 1)."
	
	self testCashierWithCatalog: catalog1 
	 	checkoutCartWithItems: listToAdd2 
		withCreditCard: workingCreditCard 
		asserting: [:aResult | self deny: sales isEmpty.
						self assert: 530 equals: (sales at: 1)].! !

!methodRemoval: CashierTest #testCashierWithCatalog:checkoutCartWithItems:withCreditCard:Asserting: stamp: 'G.L.S 6/16/2021 18:18:05'!
testCashierWithCatalog: aCatalog checkoutCartWithItems: aListOfItemsAndAmounts withCreditCard: aCreditCard Asserting: anAssertionBlock
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithAllowedList: aCatalog.
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem).].
	
	result := cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
		
	anAssertionBlock value: result.!
!CashierTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:19:13' prior: 50870832!
test05CashierCheckoutRegistersSale
	
	self testCashierWithCatalog: catalog1 
	 	checkoutCartWithItems: listToAdd2 
		withCreditCard: workingCreditCard 
		asserting: [:aResult | self deny: sales isEmpty.
						self assert: 530 equals: (sales at: 1)].! !
!Behavior method!
forOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate
	^ [
	([
	(self coverAll:
		{77 to: 80}) new ] valueCoveringAll:
		{82 to: 84})
		initializeForOwner:
			(anOwner
				cover: (106 to: 112)
				declaredAt: (11 to: 17))
		withNumber:
			(aCreditCardNumber
				cover: (126 to: 142)
				declaredAt: (31 to: 47))
		withExpirationDate:
			(aDate
				cover: (164 to: 168)
				declaredAt: (69 to: 73)) ] valueCoveringAll:
		{86 to: 104. 114 to: 124. 144 to: 162}.! !
!Behavior method!
initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate
	[
	(self coverAll:
		{88 to: 91}) assertNameNotEmpty:
		(anOwner
			cover: (113 to: 119)
			declaredAt: (21 to: 27)) ] valueCoveringAll:
		{93 to: 111}.
	[
	(self coverAll:
		{123 to: 126}) assertCardNumberIsCorrect:
		(aCreditCardNumber
			cover: (155 to: 171)
			declaredAt: (41 to: 57)) ] valueCoveringAll:
		{128 to: 153}.
	(owner _ anOwner
		cover: (185 to: 191)
		declaredAt: (21 to: 27))
		cover: (176 to: 180)
		declaredAt: (176 to: 180).
	(creditCardNumber _ aCreditCardNumber
		cover: (215 to: 231)
		declaredAt: (41 to: 57))
		cover: (195 to: 210)
		declaredAt: (195 to: 210).
	(expirationDate _ aDate
		cover: (253 to: 257)
		declaredAt: (79 to: 83))
		cover: (235 to: 248)
		declaredAt: (235 to: 248).! !
!Behavior method!
assertNameNotEmpty: anOwner
	[
	([
	([
	(anOwner
		cover: (32 to: 38)
		declaredAt: (21 to: 27)) withBlanksTrimmed ] valueCoveringAll:
		{40 to: 56}) isEmpty ] valueCoveringAll:
		{58 to: 64}) ifTrue: [
		[
		(self coverAll:
			{75 to: 78}) error:
			([
			([
			(self coverAll:
				{87 to: 90}) class ] valueCoveringAll:
				{92 to: 96}) errorOwnerEmpty ] valueCoveringAll:
				{98 to: 112}) ] valueCoveringAll:
			{80 to: 85} ]] valueCoveringAll:
		{66 to: 72}.! !
!Behavior method!
assertCardNumberIsCorrect: aCreditCardNumber
	[
	([
	([
	(aCreditCardNumber
		cover: (49 to: 65)
		declaredAt: (28 to: 44)) size ] valueCoveringAll:
		{67 to: 70}) <
		(16 coverAll:
			{74 to: 75}) ] valueCoveringAll:
		{72 to: 72}) ifTrue: [
		[
		(self coverAll:
			{87 to: 90}) error:
			([
			([
			(self coverAll:
				{99 to: 102}) class ] valueCoveringAll:
				{104 to: 108}) errorCardNumberLessThan16Digits ] valueCoveringAll:
				{110 to: 140}) ] valueCoveringAll:
			{92 to: 97} ]] valueCoveringAll:
		{78 to: 84}.
	[
	([
	([
	(aCreditCardNumber
		cover: (146 to: 162)
		declaredAt: (28 to: 44)) size ] valueCoveringAll:
		{164 to: 167}) >
		(16 coverAll:
			{171 to: 172}) ] valueCoveringAll:
		{169 to: 169}) ifTrue: [
		[
		(self coverAll:
			{184 to: 187}) error:
			([
			([
			(self coverAll:
				{196 to: 199}) class ] valueCoveringAll:
				{201 to: 205}) errorCardNumberMoreThan16Digits ] valueCoveringAll:
				{207 to: 237}) ] valueCoveringAll:
			{189 to: 194} ]] valueCoveringAll:
		{175 to: 181}.! !
!Behavior method!
initialize
	(stolenCards _ [
	(OrderedCollection
		cover: (29 to: 45)
		declaredAt: (29 to: 45)) new ] valueCoveringAll:
		{47 to: 49})
		cover: (14 to: 24)
		declaredAt: (14 to: 24).
	(registeredCards _ [
	(Dictionary
		cover: (72 to: 81)
		declaredAt: (72 to: 81)) new ] valueCoveringAll:
		{83 to: 85})
		cover: (53 to: 67)
		declaredAt: (53 to: 67).! !
!Behavior method!
registerStolenCard: aCreditCard
	[
	(stolenCards
		cover: (36 to: 46)
		declaredAt: (36 to: 46)) add:
		(aCreditCard
			cover: (53 to: 63)
			declaredAt: (21 to: 31)) ] valueCoveringAll:
		{48 to: 51}.! !
!Behavior method!
registerCard: aCreditCard withBalance: aBalance
	[
	(registeredCards
		cover: (52 to: 66)
		declaredAt: (52 to: 66)) add:
		([
		(aCreditCard
			cover: (73 to: 83)
			declaredAt: (15 to: 25)) ->
			(aBalance
				cover: (88 to: 95)
				declaredAt: (40 to: 47)) ] valueCoveringAll:
			{85 to: 86}) ] valueCoveringAll:
		{68 to: 71}.! !
!Behavior method!
errorCannotCheckoutEmptyCart
	^ 'Error - No se puede hacer checkout de un carrito vacío' coverAll:
		{32 to: 87}.! !
!Behavior method!
withCatalog: aDictionary
	^ [
	([
	(self coverAll:
		{29 to: 32}) new ] valueCoveringAll:
		{34 to: 36}) initializeWithCatalog:
		(aDictionary
			cover: (61 to: 71)
			declaredAt: (14 to: 24)) ] valueCoveringAll:
		{38 to: 59}.! !
!Behavior method!
initializeWithCatalog: aCatalog
	(catalog _ aCatalog
		cover: (46 to: 53)
		declaredAt: (24 to: 31))
		cover: (35 to: 41)
		declaredAt: (35 to: 41).! !
!Behavior method!
createNewWithAllowedList: anOrderedCollection
	^ [
	([
	(self coverAll:
		{50 to: 53}) new ] valueCoveringAll:
		{55 to: 57}) initializeWith:
		(anOrderedCollection
			cover: (75 to: 93)
			declaredAt: (27 to: 45)) ] valueCoveringAll:
		{59 to: 73}.! !
!Behavior method!
initializeWith: anOrderedCollection
	(catalog _ anOrderedCollection
		cover: (49 to: 67)
		declaredAt: (17 to: 35))
		cover: (38 to: 44)
		declaredAt: (38 to: 44).
	(cartItems _ [
	(OrderedCollection
		cover: (84 to: 100)
		declaredAt: (84 to: 100)) new ] valueCoveringAll:
		{102 to: 104})
		cover: (71 to: 79)
		declaredAt: (71 to: 79).! !
!Behavior method!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook forMerchantProcessor: aMerchantProcessor
	| total |
	[
	(self coverAll:
		{143 to: 146}) assertCartIsNotEmpty:
		(aCart
			cover: (170 to: 174)
			declaredAt: (11 to: 15)) ] valueCoveringAll:
		{148 to: 168}.
	[
	(self coverAll:
		{178 to: 181}) assertCartHasTheSameCatalog:
		(aCart
			cover: (212 to: 216)
			declaredAt: (11 to: 15)) ] valueCoveringAll:
		{183 to: 210}.
	[
	(self coverAll:
		{220 to: 223})
		assertCard:
			(aCreditCard
				cover: (237 to: 247)
				declaredAt: (33 to: 43))
		hasNotExpiredOn:
			(aDate
				cover: (266 to: 270)
				declaredAt: (53 to: 57)) ] valueCoveringAll:
		{225 to: 235. 249 to: 264}.
	[
	(self coverAll:
		{274 to: 277})
		assertCard:
			(aCreditCard
				cover: (291 to: 301)
				declaredAt: (33 to: 43))
		isNotStolenFor:
			(aMerchantProcessor
				cover: (319 to: 336)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{279 to: 289. 303 to: 317}.
	[
	(self coverAll:
		{340 to: 343})
		assertCard:
			(aCreditCard
				cover: (357 to: 367)
				declaredAt: (33 to: 43))
		isRegisteredOn:
			(aMerchantProcessor
				cover: (385 to: 402)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{345 to: 355. 369 to: 383}.
	(total _ [
	(aCart
		cover: (417 to: 421)
		declaredAt: (11 to: 15)) totalItemPrice ] valueCoveringAll:
		{423 to: 436})
		cover: (408 to: 412)
		declaredAt: (132 to: 136).
	[
	(self coverAll:
		{442 to: 445})
		assertCard:
			(aCreditCard
				cover: (459 to: 469)
				declaredAt: (33 to: 43))
		canSpend:
			(total
				cover: (481 to: 485)
				declaredAt: (132 to: 136))
		on:
			(aMerchantProcessor
				cover: (491 to: 508)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{447 to: 457. 471 to: 479. 487 to: 489}.
	[
	(aSalesBook
		cover: (514 to: 523)
		declaredAt: (71 to: 80)) add:
		(total
			cover: (530 to: 534)
			declaredAt: (132 to: 136)) ] valueCoveringAll:
		{525 to: 528}.
	^ total
		cover: (541 to: 545)
		declaredAt: (132 to: 136).! !
!Behavior method!
assertCartIsNotEmpty: aCart
	[
	([
	(aCart
		cover: (32 to: 36)
		declaredAt: (23 to: 27)) isEmpty ] valueCoveringAll:
		{38 to: 44}) ifTrue: [
		[
		(self coverAll:
			{55 to: 58}) error:
			([
			([
			(self coverAll:
				{67 to: 70}) class ] valueCoveringAll:
				{72 to: 76}) errorCannotCheckoutEmptyCart ] valueCoveringAll:
				{78 to: 105}) ] valueCoveringAll:
			{60 to: 65} ]] valueCoveringAll:
		{46 to: 52}.! !
!Behavior method!
isEmpty
	^ [
	(cartItems
		cover: (11 to: 19)
		declaredAt: (11 to: 19)) isEmpty ] valueCoveringAll:
		{21 to: 27}.! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:20:06'!
PASSED!
!Behavior method!
errorCannotCheckoutACartWithADifferentCatalog
	^ 'Error - No se puede hacer checkout de un carrito con un catálogo diferente' coverAll:
		{49 to: 124}.! !
!Behavior method!
add: aBook amount: anAmount
	| tuplaLibroCant |
	[
	(self coverAll:
		{53 to: 56}) assertBookIsAllowed:
		(aBook
			cover: (79 to: 83)
			declaredAt: (6 to: 10)) ] valueCoveringAll:
		{58 to: 77}.
	[
	(self coverAll:
		{87 to: 90}) assertAmountIsValid:
		(anAmount
			cover: (113 to: 120)
			declaredAt: (20 to: 27)) ] valueCoveringAll:
		{92 to: 111}.
	(tuplaLibroCant _ [
	(OrderedCollection
		cover: (144 to: 160)
		declaredAt: (144 to: 160)) new ] valueCoveringAll:
		{162 to: 164})
		cover: (126 to: 139)
		declaredAt: (33 to: 46).
	[
	(tuplaLibroCant
		cover: (168 to: 181)
		declaredAt: (33 to: 46)) add:
		(aBook
			cover: (188 to: 192)
			declaredAt: (6 to: 10)) ] valueCoveringAll:
		{183 to: 186}.
	[
	(tuplaLibroCant
		cover: (196 to: 209)
		declaredAt: (33 to: 46)) add:
		(anAmount
			cover: (216 to: 223)
			declaredAt: (20 to: 27)) ] valueCoveringAll:
		{211 to: 214}.
	[
	(cartItems
		cover: (229 to: 237)
		declaredAt: (229 to: 237)) add:
		(tuplaLibroCant
			cover: (244 to: 257)
			declaredAt: (33 to: 46)) ] valueCoveringAll:
		{239 to: 242}.! !
!Behavior method!
assertBookIsAllowed: aBook
	[
	([
	([
	(catalog
		cover: (31 to: 37)
		declaredAt: (31 to: 37)) keys ] valueCoveringAll:
		{39 to: 42}) includes:
		(aBook
			cover: (54 to: 58)
			declaredAt: (22 to: 26)) ] valueCoveringAll:
		{44 to: 52}) ifFalse: [
		[
		(self coverAll:
			{70 to: 73}) error:
			([
			([
			(self coverAll:
				{82 to: 85}) class ] valueCoveringAll:
				{87 to: 91}) errorBookNotInAllowedList ] valueCoveringAll:
				{93 to: 117}) ] valueCoveringAll:
			{75 to: 80} ]] valueCoveringAll:
		{61 to: 68}.! !
!Behavior method!
assertAmountIsValid: anAmount
	self coverAll:
		{65 to: 68}.
	[
	([
	(anAmount
		cover: (35 to: 42)
		declaredAt: (22 to: 29)) isInteger ] valueCoveringAll:
		{44 to: 52}) ifFalse: [
		[
		(self coverAll:
			{77 to: 80}) error:
			([
			([
			(self coverAll:
				{137 to: 140}) class ] valueCoveringAll:
				{82 to: 86}) errorAmountNotInteger ] valueCoveringAll:
				{88 to: 108}) ] valueCoveringAll:
			{70 to: 75} ]] valueCoveringAll:
		{55 to: 62}.
	[
	([
	(anAmount
		cover: (114 to: 121)
		declaredAt: (22 to: 29)) <
		(0 coverAll:
			{125 to: 125}) ] valueCoveringAll:
		{123 to: 123}) ifTrue: [
		[
		(self coverAll:
			{149 to: 152}) error:
			([
			([
			(self coverAll:
				{207 to: 210}) class ] valueCoveringAll:
				{154 to: 158}) errorAmountNegative ] valueCoveringAll:
				{160 to: 178}) ] valueCoveringAll:
			{142 to: 147} ]] valueCoveringAll:
		{128 to: 134}.
	[
	([
	(anAmount
		cover: (184 to: 191)
		declaredAt: (22 to: 29)) =
		(0 coverAll:
			{195 to: 195}) ] valueCoveringAll:
		{193 to: 193}) ifTrue: [
		[
		(self coverAll:
			{219 to: 222}) error:
			([
			([ self class ] valueCoveringAll:
				{224 to: 228}) errorAmountZero ] valueCoveringAll:
				{230 to: 244}) ] valueCoveringAll:
			{212 to: 217} ]] valueCoveringAll:
		{198 to: 204}.! !
!Behavior method!
assertCartHasTheSameCatalog: aCart
	[
	([
	(aCart
		cover: (39 to: 43)
		declaredAt: (30 to: 34)) hasCatalog:
		(catalog
			cover: (57 to: 63)
			declaredAt: (57 to: 63)) ] valueCoveringAll:
		{45 to: 55}) ifFalse: [
		[
		(self coverAll:
			{76 to: 79}) error:
			([
			([
			(self coverAll:
				{88 to: 91}) class ] valueCoveringAll:
				{93 to: 97}) errorCannotCheckoutACartWithADifferentCatalog ] valueCoveringAll:
				{99 to: 143}) ] valueCoveringAll:
			{81 to: 86} ]] valueCoveringAll:
		{66 to: 73}.! !
!Behavior method!
hasCatalog: aCatalog
	^ [
	(catalog
		cover: (24 to: 30)
		declaredAt: (24 to: 30)) =
		(aCatalog
			cover: (34 to: 41)
			declaredAt: (13 to: 20)) ] valueCoveringAll:
		{32 to: 32}.! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:20:06'!
PASSED!
!Behavior method!
assertCard: aCreditCard hasNotExpiredOn: aDate
	self coverAll:
		{94 to: 97}.
	[
	([
	(aCreditCard
		cover: (53 to: 63)
		declaredAt: (13 to: 23)) isExpiredOn:
		(aDate
			cover: (78 to: 82)
			declaredAt: (42 to: 46)) ] valueCoveringAll:
		{65 to: 76}) ifTrue: [
		[
		(self coverAll:
			{106 to: 109}) error:
			([
			([ self class ] valueCoveringAll:
				{111 to: 115}) errorExpiredCard ] valueCoveringAll:
				{117 to: 132}) ] valueCoveringAll:
			{99 to: 104} ]] valueCoveringAll:
		{85 to: 91}.! !
!Behavior method!
isExpiredOn: aDate
	^ [
	(expirationDate
		cover: (23 to: 36)
		declaredAt: (23 to: 36)) <
		(aDate
			cover: (40 to: 44)
			declaredAt: (14 to: 18)) ] valueCoveringAll:
		{38 to: 38}.! !
!Behavior method!
assertCard: aCreditCard isNotStolenFor: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (63 to: 80)
		declaredAt: (41 to: 58)) isCardStolen:
		(aCreditCard
			cover: (96 to: 106)
			declaredAt: (13 to: 23)) ] valueCoveringAll:
		{82 to: 94}) ifTrue: [
		[
		(self coverAll:
			{118 to: 121}) error:
			([
			([
			(self coverAll:
				{130 to: 133}) class ] valueCoveringAll:
				{135 to: 139}) errorStolenCard ] valueCoveringAll:
				{141 to: 155}) ] valueCoveringAll:
			{123 to: 128} ]] valueCoveringAll:
		{109 to: 115}.! !
!Behavior method!
isCardStolen: aCreditCard
	^ [
	(stolenCards
		cover: (30 to: 40)
		declaredAt: (30 to: 40)) includes:
		(aCreditCard
			cover: (52 to: 62)
			declaredAt: (15 to: 25)) ] valueCoveringAll:
		{42 to: 50}.! !
!Behavior method!
assertCard: aCreditCard isRegisteredOn: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (64 to: 81)
		declaredAt: (41 to: 58)) isCardRegistered:
		(aCreditCard
			cover: (101 to: 111)
			declaredAt: (13 to: 23)) ] valueCoveringAll:
		{83 to: 99}) ifFalse: [
		[
		(self coverAll:
			{124 to: 127}) error:
			([
			([
			(self coverAll:
				{136 to: 139}) class ] valueCoveringAll:
				{141 to: 145}) errorNotARegisteredCard ] valueCoveringAll:
				{147 to: 169}) ] valueCoveringAll:
			{129 to: 134} ]] valueCoveringAll:
		{114 to: 121}.! !
!Behavior method!
isCardRegistered: aCreditCard
	^ [
	([
	(registeredCards
		cover: (33 to: 47)
		declaredAt: (33 to: 47)) keys ] valueCoveringAll:
		{49 to: 52}) includes:
		(aCreditCard
			cover: (64 to: 74)
			declaredAt: (19 to: 29)) ] valueCoveringAll:
		{54 to: 62}.! !
!Behavior method!
totalItemPrice
	^ [
	(cartItems
		cover: (20 to: 28)
		declaredAt: (20 to: 28)) sum: [ :bookAmountTuple |
		[
		([
		(catalog
			cover: (56 to: 62)
			declaredAt: (56 to: 62)) at:
			([
			(bookAmountTuple
				cover: (68 to: 82)
				declaredAt: (37 to: 51)) first ] valueCoveringAll:
				{84 to: 88}) ] valueCoveringAll:
			{64 to: 66}) *
			([
			(bookAmountTuple
				cover: (93 to: 107)
				declaredAt: (37 to: 51)) second ] valueCoveringAll:
				{109 to: 114}) ] valueCoveringAll:
			{91 to: 91} ]] valueCoveringAll:
		{30 to: 33}.! !
!Behavior method!
assertCard: aCreditCard canSpend: aTotal on: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (69 to: 86)
		declaredAt: (46 to: 63))
		can:
			(aCreditCard
				cover: (93 to: 103)
				declaredAt: (13 to: 23))
		spend:
			(aTotal
				cover: (112 to: 117)
				declaredAt: (35 to: 40)) ] valueCoveringAll:
		{88 to: 91. 105 to: 110}) ifFalse: [
		[
		(self coverAll:
			{130 to: 133}) error:
			([
			([
			(self coverAll:
				{142 to: 145}) class ] valueCoveringAll:
				{147 to: 151}) errorCardDoesNotHaveEnoughBalance ] valueCoveringAll:
				{153 to: 185}) ] valueCoveringAll:
			{135 to: 140} ]] valueCoveringAll:
		{120 to: 127}.! !
!Behavior method!
can: aCreditCard spend: aTotal
	^ [
	([
	(registeredCards
		cover: (37 to: 51)
		declaredAt: (37 to: 51)) at:
		(aCreditCard
			cover: (56 to: 66)
			declaredAt: (6 to: 16)) ] valueCoveringAll:
		{53 to: 55}) >=
		(aTotal
			cover: (72 to: 77)
			declaredAt: (25 to: 30)) ] valueCoveringAll:
		{69 to: 70}.! !

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:20:06'!
PASSED!
!Behavior method!
errorExpiredCard
	^ 'Error - No se puede hacer checkout con una tarjeta de crédito vacía' coverAll:
		{20 to: 88}.! !

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:20:06'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:20:06'!
PASSED!
!Behavior method!
errorStolenCard
	^ 'Error - No se puede realizar una transacción con una tarjeta robada' coverAll:
		{19 to: 87}.! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:20:06'!
PASSED!
!Behavior method!
errorNotARegisteredCard
	^ 'Error - La tarjeta utilizada no se encuentra registrada' coverAll:
		{27 to: 83}.! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:20:06'!
PASSED!
!Behavior method!
errorCardDoesNotHaveEnoughBalance
	^ 'Error - La tarjeta de crédito no tiene suficiente saldo' coverAll:
		{38 to: 94}.! !

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:20:06'!
PASSED!
!Behavior method!
createNewWithAllowedList: anOrderedCollection
	^ [
	([
	(self coverAll:
		{50 to: 53}) new ] valueCoveringAll:
		{55 to: 57}) initializeWith:
		(anOrderedCollection
			cover: (75 to: 93)
			declaredAt: (27 to: 45)) ] valueCoveringAll:
		{59 to: 73}.! !
!Behavior method!
initializeWith: anOrderedCollection
	(catalog _ anOrderedCollection
		cover: (49 to: 67)
		declaredAt: (17 to: 35))
		cover: (38 to: 44)
		declaredAt: (38 to: 44).
	(cartItems _ [
	(OrderedCollection
		cover: (84 to: 100)
		declaredAt: (84 to: 100)) new ] valueCoveringAll:
		{102 to: 104})
		cover: (71 to: 79)
		declaredAt: (71 to: 79).! !
!Behavior method!
isEmpty
	^ [
	(cartItems
		cover: (11 to: 19)
		declaredAt: (11 to: 19)) isEmpty ] valueCoveringAll:
		{21 to: 27}.! !

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!
!Behavior method!
add: aBook
	[
	(self coverAll:
		{14 to: 17})
		add:
			(aBook
				cover: (24 to: 28)
				declaredAt: (6 to: 10))
		amount:
			(1 coverAll:
				{38 to: 38}) ] valueCoveringAll:
		{19 to: 22. 30 to: 36}.! !
!Behavior method!
add: aBook amount: anAmount
	| tuplaLibroCant |
	[
	(self coverAll:
		{53 to: 56}) assertBookIsAllowed:
		(aBook
			cover: (79 to: 83)
			declaredAt: (6 to: 10)) ] valueCoveringAll:
		{58 to: 77}.
	[
	(self coverAll:
		{87 to: 90}) assertAmountIsValid:
		(anAmount
			cover: (113 to: 120)
			declaredAt: (20 to: 27)) ] valueCoveringAll:
		{92 to: 111}.
	(tuplaLibroCant _ [
	(OrderedCollection
		cover: (144 to: 160)
		declaredAt: (144 to: 160)) new ] valueCoveringAll:
		{162 to: 164})
		cover: (126 to: 139)
		declaredAt: (33 to: 46).
	[
	(tuplaLibroCant
		cover: (168 to: 181)
		declaredAt: (33 to: 46)) add:
		(aBook
			cover: (188 to: 192)
			declaredAt: (6 to: 10)) ] valueCoveringAll:
		{183 to: 186}.
	[
	(tuplaLibroCant
		cover: (196 to: 209)
		declaredAt: (33 to: 46)) add:
		(anAmount
			cover: (216 to: 223)
			declaredAt: (20 to: 27)) ] valueCoveringAll:
		{211 to: 214}.
	[
	(cartItems
		cover: (229 to: 237)
		declaredAt: (229 to: 237)) add:
		(tuplaLibroCant
			cover: (244 to: 257)
			declaredAt: (33 to: 46)) ] valueCoveringAll:
		{239 to: 242}.! !
!Behavior method!
assertBookIsAllowed: aBook
	[
	([
	([
	(catalog
		cover: (31 to: 37)
		declaredAt: (31 to: 37)) keys ] valueCoveringAll:
		{39 to: 42}) includes:
		(aBook
			cover: (54 to: 58)
			declaredAt: (22 to: 26)) ] valueCoveringAll:
		{44 to: 52}) ifFalse: [
		[
		(self coverAll:
			{70 to: 73}) error:
			([
			([
			(self coverAll:
				{82 to: 85}) class ] valueCoveringAll:
				{87 to: 91}) errorBookNotInAllowedList ] valueCoveringAll:
				{93 to: 117}) ] valueCoveringAll:
			{75 to: 80} ]] valueCoveringAll:
		{61 to: 68}.! !

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:20:45'!
ERROR!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:20:45'!
ERROR!
!Behavior method!
errorBookNotInAllowedList
	^ 'Error - El Libro no está en la lista de productos permitidos' coverAll:
		{29 to: 90}.! !

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:20:45'!
FAILURE!
!Behavior method!
errorAmountNotInteger
	^ 'Error - La cantidad tiene que ser un número entero' coverAll:
		{25 to: 76}.! !

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:20:45'!
FAILURE!
!Behavior method!
errorAmountNegative
	^ 'Error - La cantidad no puede ser negativa' coverAll:
		{23 to: 65}.! !

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:20:45'!
FAILURE!
!Behavior method!
errorAmountZero
	^ 'Error - La cantidad de libros no puede ser 0' coverAll:
		{19 to: 64}.! !

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:20:45'!
FAILURE!
!Behavior method!
forOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate
	^ [
	([
	(self coverAll:
		{77 to: 80}) new ] valueCoveringAll:
		{82 to: 84})
		initializeForOwner:
			(anOwner
				cover: (106 to: 112)
				declaredAt: (11 to: 17))
		withNumber:
			(aCreditCardNumber
				cover: (126 to: 142)
				declaredAt: (31 to: 47))
		withExpirationDate:
			(aDate
				cover: (164 to: 168)
				declaredAt: (69 to: 73)) ] valueCoveringAll:
		{86 to: 104. 114 to: 124. 144 to: 162}.! !
!Behavior method!
initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate
	[
	(self coverAll:
		{88 to: 91}) assertNameNotEmpty:
		(anOwner
			cover: (113 to: 119)
			declaredAt: (21 to: 27)) ] valueCoveringAll:
		{93 to: 111}.
	[
	(self coverAll:
		{123 to: 126}) assertCardNumberIsCorrect:
		(aCreditCardNumber
			cover: (155 to: 171)
			declaredAt: (41 to: 57)) ] valueCoveringAll:
		{128 to: 153}.
	(owner _ anOwner
		cover: (185 to: 191)
		declaredAt: (21 to: 27))
		cover: (176 to: 180)
		declaredAt: (176 to: 180).
	(creditCardNumber _ aCreditCardNumber
		cover: (215 to: 231)
		declaredAt: (41 to: 57))
		cover: (195 to: 210)
		declaredAt: (195 to: 210).
	(expirationDate _ aDate
		cover: (253 to: 257)
		declaredAt: (79 to: 83))
		cover: (235 to: 248)
		declaredAt: (235 to: 248).! !
!Behavior method!
assertNameNotEmpty: anOwner
	[
	([
	([
	(anOwner
		cover: (32 to: 38)
		declaredAt: (21 to: 27)) withBlanksTrimmed ] valueCoveringAll:
		{40 to: 56}) isEmpty ] valueCoveringAll:
		{58 to: 64}) ifTrue: [
		[
		(self coverAll:
			{75 to: 78}) error:
			([
			([
			(self coverAll:
				{87 to: 90}) class ] valueCoveringAll:
				{92 to: 96}) errorOwnerEmpty ] valueCoveringAll:
				{98 to: 112}) ] valueCoveringAll:
			{80 to: 85} ]] valueCoveringAll:
		{66 to: 72}.! !
!Behavior method!
assertCardNumberIsCorrect: aCreditCardNumber
	[
	([
	([
	(aCreditCardNumber
		cover: (49 to: 65)
		declaredAt: (28 to: 44)) size ] valueCoveringAll:
		{67 to: 70}) <
		(16 coverAll:
			{74 to: 75}) ] valueCoveringAll:
		{72 to: 72}) ifTrue: [
		[
		(self coverAll:
			{87 to: 90}) error:
			([
			([
			(self coverAll:
				{99 to: 102}) class ] valueCoveringAll:
				{104 to: 108}) errorCardNumberLessThan16Digits ] valueCoveringAll:
				{110 to: 140}) ] valueCoveringAll:
			{92 to: 97} ]] valueCoveringAll:
		{78 to: 84}.
	[
	([
	([
	(aCreditCardNumber
		cover: (146 to: 162)
		declaredAt: (28 to: 44)) size ] valueCoveringAll:
		{164 to: 167}) >
		(16 coverAll:
			{171 to: 172}) ] valueCoveringAll:
		{169 to: 169}) ifTrue: [
		[
		(self coverAll:
			{184 to: 187}) error:
			([
			([
			(self coverAll:
				{196 to: 199}) class ] valueCoveringAll:
				{201 to: 205}) errorCardNumberMoreThan16Digits ] valueCoveringAll:
				{207 to: 237}) ] valueCoveringAll:
			{189 to: 194} ]] valueCoveringAll:
		{175 to: 181}.! !
!Behavior method!
initialize
	(stolenCards _ [
	(OrderedCollection
		cover: (29 to: 45)
		declaredAt: (29 to: 45)) new ] valueCoveringAll:
		{47 to: 49})
		cover: (14 to: 24)
		declaredAt: (14 to: 24).
	(registeredCards _ [
	(Dictionary
		cover: (72 to: 81)
		declaredAt: (72 to: 81)) new ] valueCoveringAll:
		{83 to: 85})
		cover: (53 to: 67)
		declaredAt: (53 to: 67).! !
!Behavior method!
registerStolenCard: aCreditCard
	[
	(stolenCards
		cover: (36 to: 46)
		declaredAt: (36 to: 46)) add:
		(aCreditCard
			cover: (53 to: 63)
			declaredAt: (21 to: 31)) ] valueCoveringAll:
		{48 to: 51}.! !
!Behavior method!
registerCard: aCreditCard withBalance: aBalance
	[
	(registeredCards
		cover: (52 to: 66)
		declaredAt: (52 to: 66)) add:
		([
		(aCreditCard
			cover: (73 to: 83)
			declaredAt: (15 to: 25)) ->
			(aBalance
				cover: (88 to: 95)
				declaredAt: (40 to: 47)) ] valueCoveringAll:
			{85 to: 86}) ] valueCoveringAll:
		{68 to: 71}.! !
!Behavior method!
errorCannotCheckoutEmptyCart
	^ 'Error - No se puede hacer checkout de un carrito vacío' coverAll:
		{32 to: 87}.! !
!Behavior method!
withCatalog: aDictionary
	^ [
	([
	(self coverAll:
		{29 to: 32}) new ] valueCoveringAll:
		{34 to: 36}) initializeWithCatalog:
		(aDictionary
			cover: (61 to: 71)
			declaredAt: (14 to: 24)) ] valueCoveringAll:
		{38 to: 59}.! !
!Behavior method!
initializeWithCatalog: aCatalog
	(catalog _ aCatalog
		cover: (46 to: 53)
		declaredAt: (24 to: 31))
		cover: (35 to: 41)
		declaredAt: (35 to: 41).! !
!Behavior method!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook forMerchantProcessor: aMerchantProcessor
	| total |
	[
	(self coverAll:
		{143 to: 146}) assertCartIsNotEmpty:
		(aCart
			cover: (170 to: 174)
			declaredAt: (11 to: 15)) ] valueCoveringAll:
		{148 to: 168}.
	[
	(self coverAll:
		{178 to: 181}) assertCartHasTheSameCatalog:
		(aCart
			cover: (212 to: 216)
			declaredAt: (11 to: 15)) ] valueCoveringAll:
		{183 to: 210}.
	[
	(self coverAll:
		{220 to: 223})
		assertCard:
			(aCreditCard
				cover: (237 to: 247)
				declaredAt: (33 to: 43))
		hasNotExpiredOn:
			(aDate
				cover: (266 to: 270)
				declaredAt: (53 to: 57)) ] valueCoveringAll:
		{225 to: 235. 249 to: 264}.
	[
	(self coverAll:
		{274 to: 277})
		assertCard:
			(aCreditCard
				cover: (291 to: 301)
				declaredAt: (33 to: 43))
		isNotStolenFor:
			(aMerchantProcessor
				cover: (319 to: 336)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{279 to: 289. 303 to: 317}.
	[
	(self coverAll:
		{340 to: 343})
		assertCard:
			(aCreditCard
				cover: (357 to: 367)
				declaredAt: (33 to: 43))
		isRegisteredOn:
			(aMerchantProcessor
				cover: (385 to: 402)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{345 to: 355. 369 to: 383}.
	(total _ [
	(aCart
		cover: (417 to: 421)
		declaredAt: (11 to: 15)) totalItemPrice ] valueCoveringAll:
		{423 to: 436})
		cover: (408 to: 412)
		declaredAt: (132 to: 136).
	[
	(self coverAll:
		{442 to: 445})
		assertCard:
			(aCreditCard
				cover: (459 to: 469)
				declaredAt: (33 to: 43))
		canSpend:
			(total
				cover: (481 to: 485)
				declaredAt: (132 to: 136))
		on:
			(aMerchantProcessor
				cover: (491 to: 508)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{447 to: 457. 471 to: 479. 487 to: 489}.
	[
	(aSalesBook
		cover: (514 to: 523)
		declaredAt: (71 to: 80)) add:
		(total
			cover: (530 to: 534)
			declaredAt: (132 to: 136)) ] valueCoveringAll:
		{525 to: 528}.
	^ total
		cover: (541 to: 545)
		declaredAt: (132 to: 136).! !
!Behavior method!
assertCartIsNotEmpty: aCart
	[
	([
	(aCart
		cover: (32 to: 36)
		declaredAt: (23 to: 27)) isEmpty ] valueCoveringAll:
		{38 to: 44}) ifTrue: [
		[
		(self coverAll:
			{55 to: 58}) error:
			([
			([
			(self coverAll:
				{67 to: 70}) class ] valueCoveringAll:
				{72 to: 76}) errorCannotCheckoutEmptyCart ] valueCoveringAll:
				{78 to: 105}) ] valueCoveringAll:
			{60 to: 65} ]] valueCoveringAll:
		{46 to: 52}.! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!
!Behavior method!
errorCannotCheckoutACartWithADifferentCatalog
	^ 'Error - No se puede hacer checkout de un carrito con un catálogo diferente' coverAll:
		{49 to: 124}.! !
!Behavior method!
assertAmountIsValid: anAmount
	self coverAll:
		{65 to: 68}.
	[
	([
	(anAmount
		cover: (35 to: 42)
		declaredAt: (22 to: 29)) isInteger ] valueCoveringAll:
		{44 to: 52}) ifFalse: [
		[
		(self coverAll:
			{77 to: 80}) error:
			([
			([
			(self coverAll:
				{137 to: 140}) class ] valueCoveringAll:
				{82 to: 86}) errorAmountNotInteger ] valueCoveringAll:
				{88 to: 108}) ] valueCoveringAll:
			{70 to: 75} ]] valueCoveringAll:
		{55 to: 62}.
	[
	([
	(anAmount
		cover: (114 to: 121)
		declaredAt: (22 to: 29)) <
		(0 coverAll:
			{125 to: 125}) ] valueCoveringAll:
		{123 to: 123}) ifTrue: [
		[
		(self coverAll:
			{149 to: 152}) error:
			([
			([
			(self coverAll:
				{207 to: 210}) class ] valueCoveringAll:
				{154 to: 158}) errorAmountNegative ] valueCoveringAll:
				{160 to: 178}) ] valueCoveringAll:
			{142 to: 147} ]] valueCoveringAll:
		{128 to: 134}.
	[
	([
	(anAmount
		cover: (184 to: 191)
		declaredAt: (22 to: 29)) =
		(0 coverAll:
			{195 to: 195}) ] valueCoveringAll:
		{193 to: 193}) ifTrue: [
		[
		(self coverAll:
			{219 to: 222}) error:
			([
			([ self class ] valueCoveringAll:
				{224 to: 228}) errorAmountZero ] valueCoveringAll:
				{230 to: 244}) ] valueCoveringAll:
			{212 to: 217} ]] valueCoveringAll:
		{198 to: 204}.! !
!Behavior method!
assertCartHasTheSameCatalog: aCart
	[
	([
	(aCart
		cover: (39 to: 43)
		declaredAt: (30 to: 34)) hasCatalog:
		(catalog
			cover: (57 to: 63)
			declaredAt: (57 to: 63)) ] valueCoveringAll:
		{45 to: 55}) ifFalse: [
		[
		(self coverAll:
			{76 to: 79}) error:
			([
			([
			(self coverAll:
				{88 to: 91}) class ] valueCoveringAll:
				{93 to: 97}) errorCannotCheckoutACartWithADifferentCatalog ] valueCoveringAll:
				{99 to: 143}) ] valueCoveringAll:
			{81 to: 86} ]] valueCoveringAll:
		{66 to: 73}.! !
!Behavior method!
hasCatalog: aCatalog
	^ [
	(catalog
		cover: (24 to: 30)
		declaredAt: (24 to: 30)) =
		(aCatalog
			cover: (34 to: 41)
			declaredAt: (13 to: 20)) ] valueCoveringAll:
		{32 to: 32}.! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!
!Behavior method!
assertCard: aCreditCard hasNotExpiredOn: aDate
	self coverAll:
		{94 to: 97}.
	[
	([
	(aCreditCard
		cover: (53 to: 63)
		declaredAt: (13 to: 23)) isExpiredOn:
		(aDate
			cover: (78 to: 82)
			declaredAt: (42 to: 46)) ] valueCoveringAll:
		{65 to: 76}) ifTrue: [
		[
		(self coverAll:
			{106 to: 109}) error:
			([
			([ self class ] valueCoveringAll:
				{111 to: 115}) errorExpiredCard ] valueCoveringAll:
				{117 to: 132}) ] valueCoveringAll:
			{99 to: 104} ]] valueCoveringAll:
		{85 to: 91}.! !
!Behavior method!
isExpiredOn: aDate
	^ [
	(expirationDate
		cover: (23 to: 36)
		declaredAt: (23 to: 36)) <
		(aDate
			cover: (40 to: 44)
			declaredAt: (14 to: 18)) ] valueCoveringAll:
		{38 to: 38}.! !
!Behavior method!
assertCard: aCreditCard isNotStolenFor: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (63 to: 80)
		declaredAt: (41 to: 58)) isCardStolen:
		(aCreditCard
			cover: (96 to: 106)
			declaredAt: (13 to: 23)) ] valueCoveringAll:
		{82 to: 94}) ifTrue: [
		[
		(self coverAll:
			{118 to: 121}) error:
			([
			([
			(self coverAll:
				{130 to: 133}) class ] valueCoveringAll:
				{135 to: 139}) errorStolenCard ] valueCoveringAll:
				{141 to: 155}) ] valueCoveringAll:
			{123 to: 128} ]] valueCoveringAll:
		{109 to: 115}.! !
!Behavior method!
isCardStolen: aCreditCard
	^ [
	(stolenCards
		cover: (30 to: 40)
		declaredAt: (30 to: 40)) includes:
		(aCreditCard
			cover: (52 to: 62)
			declaredAt: (15 to: 25)) ] valueCoveringAll:
		{42 to: 50}.! !
!Behavior method!
assertCard: aCreditCard isRegisteredOn: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (64 to: 81)
		declaredAt: (41 to: 58)) isCardRegistered:
		(aCreditCard
			cover: (101 to: 111)
			declaredAt: (13 to: 23)) ] valueCoveringAll:
		{83 to: 99}) ifFalse: [
		[
		(self coverAll:
			{124 to: 127}) error:
			([
			([
			(self coverAll:
				{136 to: 139}) class ] valueCoveringAll:
				{141 to: 145}) errorNotARegisteredCard ] valueCoveringAll:
				{147 to: 169}) ] valueCoveringAll:
			{129 to: 134} ]] valueCoveringAll:
		{114 to: 121}.! !
!Behavior method!
isCardRegistered: aCreditCard
	^ [
	([
	(registeredCards
		cover: (33 to: 47)
		declaredAt: (33 to: 47)) keys ] valueCoveringAll:
		{49 to: 52}) includes:
		(aCreditCard
			cover: (64 to: 74)
			declaredAt: (19 to: 29)) ] valueCoveringAll:
		{54 to: 62}.! !
!Behavior method!
totalItemPrice
	^ [
	(cartItems
		cover: (20 to: 28)
		declaredAt: (20 to: 28)) sum: [ :bookAmountTuple |
		[
		([
		(catalog
			cover: (56 to: 62)
			declaredAt: (56 to: 62)) at:
			([
			(bookAmountTuple
				cover: (68 to: 82)
				declaredAt: (37 to: 51)) first ] valueCoveringAll:
				{84 to: 88}) ] valueCoveringAll:
			{64 to: 66}) *
			([
			(bookAmountTuple
				cover: (93 to: 107)
				declaredAt: (37 to: 51)) second ] valueCoveringAll:
				{109 to: 114}) ] valueCoveringAll:
			{91 to: 91} ]] valueCoveringAll:
		{30 to: 33}.! !
!Behavior method!
assertCard: aCreditCard canSpend: aTotal on: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (69 to: 86)
		declaredAt: (46 to: 63))
		can:
			(aCreditCard
				cover: (93 to: 103)
				declaredAt: (13 to: 23))
		spend:
			(aTotal
				cover: (112 to: 117)
				declaredAt: (35 to: 40)) ] valueCoveringAll:
		{88 to: 91. 105 to: 110}) ifFalse: [
		[
		(self coverAll:
			{130 to: 133}) error:
			([
			([
			(self coverAll:
				{142 to: 145}) class ] valueCoveringAll:
				{147 to: 151}) errorCardDoesNotHaveEnoughBalance ] valueCoveringAll:
				{153 to: 185}) ] valueCoveringAll:
			{135 to: 140} ]] valueCoveringAll:
		{120 to: 127}.! !
!Behavior method!
can: aCreditCard spend: aTotal
	^ [
	([
	(registeredCards
		cover: (37 to: 51)
		declaredAt: (37 to: 51)) at:
		(aCreditCard
			cover: (56 to: 66)
			declaredAt: (6 to: 16)) ] valueCoveringAll:
		{53 to: 55}) >=
		(aTotal
			cover: (72 to: 77)
			declaredAt: (25 to: 30)) ] valueCoveringAll:
		{69 to: 70}.! !

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!
!Behavior method!
errorExpiredCard
	^ 'Error - No se puede hacer checkout con una tarjeta de crédito vacía' coverAll:
		{20 to: 88}.! !

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!
!Behavior method!
errorStolenCard
	^ 'Error - No se puede realizar una transacción con una tarjeta robada' coverAll:
		{19 to: 87}.! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!
!Behavior method!
errorNotARegisteredCard
	^ 'Error - La tarjeta utilizada no se encuentra registrada' coverAll:
		{27 to: 83}.! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!
!Behavior method!
errorCardDoesNotHaveEnoughBalance
	^ 'Error - La tarjeta de crédito no tiene suficiente saldo' coverAll:
		{38 to: 94}.! !

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!
!Behavior method!
errorOwnerEmpty
	^ 'Error - El nombre dueño de la tarjeta de crédito no puede estar vacío' coverAll:
		{19 to: 89}.! !

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!
!Behavior method!
errorCardNumberLessThan16Digits
	^ 'Error - El número de la tarjeta de crédito tiene menos de 16 dígitos' coverAll:
		{35 to: 104}.! !

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!
!Behavior method!
errorCardNumberMoreThan16Digits
	^ 'Error - El número de la tarjeta de crédito tiene más de 16 dígitos' coverAll:
		{35 to: 102}.! !

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/16/2021 18:20:45'!
PASSED!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/16/2021 18:21:01'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:21:01'!
ERROR!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:21:01'!
ERROR!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:21:01'!
FAILURE!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:21:01'!
FAILURE!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:21:01'!
FAILURE!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:21:01'!
FAILURE!

!classDefinition: #CartTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 18:22:10'!
TestCase subclass: #CartTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking emptyCatalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #CartTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 18:22:11'!
TestCase subclass: #CartTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking emptyCatalog catalog1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #CartTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 18:22:13'!
TestCase subclass: #CartTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking emptyCatalog catalog1 catalog2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!classDefinition: #CartTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 18:22:20'!
TestCase subclass: #CartTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking emptyCatalog catalog1 catalog2 donQuixote'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:22:09' prior: 50863460 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:22:45' prior: 50872100 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.
	
	catalog2 := Dictionary new.
	catalog2 add: donQuixote -> 50.! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:22:57' prior: 50863989!
test01CartThatWasJustCreatedIsEmpty

	| carrito |
	
	carrito := Cart createNewWithAllowedList: emptyCatalog.
	
	self assert: carrito isEmpty.
	! !
!Cart class methodsFor: 'instance creation' stamp: 'G.L.S 6/16/2021 18:26:27'!
createNewWithCatalog: anOrderedCollection 
	^self new initializeWith: anOrderedCollection.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:26:27' prior: 50870801!
testCashierWithCatalog: aCatalog checkoutCartWithItems: aListOfItemsAndAmounts withCreditCard: aCreditCard asserting: anAssertionBlock
	
	| cart cashier result |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithCatalog: aCatalog.
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem).].
	
	result := cashier checkout: cart 
		withCreditCard: aCreditCard
		onDate: FixedGregorianDate today 
		registerOn: sales 
		forMerchantProcessor: merchantProcessor.
		
	anAssertionBlock value: result.! !
!CashierTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:26:27' prior: 50870419!
testCashierWithCatalog: aCatalog cannotCheckoutCartWithCatalog: aCartCatalog withItems: aListOfItemsAndAmounts withCreditCard: aCreditCard ThrowingError: anErrorMessage
	
	| cart cashier |
	
	cashier := Cashier withCatalog: aCatalog.
	
	cart := Cart createNewWithCatalog: aCartCatalog .
	
	aListOfItemsAndAmounts keysDo: [:anItem | cart add: anItem amount: (aListOfItemsAndAmounts at: anItem)].
	
	self should: [cashier checkout: cart 
					withCreditCard: aCreditCard
					onDate: FixedGregorianDate today 
					registerOn: sales 
					forMerchantProcessor: merchantProcessor]
		raise: Error 
		withExceptionDo: [
			:anError | 
			self assert: anError messageText = anErrorMessage.
			].! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:26:27' prior: 50864536!
test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts

	| carrito tuplaLibroCant librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80.
	librosValidos add: designPatterns.
	
	carrito := Cart createNewWithCatalog: librosValidos.
		
	carrito add: smalltalk80 amount: 4.
	carrito add: designPatterns amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: smalltalk80.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito size.
	self assert: tuplaLibroCant equals: carrito first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: designPatterns .
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito second.! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:26:27' prior: 50864001!
test02CartWithAnItemIsNotEmpty

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	librosValidos add: smalltalk80 .
	
	carrito := Cart createNewWithCatalog: librosValidos.
	carrito add: smalltalk80.
	
	self deny: carrito isEmpty.
	! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:26:27' prior: 50872130!
test01CartThatWasJustCreatedIsEmpty

	| carrito |
	
	carrito := Cart createNewWithCatalog: emptyCatalog.
	
	self assert: carrito isEmpty.
	! !
!CartTest methodsFor: 'as yet unclassified' stamp: 'G.L.S 6/16/2021 18:26:27' prior: 50864240!
testCartFailToAdd: aBook withAmount: anAmount whileAllowing: aBookList expectingErrorMessage: anErrorMessage

	| carrito librosValidos |
	
	librosValidos := OrderedCollection new.
	aBookList do: [:aBookToAllow | librosValidos add: aBookToAllow.].
	
	carrito := Cart createNewWithCatalog: librosValidos.
	
	self should: [
		carrito add: aBook amount: anAmount.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: anErrorMessage.
			].
	! !

!methodRemoval: Cart class #createNewWithAllowedList: stamp: 'G.L.S 6/16/2021 18:26:27'!
createNewWithAllowedList: anOrderedCollection 
	^self new initializeWith: anOrderedCollection.!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:26:30'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:26:30'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:26:30'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:26:30'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:26:30'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:26:30'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:26:30'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:26:30'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/16/2021 18:26:33'!
PASSED!

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/16/2021 18:26:33'!
PASSED!

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/16/2021 18:26:33'!
PASSED!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/16/2021 18:26:35'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:26:35'!
ERROR!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:26:35'!
ERROR!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:26:35'!
FAILURE!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:26:35'!
FAILURE!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:26:35'!
FAILURE!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:26:35'!
FAILURE!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:26:53' prior: 50872217!
test02CartWithAnItemIsNotEmpty

	| carrito |
	
	carrito := Cart createNewWithCatalog: catalog1.
	carrito add: smalltalk80.
	
	self deny: carrito isEmpty.
	! !

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:26:57'!
PASSED!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/16/2021 18:26:57'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:26:57'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:26:57'!
ERROR!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:26:57'!
FAILURE!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:26:57'!
FAILURE!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:26:57'!
FAILURE!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:26:57'!
FAILURE!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:27:10' prior: 50872115 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	donQuixote := '9781400132171'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.! !

!classDefinition: #CartTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 18:27:24'!
TestCase subclass: #CartTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking emptyCatalog catalog1 donQuixote'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:28:50' prior: 50872190!
test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts

	| carrito tuplaLibroCant |
	
	carrito := Cart createNewWithCatalog: catalog1.
		
	carrito add: smalltalk80 amount: 4.
	carrito add: designPatterns amount: 2.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: smalltalk80.
	tuplaLibroCant add: 4.
	
	self deny: carrito isEmpty.
	self assert: 2 equals: carrito size.
	self assert: tuplaLibroCant equals: carrito first.
	
	tuplaLibroCant := OrderedCollection new.
	tuplaLibroCant add: designPatterns .
	tuplaLibroCant add: 2.
	
	self assert: tuplaLibroCant equals: carrito second.! !

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:28:54'!
PASSED!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/16/2021 18:28:54'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:28:54'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:28:54'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:28:54'!
FAILURE!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:28:54'!
FAILURE!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:28:54'!
FAILURE!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:28:54'!
FAILURE!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:29:34' prior: 50872236!
testCartFailToAdd: aBook withAmount: anAmount whileAllowing: aBookList expectingErrorMessage: anErrorMessage

	| carrito |
	
	carrito := Cart createNewWithCatalog: aBookList.
	
	self should: [
		carrito add: aBook amount: anAmount.
		]
		raise: Error  
		withExceptionDo: [
			:anError |
			self assert: anError messageText equals: anErrorMessage.
			].
	! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:29:55' prior: 50864482!
test04CartCannotAddItemsThatAreNotAllowed
		
	self testCartFailToAdd: smalltalk80 
		withAmount: 1
		whileAllowing: catalog1  
		expectingErrorMessage: Cart errorBookNotInAllowedList.
	! !

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:29:57'!
FAILURE!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:30:26' prior: 50872446!
test04CartCannotAddItemsThatAreNotAllowed
		
	self testCartFailToAdd: smalltalk80 
		withAmount: 1
		whileAllowing: emptyCatalog 
		expectingErrorMessage: Cart errorBookNotInAllowedList.
	! !

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:30:27'!
PASSED!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/16/2021 18:30:27'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:30:27'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:30:27'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:30:27'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:30:27'!
FAILURE!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:30:27'!
FAILURE!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:30:27'!
FAILURE!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:30:36' prior: 50864426!
test05CartCannotAddANonIntegerAmountOfAnItem
	
	self testCartFailToAdd: smalltalk80 
		withAmount: 1.5
		whileAllowing: catalog1  
		expectingErrorMessage: Cart errorAmountNotInteger.
	! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:30:40' prior: 50864370!
test06CartCannotAddANegativeAmountOfAnItem
	
	self testCartFailToAdd: smalltalk80 
		withAmount: -1
		whileAllowing: catalog1  
		expectingErrorMessage: Cart errorAmountNegative.! !
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:30:46' prior: 50864314!
test07CartCannotAddAZeroAmountOfAnItem
	
	self testCartFailToAdd: smalltalk80 
		withAmount: 0
		whileAllowing: catalog1  
		expectingErrorMessage: Cart errorAmountZero.
	! !

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/16/2021 18:30:55'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:30:55'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:30:55'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:30:55'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:30:55'!
PASSED!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:30:55'!
PASSED!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:30:55'!
PASSED!

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:30:59'!
PASSED!

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:30:59'!
PASSED!

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:30:59'!
PASSED!

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:30:59'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:30:59'!
PASSED!

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:30:59'!
PASSED!

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:30:59'!
PASSED!

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:30:59'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/16/2021 18:31:01'!
PASSED!

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/16/2021 18:31:01'!
PASSED!

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/16/2021 18:31:01'!
PASSED!
!CartTest methodsFor: 'testing' stamp: 'G.L.S 6/16/2021 18:31:30' prior: 50872359 overrides: 16927572!
setUp

	smalltalk80 := '9780201113723'.
	designPatterns := '9780201184624'.
	objectThinking := '9780735619654'.
	
	emptyCatalog := Dictionary new.
	
	catalog1 := Dictionary new.
	catalog1 add: smalltalk80 -> 10.
	catalog1 add: designPatterns -> 100.
	catalog1 add: objectThinking -> 50.! !

!classDefinition: #CartTest category: 'Ejercicio-Libros' stamp: 'G.L.S 6/16/2021 18:31:37'!
TestCase subclass: #CartTest
	instanceVariableNames: 'smalltalk80 designPatterns objectThinking emptyCatalog catalog1'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Ejercicio-Libros'!

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/16/2021 18:31:39'!
PASSED!

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:31:39'!
PASSED!

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:31:39'!
PASSED!

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:31:39'!
PASSED!

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:31:39'!
PASSED!

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:31:39'!
PASSED!

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:31:39'!
PASSED!
!Behavior method!
createNewWithCatalog: anOrderedCollection
	^ [
	([
	(self coverAll:
		{46 to: 49}) new ] valueCoveringAll:
		{51 to: 53}) initializeWith:
		(anOrderedCollection
			cover: (71 to: 89)
			declaredAt: (23 to: 41)) ] valueCoveringAll:
		{55 to: 69}.! !
!Behavior method!
initializeWith: anOrderedCollection
	(catalog _ anOrderedCollection
		cover: (49 to: 67)
		declaredAt: (17 to: 35))
		cover: (38 to: 44)
		declaredAt: (38 to: 44).
	(cartItems _ [
	(OrderedCollection
		cover: (84 to: 100)
		declaredAt: (84 to: 100)) new ] valueCoveringAll:
		{102 to: 104})
		cover: (71 to: 79)
		declaredAt: (71 to: 79).! !
!Behavior method!
isEmpty
	^ [
	(cartItems
		cover: (11 to: 19)
		declaredAt: (11 to: 19)) isEmpty ] valueCoveringAll:
		{21 to: 27}.! !

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/16/2021 18:32:27'!
PASSED!
!Behavior method!
add: aBook
	[
	(self coverAll:
		{14 to: 17})
		add:
			(aBook
				cover: (24 to: 28)
				declaredAt: (6 to: 10))
		amount:
			(1 coverAll:
				{38 to: 38}) ] valueCoveringAll:
		{19 to: 22. 30 to: 36}.! !
!Behavior method!
add: aBook amount: anAmount
	| tuplaLibroCant |
	[
	(self coverAll:
		{53 to: 56}) assertBookIsAllowed:
		(aBook
			cover: (79 to: 83)
			declaredAt: (6 to: 10)) ] valueCoveringAll:
		{58 to: 77}.
	[
	(self coverAll:
		{87 to: 90}) assertAmountIsValid:
		(anAmount
			cover: (113 to: 120)
			declaredAt: (20 to: 27)) ] valueCoveringAll:
		{92 to: 111}.
	(tuplaLibroCant _ [
	(OrderedCollection
		cover: (144 to: 160)
		declaredAt: (144 to: 160)) new ] valueCoveringAll:
		{162 to: 164})
		cover: (126 to: 139)
		declaredAt: (33 to: 46).
	[
	(tuplaLibroCant
		cover: (168 to: 181)
		declaredAt: (33 to: 46)) add:
		(aBook
			cover: (188 to: 192)
			declaredAt: (6 to: 10)) ] valueCoveringAll:
		{183 to: 186}.
	[
	(tuplaLibroCant
		cover: (196 to: 209)
		declaredAt: (33 to: 46)) add:
		(anAmount
			cover: (216 to: 223)
			declaredAt: (20 to: 27)) ] valueCoveringAll:
		{211 to: 214}.
	[
	(cartItems
		cover: (229 to: 237)
		declaredAt: (229 to: 237)) add:
		(tuplaLibroCant
			cover: (244 to: 257)
			declaredAt: (33 to: 46)) ] valueCoveringAll:
		{239 to: 242}.! !
!Behavior method!
assertBookIsAllowed: aBook
	[
	([
	([
	(catalog
		cover: (31 to: 37)
		declaredAt: (31 to: 37)) keys ] valueCoveringAll:
		{39 to: 42}) includes:
		(aBook
			cover: (54 to: 58)
			declaredAt: (22 to: 26)) ] valueCoveringAll:
		{44 to: 52}) ifFalse: [
		[
		(self coverAll:
			{70 to: 73}) error:
			([
			([
			(self coverAll:
				{82 to: 85}) class ] valueCoveringAll:
				{87 to: 91}) errorBookNotInAllowedList ] valueCoveringAll:
				{93 to: 117}) ] valueCoveringAll:
			{75 to: 80} ]] valueCoveringAll:
		{61 to: 68}.! !
!Behavior method!
assertAmountIsValid: anAmount
	self coverAll:
		{65 to: 68}.
	[
	([
	(anAmount
		cover: (35 to: 42)
		declaredAt: (22 to: 29)) isInteger ] valueCoveringAll:
		{44 to: 52}) ifFalse: [
		[
		(self coverAll:
			{77 to: 80}) error:
			([
			([
			(self coverAll:
				{137 to: 140}) class ] valueCoveringAll:
				{82 to: 86}) errorAmountNotInteger ] valueCoveringAll:
				{88 to: 108}) ] valueCoveringAll:
			{70 to: 75} ]] valueCoveringAll:
		{55 to: 62}.
	[
	([
	(anAmount
		cover: (114 to: 121)
		declaredAt: (22 to: 29)) <
		(0 coverAll:
			{125 to: 125}) ] valueCoveringAll:
		{123 to: 123}) ifTrue: [
		[
		(self coverAll:
			{149 to: 152}) error:
			([
			([
			(self coverAll:
				{207 to: 210}) class ] valueCoveringAll:
				{154 to: 158}) errorAmountNegative ] valueCoveringAll:
				{160 to: 178}) ] valueCoveringAll:
			{142 to: 147} ]] valueCoveringAll:
		{128 to: 134}.
	[
	([
	(anAmount
		cover: (184 to: 191)
		declaredAt: (22 to: 29)) =
		(0 coverAll:
			{195 to: 195}) ] valueCoveringAll:
		{193 to: 193}) ifTrue: [
		[
		(self coverAll:
			{219 to: 222}) error:
			([
			([ self class ] valueCoveringAll:
				{224 to: 228}) errorAmountZero ] valueCoveringAll:
				{230 to: 244}) ] valueCoveringAll:
			{212 to: 217} ]] valueCoveringAll:
		{198 to: 204}.! !

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
size
	^ [
	(cartItems
		cover: (8 to: 16)
		declaredAt: (8 to: 16)) size ] valueCoveringAll:
		{18 to: 21}.! !
!Behavior method!
first
	^ [
	(cartItems
		cover: (9 to: 17)
		declaredAt: (9 to: 17)) first ] valueCoveringAll:
		{19 to: 23}.! !
!Behavior method!
second
	^ [
	(cartItems
		cover: (10 to: 18)
		declaredAt: (10 to: 18)) second ] valueCoveringAll:
		{20 to: 25}.! !

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorBookNotInAllowedList
	^ 'Error - El Libro no está en la lista de productos permitidos' coverAll:
		{29 to: 90}.! !

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorAmountNotInteger
	^ 'Error - La cantidad tiene que ser un número entero' coverAll:
		{25 to: 76}.! !

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorAmountNegative
	^ 'Error - La cantidad no puede ser negativa' coverAll:
		{23 to: 65}.! !

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorAmountZero
	^ 'Error - La cantidad de libros no puede ser 0' coverAll:
		{19 to: 64}.! !

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
forOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate
	^ [
	([
	(self coverAll:
		{77 to: 80}) new ] valueCoveringAll:
		{82 to: 84})
		initializeForOwner:
			(anOwner
				cover: (106 to: 112)
				declaredAt: (11 to: 17))
		withNumber:
			(aCreditCardNumber
				cover: (126 to: 142)
				declaredAt: (31 to: 47))
		withExpirationDate:
			(aDate
				cover: (164 to: 168)
				declaredAt: (69 to: 73)) ] valueCoveringAll:
		{86 to: 104. 114 to: 124. 144 to: 162}.! !
!Behavior method!
initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate
	[
	(self coverAll:
		{88 to: 91}) assertNameNotEmpty:
		(anOwner
			cover: (113 to: 119)
			declaredAt: (21 to: 27)) ] valueCoveringAll:
		{93 to: 111}.
	[
	(self coverAll:
		{123 to: 126}) assertCardNumberIsCorrect:
		(aCreditCardNumber
			cover: (155 to: 171)
			declaredAt: (41 to: 57)) ] valueCoveringAll:
		{128 to: 153}.
	(owner _ anOwner
		cover: (185 to: 191)
		declaredAt: (21 to: 27))
		cover: (176 to: 180)
		declaredAt: (176 to: 180).
	(creditCardNumber _ aCreditCardNumber
		cover: (215 to: 231)
		declaredAt: (41 to: 57))
		cover: (195 to: 210)
		declaredAt: (195 to: 210).
	(expirationDate _ aDate
		cover: (253 to: 257)
		declaredAt: (79 to: 83))
		cover: (235 to: 248)
		declaredAt: (235 to: 248).! !
!Behavior method!
assertNameNotEmpty: anOwner
	[
	([
	([
	(anOwner
		cover: (32 to: 38)
		declaredAt: (21 to: 27)) withBlanksTrimmed ] valueCoveringAll:
		{40 to: 56}) isEmpty ] valueCoveringAll:
		{58 to: 64}) ifTrue: [
		[
		(self coverAll:
			{75 to: 78}) error:
			([
			([
			(self coverAll:
				{87 to: 90}) class ] valueCoveringAll:
				{92 to: 96}) errorOwnerEmpty ] valueCoveringAll:
				{98 to: 112}) ] valueCoveringAll:
			{80 to: 85} ]] valueCoveringAll:
		{66 to: 72}.! !
!Behavior method!
assertCardNumberIsCorrect: aCreditCardNumber
	[
	([
	([
	(aCreditCardNumber
		cover: (49 to: 65)
		declaredAt: (28 to: 44)) size ] valueCoveringAll:
		{67 to: 70}) <
		(16 coverAll:
			{74 to: 75}) ] valueCoveringAll:
		{72 to: 72}) ifTrue: [
		[
		(self coverAll:
			{87 to: 90}) error:
			([
			([
			(self coverAll:
				{99 to: 102}) class ] valueCoveringAll:
				{104 to: 108}) errorCardNumberLessThan16Digits ] valueCoveringAll:
				{110 to: 140}) ] valueCoveringAll:
			{92 to: 97} ]] valueCoveringAll:
		{78 to: 84}.
	[
	([
	([
	(aCreditCardNumber
		cover: (146 to: 162)
		declaredAt: (28 to: 44)) size ] valueCoveringAll:
		{164 to: 167}) >
		(16 coverAll:
			{171 to: 172}) ] valueCoveringAll:
		{169 to: 169}) ifTrue: [
		[
		(self coverAll:
			{184 to: 187}) error:
			([
			([
			(self coverAll:
				{196 to: 199}) class ] valueCoveringAll:
				{201 to: 205}) errorCardNumberMoreThan16Digits ] valueCoveringAll:
				{207 to: 237}) ] valueCoveringAll:
			{189 to: 194} ]] valueCoveringAll:
		{175 to: 181}.! !
!Behavior method!
initialize
	(stolenCards _ [
	(OrderedCollection
		cover: (29 to: 45)
		declaredAt: (29 to: 45)) new ] valueCoveringAll:
		{47 to: 49})
		cover: (14 to: 24)
		declaredAt: (14 to: 24).
	(registeredCards _ [
	(Dictionary
		cover: (72 to: 81)
		declaredAt: (72 to: 81)) new ] valueCoveringAll:
		{83 to: 85})
		cover: (53 to: 67)
		declaredAt: (53 to: 67).! !
!Behavior method!
registerStolenCard: aCreditCard
	[
	(stolenCards
		cover: (36 to: 46)
		declaredAt: (36 to: 46)) add:
		(aCreditCard
			cover: (53 to: 63)
			declaredAt: (21 to: 31)) ] valueCoveringAll:
		{48 to: 51}.! !
!Behavior method!
registerCard: aCreditCard withBalance: aBalance
	[
	(registeredCards
		cover: (52 to: 66)
		declaredAt: (52 to: 66)) add:
		([
		(aCreditCard
			cover: (73 to: 83)
			declaredAt: (15 to: 25)) ->
			(aBalance
				cover: (88 to: 95)
				declaredAt: (40 to: 47)) ] valueCoveringAll:
			{85 to: 86}) ] valueCoveringAll:
		{68 to: 71}.! !
!Behavior method!
errorCannotCheckoutEmptyCart
	^ 'Error - No se puede hacer checkout de un carrito vacío' coverAll:
		{32 to: 87}.! !
!Behavior method!
withCatalog: aDictionary
	^ [
	([
	(self coverAll:
		{29 to: 32}) new ] valueCoveringAll:
		{34 to: 36}) initializeWithCatalog:
		(aDictionary
			cover: (61 to: 71)
			declaredAt: (14 to: 24)) ] valueCoveringAll:
		{38 to: 59}.! !
!Behavior method!
initializeWithCatalog: aCatalog
	(catalog _ aCatalog
		cover: (46 to: 53)
		declaredAt: (24 to: 31))
		cover: (35 to: 41)
		declaredAt: (35 to: 41).! !
!Behavior method!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook forMerchantProcessor: aMerchantProcessor
	| total |
	[
	(self coverAll:
		{143 to: 146}) assertCartIsNotEmpty:
		(aCart
			cover: (170 to: 174)
			declaredAt: (11 to: 15)) ] valueCoveringAll:
		{148 to: 168}.
	[
	(self coverAll:
		{178 to: 181}) assertCartHasTheSameCatalog:
		(aCart
			cover: (212 to: 216)
			declaredAt: (11 to: 15)) ] valueCoveringAll:
		{183 to: 210}.
	[
	(self coverAll:
		{220 to: 223})
		assertCard:
			(aCreditCard
				cover: (237 to: 247)
				declaredAt: (33 to: 43))
		hasNotExpiredOn:
			(aDate
				cover: (266 to: 270)
				declaredAt: (53 to: 57)) ] valueCoveringAll:
		{225 to: 235. 249 to: 264}.
	[
	(self coverAll:
		{274 to: 277})
		assertCard:
			(aCreditCard
				cover: (291 to: 301)
				declaredAt: (33 to: 43))
		isNotStolenFor:
			(aMerchantProcessor
				cover: (319 to: 336)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{279 to: 289. 303 to: 317}.
	[
	(self coverAll:
		{340 to: 343})
		assertCard:
			(aCreditCard
				cover: (357 to: 367)
				declaredAt: (33 to: 43))
		isRegisteredOn:
			(aMerchantProcessor
				cover: (385 to: 402)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{345 to: 355. 369 to: 383}.
	(total _ [
	(aCart
		cover: (417 to: 421)
		declaredAt: (11 to: 15)) totalItemPrice ] valueCoveringAll:
		{423 to: 436})
		cover: (408 to: 412)
		declaredAt: (132 to: 136).
	[
	(self coverAll:
		{442 to: 445})
		assertCard:
			(aCreditCard
				cover: (459 to: 469)
				declaredAt: (33 to: 43))
		canSpend:
			(total
				cover: (481 to: 485)
				declaredAt: (132 to: 136))
		on:
			(aMerchantProcessor
				cover: (491 to: 508)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{447 to: 457. 471 to: 479. 487 to: 489}.
	[
	(aSalesBook
		cover: (514 to: 523)
		declaredAt: (71 to: 80)) add:
		(total
			cover: (530 to: 534)
			declaredAt: (132 to: 136)) ] valueCoveringAll:
		{525 to: 528}.
	^ total
		cover: (541 to: 545)
		declaredAt: (132 to: 136).! !
!Behavior method!
assertCartIsNotEmpty: aCart
	[
	([
	(aCart
		cover: (32 to: 36)
		declaredAt: (23 to: 27)) isEmpty ] valueCoveringAll:
		{38 to: 44}) ifTrue: [
		[
		(self coverAll:
			{55 to: 58}) error:
			([
			([
			(self coverAll:
				{67 to: 70}) class ] valueCoveringAll:
				{72 to: 76}) errorCannotCheckoutEmptyCart ] valueCoveringAll:
				{78 to: 105}) ] valueCoveringAll:
			{60 to: 65} ]] valueCoveringAll:
		{46 to: 52}.! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorCannotCheckoutACartWithADifferentCatalog
	^ 'Error - No se puede hacer checkout de un carrito con un catálogo diferente' coverAll:
		{49 to: 124}.! !
!Behavior method!
assertCartHasTheSameCatalog: aCart
	[
	([
	(aCart
		cover: (39 to: 43)
		declaredAt: (30 to: 34)) hasCatalog:
		(catalog
			cover: (57 to: 63)
			declaredAt: (57 to: 63)) ] valueCoveringAll:
		{45 to: 55}) ifFalse: [
		[
		(self coverAll:
			{76 to: 79}) error:
			([
			([
			(self coverAll:
				{88 to: 91}) class ] valueCoveringAll:
				{93 to: 97}) errorCannotCheckoutACartWithADifferentCatalog ] valueCoveringAll:
				{99 to: 143}) ] valueCoveringAll:
			{81 to: 86} ]] valueCoveringAll:
		{66 to: 73}.! !
!Behavior method!
hasCatalog: aCatalog
	^ [
	(catalog
		cover: (24 to: 30)
		declaredAt: (24 to: 30)) =
		(aCatalog
			cover: (34 to: 41)
			declaredAt: (13 to: 20)) ] valueCoveringAll:
		{32 to: 32}.! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
assertCard: aCreditCard hasNotExpiredOn: aDate
	self coverAll:
		{94 to: 97}.
	[
	([
	(aCreditCard
		cover: (53 to: 63)
		declaredAt: (13 to: 23)) isExpiredOn:
		(aDate
			cover: (78 to: 82)
			declaredAt: (42 to: 46)) ] valueCoveringAll:
		{65 to: 76}) ifTrue: [
		[
		(self coverAll:
			{106 to: 109}) error:
			([
			([ self class ] valueCoveringAll:
				{111 to: 115}) errorExpiredCard ] valueCoveringAll:
				{117 to: 132}) ] valueCoveringAll:
			{99 to: 104} ]] valueCoveringAll:
		{85 to: 91}.! !
!Behavior method!
isExpiredOn: aDate
	^ [
	(expirationDate
		cover: (23 to: 36)
		declaredAt: (23 to: 36)) <
		(aDate
			cover: (40 to: 44)
			declaredAt: (14 to: 18)) ] valueCoveringAll:
		{38 to: 38}.! !
!Behavior method!
assertCard: aCreditCard isNotStolenFor: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (63 to: 80)
		declaredAt: (41 to: 58)) isCardStolen:
		(aCreditCard
			cover: (96 to: 106)
			declaredAt: (13 to: 23)) ] valueCoveringAll:
		{82 to: 94}) ifTrue: [
		[
		(self coverAll:
			{118 to: 121}) error:
			([
			([
			(self coverAll:
				{130 to: 133}) class ] valueCoveringAll:
				{135 to: 139}) errorStolenCard ] valueCoveringAll:
				{141 to: 155}) ] valueCoveringAll:
			{123 to: 128} ]] valueCoveringAll:
		{109 to: 115}.! !
!Behavior method!
isCardStolen: aCreditCard
	^ [
	(stolenCards
		cover: (30 to: 40)
		declaredAt: (30 to: 40)) includes:
		(aCreditCard
			cover: (52 to: 62)
			declaredAt: (15 to: 25)) ] valueCoveringAll:
		{42 to: 50}.! !
!Behavior method!
assertCard: aCreditCard isRegisteredOn: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (64 to: 81)
		declaredAt: (41 to: 58)) isCardRegistered:
		(aCreditCard
			cover: (101 to: 111)
			declaredAt: (13 to: 23)) ] valueCoveringAll:
		{83 to: 99}) ifFalse: [
		[
		(self coverAll:
			{124 to: 127}) error:
			([
			([
			(self coverAll:
				{136 to: 139}) class ] valueCoveringAll:
				{141 to: 145}) errorNotARegisteredCard ] valueCoveringAll:
				{147 to: 169}) ] valueCoveringAll:
			{129 to: 134} ]] valueCoveringAll:
		{114 to: 121}.! !
!Behavior method!
isCardRegistered: aCreditCard
	^ [
	([
	(registeredCards
		cover: (33 to: 47)
		declaredAt: (33 to: 47)) keys ] valueCoveringAll:
		{49 to: 52}) includes:
		(aCreditCard
			cover: (64 to: 74)
			declaredAt: (19 to: 29)) ] valueCoveringAll:
		{54 to: 62}.! !
!Behavior method!
totalItemPrice
	^ [
	(cartItems
		cover: (20 to: 28)
		declaredAt: (20 to: 28)) sum: [ :bookAmountTuple |
		[
		([
		(catalog
			cover: (56 to: 62)
			declaredAt: (56 to: 62)) at:
			([
			(bookAmountTuple
				cover: (68 to: 82)
				declaredAt: (37 to: 51)) first ] valueCoveringAll:
				{84 to: 88}) ] valueCoveringAll:
			{64 to: 66}) *
			([
			(bookAmountTuple
				cover: (93 to: 107)
				declaredAt: (37 to: 51)) second ] valueCoveringAll:
				{109 to: 114}) ] valueCoveringAll:
			{91 to: 91} ]] valueCoveringAll:
		{30 to: 33}.! !
!Behavior method!
assertCard: aCreditCard canSpend: aTotal on: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (69 to: 86)
		declaredAt: (46 to: 63))
		can:
			(aCreditCard
				cover: (93 to: 103)
				declaredAt: (13 to: 23))
		spend:
			(aTotal
				cover: (112 to: 117)
				declaredAt: (35 to: 40)) ] valueCoveringAll:
		{88 to: 91. 105 to: 110}) ifFalse: [
		[
		(self coverAll:
			{130 to: 133}) error:
			([
			([
			(self coverAll:
				{142 to: 145}) class ] valueCoveringAll:
				{147 to: 151}) errorCardDoesNotHaveEnoughBalance ] valueCoveringAll:
				{153 to: 185}) ] valueCoveringAll:
			{135 to: 140} ]] valueCoveringAll:
		{120 to: 127}.! !
!Behavior method!
can: aCreditCard spend: aTotal
	^ [
	([
	(registeredCards
		cover: (37 to: 51)
		declaredAt: (37 to: 51)) at:
		(aCreditCard
			cover: (56 to: 66)
			declaredAt: (6 to: 16)) ] valueCoveringAll:
		{53 to: 55}) >=
		(aTotal
			cover: (72 to: 77)
			declaredAt: (25 to: 30)) ] valueCoveringAll:
		{69 to: 70}.! !

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorExpiredCard
	^ 'Error - No se puede hacer checkout con una tarjeta de crédito vacía' coverAll:
		{20 to: 88}.! !

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorStolenCard
	^ 'Error - No se puede realizar una transacción con una tarjeta robada' coverAll:
		{19 to: 87}.! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorNotARegisteredCard
	^ 'Error - La tarjeta utilizada no se encuentra registrada' coverAll:
		{27 to: 83}.! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorCardDoesNotHaveEnoughBalance
	^ 'Error - La tarjeta de crédito no tiene suficiente saldo' coverAll:
		{38 to: 94}.! !

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorOwnerEmpty
	^ 'Error - El nombre dueño de la tarjeta de crédito no puede estar vacío' coverAll:
		{19 to: 89}.! !

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorCardNumberLessThan16Digits
	^ 'Error - El número de la tarjeta de crédito tiene menos de 16 dígitos' coverAll:
		{35 to: 104}.! !

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
errorCardNumberMoreThan16Digits
	^ 'Error - El número de la tarjeta de crédito tiene más de 16 dígitos' coverAll:
		{35 to: 102}.! !

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/16/2021 18:32:28'!
PASSED!
!Behavior method!
createNewWithCatalog: anOrderedCollection
	^ [
	([
	(self coverAll:
		{46 to: 49}) new ] valueCoveringAll:
		{51 to: 53}) initializeWith:
		(anOrderedCollection
			cover: (71 to: 89)
			declaredAt: (23 to: 41)) ] valueCoveringAll:
		{55 to: 69}.! !
!Behavior method!
initializeWith: anOrderedCollection
	(catalog _ anOrderedCollection
		cover: (49 to: 67)
		declaredAt: (17 to: 35))
		cover: (38 to: 44)
		declaredAt: (38 to: 44).
	(cartItems _ [
	(OrderedCollection
		cover: (84 to: 100)
		declaredAt: (84 to: 100)) new ] valueCoveringAll:
		{102 to: 104})
		cover: (71 to: 79)
		declaredAt: (71 to: 79).! !
!Behavior method!
isEmpty
	^ [
	(cartItems
		cover: (11 to: 19)
		declaredAt: (11 to: 19)) isEmpty ] valueCoveringAll:
		{21 to: 27}.! !

!testRun: #CartTest #test01CartThatWasJustCreatedIsEmpty stamp: 'G.L.S 6/16/2021 18:33:54'!
PASSED!
!Behavior method!
add: aBook
	[
	(self coverAll:
		{14 to: 17})
		add:
			(aBook
				cover: (24 to: 28)
				declaredAt: (6 to: 10))
		amount:
			(1 coverAll:
				{38 to: 38}) ] valueCoveringAll:
		{19 to: 22. 30 to: 36}.! !
!Behavior method!
add: aBook amount: anAmount
	| tuplaLibroCant |
	[
	(self coverAll:
		{53 to: 56}) assertBookIsAllowed:
		(aBook
			cover: (79 to: 83)
			declaredAt: (6 to: 10)) ] valueCoveringAll:
		{58 to: 77}.
	[
	(self coverAll:
		{87 to: 90}) assertAmountIsValid:
		(anAmount
			cover: (113 to: 120)
			declaredAt: (20 to: 27)) ] valueCoveringAll:
		{92 to: 111}.
	(tuplaLibroCant _ [
	(OrderedCollection
		cover: (144 to: 160)
		declaredAt: (144 to: 160)) new ] valueCoveringAll:
		{162 to: 164})
		cover: (126 to: 139)
		declaredAt: (33 to: 46).
	[
	(tuplaLibroCant
		cover: (168 to: 181)
		declaredAt: (33 to: 46)) add:
		(aBook
			cover: (188 to: 192)
			declaredAt: (6 to: 10)) ] valueCoveringAll:
		{183 to: 186}.
	[
	(tuplaLibroCant
		cover: (196 to: 209)
		declaredAt: (33 to: 46)) add:
		(anAmount
			cover: (216 to: 223)
			declaredAt: (20 to: 27)) ] valueCoveringAll:
		{211 to: 214}.
	[
	(cartItems
		cover: (229 to: 237)
		declaredAt: (229 to: 237)) add:
		(tuplaLibroCant
			cover: (244 to: 257)
			declaredAt: (33 to: 46)) ] valueCoveringAll:
		{239 to: 242}.! !
!Behavior method!
assertBookIsAllowed: aBook
	[
	([
	([
	(catalog
		cover: (31 to: 37)
		declaredAt: (31 to: 37)) keys ] valueCoveringAll:
		{39 to: 42}) includes:
		(aBook
			cover: (54 to: 58)
			declaredAt: (22 to: 26)) ] valueCoveringAll:
		{44 to: 52}) ifFalse: [
		[
		(self coverAll:
			{70 to: 73}) error:
			([
			([
			(self coverAll:
				{82 to: 85}) class ] valueCoveringAll:
				{87 to: 91}) errorBookNotInAllowedList ] valueCoveringAll:
				{93 to: 117}) ] valueCoveringAll:
			{75 to: 80} ]] valueCoveringAll:
		{61 to: 68}.! !
!Behavior method!
assertAmountIsValid: anAmount
	self coverAll:
		{65 to: 68}.
	[
	([
	(anAmount
		cover: (35 to: 42)
		declaredAt: (22 to: 29)) isInteger ] valueCoveringAll:
		{44 to: 52}) ifFalse: [
		[
		(self coverAll:
			{77 to: 80}) error:
			([
			([
			(self coverAll:
				{137 to: 140}) class ] valueCoveringAll:
				{82 to: 86}) errorAmountNotInteger ] valueCoveringAll:
				{88 to: 108}) ] valueCoveringAll:
			{70 to: 75} ]] valueCoveringAll:
		{55 to: 62}.
	[
	([
	(anAmount
		cover: (114 to: 121)
		declaredAt: (22 to: 29)) <
		(0 coverAll:
			{125 to: 125}) ] valueCoveringAll:
		{123 to: 123}) ifTrue: [
		[
		(self coverAll:
			{149 to: 152}) error:
			([
			([
			(self coverAll:
				{207 to: 210}) class ] valueCoveringAll:
				{154 to: 158}) errorAmountNegative ] valueCoveringAll:
				{160 to: 178}) ] valueCoveringAll:
			{142 to: 147} ]] valueCoveringAll:
		{128 to: 134}.
	[
	([
	(anAmount
		cover: (184 to: 191)
		declaredAt: (22 to: 29)) =
		(0 coverAll:
			{195 to: 195}) ] valueCoveringAll:
		{193 to: 193}) ifTrue: [
		[
		(self coverAll:
			{219 to: 222}) error:
			([
			([ self class ] valueCoveringAll:
				{224 to: 228}) errorAmountZero ] valueCoveringAll:
				{230 to: 244}) ] valueCoveringAll:
			{212 to: 217} ]] valueCoveringAll:
		{198 to: 204}.! !

!testRun: #CartTest #test02CartWithAnItemIsNotEmpty stamp: 'G.L.S 6/16/2021 18:33:54'!
PASSED!
!Behavior method!
size
	^ [
	(cartItems
		cover: (8 to: 16)
		declaredAt: (8 to: 16)) size ] valueCoveringAll:
		{18 to: 21}.! !
!Behavior method!
first
	^ [
	(cartItems
		cover: (9 to: 17)
		declaredAt: (9 to: 17)) first ] valueCoveringAll:
		{19 to: 23}.! !
!Behavior method!
second
	^ [
	(cartItems
		cover: (10 to: 18)
		declaredAt: (10 to: 18)) second ] valueCoveringAll:
		{20 to: 25}.! !

!testRun: #CartTest #test03CartWithSeveralItemsAddedContainsTheRightItemsAndAmounts stamp: 'G.L.S 6/16/2021 18:33:54'!
PASSED!
!Behavior method!
errorBookNotInAllowedList
	^ 'Error - El Libro no está en la lista de productos permitidos' coverAll:
		{29 to: 90}.! !

!testRun: #CartTest #test04CartCannotAddItemsThatAreNotAllowed stamp: 'G.L.S 6/16/2021 18:33:54'!
PASSED!
!Behavior method!
errorAmountNotInteger
	^ 'Error - La cantidad tiene que ser un número entero' coverAll:
		{25 to: 76}.! !

!testRun: #CartTest #test05CartCannotAddANonIntegerAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:33:54'!
PASSED!
!Behavior method!
errorAmountNegative
	^ 'Error - La cantidad no puede ser negativa' coverAll:
		{23 to: 65}.! !

!testRun: #CartTest #test06CartCannotAddANegativeAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:33:54'!
PASSED!
!Behavior method!
errorAmountZero
	^ 'Error - La cantidad de libros no puede ser 0' coverAll:
		{19 to: 64}.! !

!testRun: #CartTest #test07CartCannotAddAZeroAmountOfAnItem stamp: 'G.L.S 6/16/2021 18:33:54'!
PASSED!
!Behavior method!
forOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate
	^ [
	([
	(self coverAll:
		{77 to: 80}) new ] valueCoveringAll:
		{82 to: 84})
		initializeForOwner:
			(anOwner
				cover: (106 to: 112)
				declaredAt: (11 to: 17))
		withNumber:
			(aCreditCardNumber
				cover: (126 to: 142)
				declaredAt: (31 to: 47))
		withExpirationDate:
			(aDate
				cover: (164 to: 168)
				declaredAt: (69 to: 73)) ] valueCoveringAll:
		{86 to: 104. 114 to: 124. 144 to: 162}.! !
!Behavior method!
initializeForOwner: anOwner withNumber: aCreditCardNumber withExpirationDate: aDate
	[
	(self coverAll:
		{88 to: 91}) assertNameNotEmpty:
		(anOwner
			cover: (113 to: 119)
			declaredAt: (21 to: 27)) ] valueCoveringAll:
		{93 to: 111}.
	[
	(self coverAll:
		{123 to: 126}) assertCardNumberIsCorrect:
		(aCreditCardNumber
			cover: (155 to: 171)
			declaredAt: (41 to: 57)) ] valueCoveringAll:
		{128 to: 153}.
	(owner _ anOwner
		cover: (185 to: 191)
		declaredAt: (21 to: 27))
		cover: (176 to: 180)
		declaredAt: (176 to: 180).
	(creditCardNumber _ aCreditCardNumber
		cover: (215 to: 231)
		declaredAt: (41 to: 57))
		cover: (195 to: 210)
		declaredAt: (195 to: 210).
	(expirationDate _ aDate
		cover: (253 to: 257)
		declaredAt: (79 to: 83))
		cover: (235 to: 248)
		declaredAt: (235 to: 248).! !
!Behavior method!
assertNameNotEmpty: anOwner
	[
	([
	([
	(anOwner
		cover: (32 to: 38)
		declaredAt: (21 to: 27)) withBlanksTrimmed ] valueCoveringAll:
		{40 to: 56}) isEmpty ] valueCoveringAll:
		{58 to: 64}) ifTrue: [
		[
		(self coverAll:
			{75 to: 78}) error:
			([
			([
			(self coverAll:
				{87 to: 90}) class ] valueCoveringAll:
				{92 to: 96}) errorOwnerEmpty ] valueCoveringAll:
				{98 to: 112}) ] valueCoveringAll:
			{80 to: 85} ]] valueCoveringAll:
		{66 to: 72}.! !
!Behavior method!
assertCardNumberIsCorrect: aCreditCardNumber
	[
	([
	([
	(aCreditCardNumber
		cover: (49 to: 65)
		declaredAt: (28 to: 44)) size ] valueCoveringAll:
		{67 to: 70}) <
		(16 coverAll:
			{74 to: 75}) ] valueCoveringAll:
		{72 to: 72}) ifTrue: [
		[
		(self coverAll:
			{87 to: 90}) error:
			([
			([
			(self coverAll:
				{99 to: 102}) class ] valueCoveringAll:
				{104 to: 108}) errorCardNumberLessThan16Digits ] valueCoveringAll:
				{110 to: 140}) ] valueCoveringAll:
			{92 to: 97} ]] valueCoveringAll:
		{78 to: 84}.
	[
	([
	([
	(aCreditCardNumber
		cover: (146 to: 162)
		declaredAt: (28 to: 44)) size ] valueCoveringAll:
		{164 to: 167}) >
		(16 coverAll:
			{171 to: 172}) ] valueCoveringAll:
		{169 to: 169}) ifTrue: [
		[
		(self coverAll:
			{184 to: 187}) error:
			([
			([
			(self coverAll:
				{196 to: 199}) class ] valueCoveringAll:
				{201 to: 205}) errorCardNumberMoreThan16Digits ] valueCoveringAll:
				{207 to: 237}) ] valueCoveringAll:
			{189 to: 194} ]] valueCoveringAll:
		{175 to: 181}.! !
!Behavior method!
initialize
	(stolenCards _ [
	(OrderedCollection
		cover: (29 to: 45)
		declaredAt: (29 to: 45)) new ] valueCoveringAll:
		{47 to: 49})
		cover: (14 to: 24)
		declaredAt: (14 to: 24).
	(registeredCards _ [
	(Dictionary
		cover: (72 to: 81)
		declaredAt: (72 to: 81)) new ] valueCoveringAll:
		{83 to: 85})
		cover: (53 to: 67)
		declaredAt: (53 to: 67).! !
!Behavior method!
registerStolenCard: aCreditCard
	[
	(stolenCards
		cover: (36 to: 46)
		declaredAt: (36 to: 46)) add:
		(aCreditCard
			cover: (53 to: 63)
			declaredAt: (21 to: 31)) ] valueCoveringAll:
		{48 to: 51}.! !
!Behavior method!
registerCard: aCreditCard withBalance: aBalance
	[
	(registeredCards
		cover: (52 to: 66)
		declaredAt: (52 to: 66)) add:
		([
		(aCreditCard
			cover: (73 to: 83)
			declaredAt: (15 to: 25)) ->
			(aBalance
				cover: (88 to: 95)
				declaredAt: (40 to: 47)) ] valueCoveringAll:
			{85 to: 86}) ] valueCoveringAll:
		{68 to: 71}.! !
!Behavior method!
errorCannotCheckoutEmptyCart
	^ 'Error - No se puede hacer checkout de un carrito vacío' coverAll:
		{32 to: 87}.! !
!Behavior method!
withCatalog: aDictionary
	^ [
	([
	(self coverAll:
		{29 to: 32}) new ] valueCoveringAll:
		{34 to: 36}) initializeWithCatalog:
		(aDictionary
			cover: (61 to: 71)
			declaredAt: (14 to: 24)) ] valueCoveringAll:
		{38 to: 59}.! !
!Behavior method!
initializeWithCatalog: aCatalog
	(catalog _ aCatalog
		cover: (46 to: 53)
		declaredAt: (24 to: 31))
		cover: (35 to: 41)
		declaredAt: (35 to: 41).! !
!Behavior method!
checkout: aCart withCreditCard: aCreditCard onDate: aDate registerOn: aSalesBook forMerchantProcessor: aMerchantProcessor
	| total |
	[
	(self coverAll:
		{143 to: 146}) assertCartIsNotEmpty:
		(aCart
			cover: (170 to: 174)
			declaredAt: (11 to: 15)) ] valueCoveringAll:
		{148 to: 168}.
	[
	(self coverAll:
		{178 to: 181}) assertCartHasTheSameCatalog:
		(aCart
			cover: (212 to: 216)
			declaredAt: (11 to: 15)) ] valueCoveringAll:
		{183 to: 210}.
	[
	(self coverAll:
		{220 to: 223})
		assertCard:
			(aCreditCard
				cover: (237 to: 247)
				declaredAt: (33 to: 43))
		hasNotExpiredOn:
			(aDate
				cover: (266 to: 270)
				declaredAt: (53 to: 57)) ] valueCoveringAll:
		{225 to: 235. 249 to: 264}.
	[
	(self coverAll:
		{274 to: 277})
		assertCard:
			(aCreditCard
				cover: (291 to: 301)
				declaredAt: (33 to: 43))
		isNotStolenFor:
			(aMerchantProcessor
				cover: (319 to: 336)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{279 to: 289. 303 to: 317}.
	[
	(self coverAll:
		{340 to: 343})
		assertCard:
			(aCreditCard
				cover: (357 to: 367)
				declaredAt: (33 to: 43))
		isRegisteredOn:
			(aMerchantProcessor
				cover: (385 to: 402)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{345 to: 355. 369 to: 383}.
	(total _ [
	(aCart
		cover: (417 to: 421)
		declaredAt: (11 to: 15)) totalItemPrice ] valueCoveringAll:
		{423 to: 436})
		cover: (408 to: 412)
		declaredAt: (132 to: 136).
	[
	(self coverAll:
		{442 to: 445})
		assertCard:
			(aCreditCard
				cover: (459 to: 469)
				declaredAt: (33 to: 43))
		canSpend:
			(total
				cover: (481 to: 485)
				declaredAt: (132 to: 136))
		on:
			(aMerchantProcessor
				cover: (491 to: 508)
				declaredAt: (104 to: 121)) ] valueCoveringAll:
		{447 to: 457. 471 to: 479. 487 to: 489}.
	[
	(aSalesBook
		cover: (514 to: 523)
		declaredAt: (71 to: 80)) add:
		(total
			cover: (530 to: 534)
			declaredAt: (132 to: 136)) ] valueCoveringAll:
		{525 to: 528}.
	^ total
		cover: (541 to: 545)
		declaredAt: (132 to: 136).! !
!Behavior method!
assertCartIsNotEmpty: aCart
	[
	([
	(aCart
		cover: (32 to: 36)
		declaredAt: (23 to: 27)) isEmpty ] valueCoveringAll:
		{38 to: 44}) ifTrue: [
		[
		(self coverAll:
			{55 to: 58}) error:
			([
			([
			(self coverAll:
				{67 to: 70}) class ] valueCoveringAll:
				{72 to: 76}) errorCannotCheckoutEmptyCart ] valueCoveringAll:
				{78 to: 105}) ] valueCoveringAll:
			{60 to: 65} ]] valueCoveringAll:
		{46 to: 52}.! !

!testRun: #CashierTest #test01CashierCannotCheckoutWithAnEmptyCart stamp: 'G.L.S 6/16/2021 18:33:54'!
PASSED!
!Behavior method!
errorCannotCheckoutACartWithADifferentCatalog
	^ 'Error - No se puede hacer checkout de un carrito con un catálogo diferente' coverAll:
		{49 to: 124}.! !
!Behavior method!
assertCartHasTheSameCatalog: aCart
	[
	([
	(aCart
		cover: (39 to: 43)
		declaredAt: (30 to: 34)) hasCatalog:
		(catalog
			cover: (57 to: 63)
			declaredAt: (57 to: 63)) ] valueCoveringAll:
		{45 to: 55}) ifFalse: [
		[
		(self coverAll:
			{76 to: 79}) error:
			([
			([
			(self coverAll:
				{88 to: 91}) class ] valueCoveringAll:
				{93 to: 97}) errorCannotCheckoutACartWithADifferentCatalog ] valueCoveringAll:
				{99 to: 143}) ] valueCoveringAll:
			{81 to: 86} ]] valueCoveringAll:
		{66 to: 73}.! !
!Behavior method!
hasCatalog: aCatalog
	^ [
	(catalog
		cover: (24 to: 30)
		declaredAt: (24 to: 30)) =
		(aCatalog
			cover: (34 to: 41)
			declaredAt: (13 to: 20)) ] valueCoveringAll:
		{32 to: 32}.! !

!testRun: #CashierTest #test02CashierCannotCheckoutWithACartWithThatDoesntHaveAMatchingCatalog stamp: 'G.L.S 6/16/2021 18:33:54'!
PASSED!
!Behavior method!
assertCard: aCreditCard hasNotExpiredOn: aDate
	self coverAll:
		{94 to: 97}.
	[
	([
	(aCreditCard
		cover: (53 to: 63)
		declaredAt: (13 to: 23)) isExpiredOn:
		(aDate
			cover: (78 to: 82)
			declaredAt: (42 to: 46)) ] valueCoveringAll:
		{65 to: 76}) ifTrue: [
		[
		(self coverAll:
			{106 to: 109}) error:
			([
			([ self class ] valueCoveringAll:
				{111 to: 115}) errorExpiredCard ] valueCoveringAll:
				{117 to: 132}) ] valueCoveringAll:
			{99 to: 104} ]] valueCoveringAll:
		{85 to: 91}.! !
!Behavior method!
isExpiredOn: aDate
	^ [
	(expirationDate
		cover: (23 to: 36)
		declaredAt: (23 to: 36)) <
		(aDate
			cover: (40 to: 44)
			declaredAt: (14 to: 18)) ] valueCoveringAll:
		{38 to: 38}.! !
!Behavior method!
assertCard: aCreditCard isNotStolenFor: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (63 to: 80)
		declaredAt: (41 to: 58)) isCardStolen:
		(aCreditCard
			cover: (96 to: 106)
			declaredAt: (13 to: 23)) ] valueCoveringAll:
		{82 to: 94}) ifTrue: [
		[
		(self coverAll:
			{118 to: 121}) error:
			([
			([
			(self coverAll:
				{130 to: 133}) class ] valueCoveringAll:
				{135 to: 139}) errorStolenCard ] valueCoveringAll:
				{141 to: 155}) ] valueCoveringAll:
			{123 to: 128} ]] valueCoveringAll:
		{109 to: 115}.! !
!Behavior method!
isCardStolen: aCreditCard
	^ [
	(stolenCards
		cover: (30 to: 40)
		declaredAt: (30 to: 40)) includes:
		(aCreditCard
			cover: (52 to: 62)
			declaredAt: (15 to: 25)) ] valueCoveringAll:
		{42 to: 50}.! !
!Behavior method!
assertCard: aCreditCard isRegisteredOn: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (64 to: 81)
		declaredAt: (41 to: 58)) isCardRegistered:
		(aCreditCard
			cover: (101 to: 111)
			declaredAt: (13 to: 23)) ] valueCoveringAll:
		{83 to: 99}) ifFalse: [
		[
		(self coverAll:
			{124 to: 127}) error:
			([
			([
			(self coverAll:
				{136 to: 139}) class ] valueCoveringAll:
				{141 to: 145}) errorNotARegisteredCard ] valueCoveringAll:
				{147 to: 169}) ] valueCoveringAll:
			{129 to: 134} ]] valueCoveringAll:
		{114 to: 121}.! !
!Behavior method!
isCardRegistered: aCreditCard
	^ [
	([
	(registeredCards
		cover: (33 to: 47)
		declaredAt: (33 to: 47)) keys ] valueCoveringAll:
		{49 to: 52}) includes:
		(aCreditCard
			cover: (64 to: 74)
			declaredAt: (19 to: 29)) ] valueCoveringAll:
		{54 to: 62}.! !
!Behavior method!
totalItemPrice
	^ [
	(cartItems
		cover: (20 to: 28)
		declaredAt: (20 to: 28)) sum: [ :bookAmountTuple |
		[
		([
		(catalog
			cover: (56 to: 62)
			declaredAt: (56 to: 62)) at:
			([
			(bookAmountTuple
				cover: (68 to: 82)
				declaredAt: (37 to: 51)) first ] valueCoveringAll:
				{84 to: 88}) ] valueCoveringAll:
			{64 to: 66}) *
			([
			(bookAmountTuple
				cover: (93 to: 107)
				declaredAt: (37 to: 51)) second ] valueCoveringAll:
				{109 to: 114}) ] valueCoveringAll:
			{91 to: 91} ]] valueCoveringAll:
		{30 to: 33}.! !
!Behavior method!
assertCard: aCreditCard canSpend: aTotal on: aMerchantProcessor
	[
	([
	(aMerchantProcessor
		cover: (69 to: 86)
		declaredAt: (46 to: 63))
		can:
			(aCreditCard
				cover: (93 to: 103)
				declaredAt: (13 to: 23))
		spend:
			(aTotal
				cover: (112 to: 117)
				declaredAt: (35 to: 40)) ] valueCoveringAll:
		{88 to: 91. 105 to: 110}) ifFalse: [
		[
		(self coverAll:
			{130 to: 133}) error:
			([
			([
			(self coverAll:
				{142 to: 145}) class ] valueCoveringAll:
				{147 to: 151}) errorCardDoesNotHaveEnoughBalance ] valueCoveringAll:
				{153 to: 185}) ] valueCoveringAll:
			{135 to: 140} ]] valueCoveringAll:
		{120 to: 127}.! !
!Behavior method!
can: aCreditCard spend: aTotal
	^ [
	([
	(registeredCards
		cover: (37 to: 51)
		declaredAt: (37 to: 51)) at:
		(aCreditCard
			cover: (56 to: 66)
			declaredAt: (6 to: 16)) ] valueCoveringAll:
		{53 to: 55}) >=
		(aTotal
			cover: (72 to: 77)
			declaredAt: (25 to: 30)) ] valueCoveringAll:
		{69 to: 70}.! !

!testRun: #CashierTest #test03CheckoutReturnsTheRightAmount stamp: 'G.L.S 6/16/2021 18:33:55'!
PASSED!
!Behavior method!
errorExpiredCard
	^ 'Error - No se puede hacer checkout con una tarjeta de crédito vacía' coverAll:
		{20 to: 88}.! !

!testRun: #CashierTest #test04CashierCannotCheckOutWithAnExpiredCard stamp: 'G.L.S 6/16/2021 18:33:55'!
PASSED!

!testRun: #CashierTest #test05CashierCheckoutRegistersSale stamp: 'G.L.S 6/16/2021 18:33:55'!
PASSED!
!Behavior method!
errorStolenCard
	^ 'Error - No se puede realizar una transacción con una tarjeta robada' coverAll:
		{19 to: 87}.! !

!testRun: #CashierTest #test06CashierCannotCheckoutAStolenCard stamp: 'G.L.S 6/16/2021 18:33:55'!
PASSED!
!Behavior method!
errorNotARegisteredCard
	^ 'Error - La tarjeta utilizada no se encuentra registrada' coverAll:
		{27 to: 83}.! !

!testRun: #CashierTest #test07CashierCannotCheckoutWithAFakeCard stamp: 'G.L.S 6/16/2021 18:33:55'!
PASSED!
!Behavior method!
errorCardDoesNotHaveEnoughBalance
	^ 'Error - La tarjeta de crédito no tiene suficiente saldo' coverAll:
		{38 to: 94}.! !

!testRun: #CashierTest #test08CashierCannotCheckoutWithACardWithoutMoney stamp: 'G.L.S 6/16/2021 18:33:55'!
PASSED!
!Behavior method!
errorOwnerEmpty
	^ 'Error - El nombre dueño de la tarjeta de crédito no puede estar vacío' coverAll:
		{19 to: 89}.! !

!testRun: #CreditCardTest #test01CreditCardCannotHaveEmptyOwner stamp: 'G.L.S 6/16/2021 18:33:55'!
PASSED!
!Behavior method!
errorCardNumberLessThan16Digits
	^ 'Error - El número de la tarjeta de crédito tiene menos de 16 dígitos' coverAll:
		{35 to: 104}.! !

!testRun: #CreditCardTest #test02CreditCardNumberForACreditCardCannotHaveLessThan16Digits stamp: 'G.L.S 6/16/2021 18:33:55'!
PASSED!
!Behavior method!
errorCardNumberMoreThan16Digits
	^ 'Error - El número de la tarjeta de crédito tiene más de 16 dígitos' coverAll:
		{35 to: 102}.! !

!testRun: #CreditCardTest #test03CreditCardNumberForACreditCardCannotHaveMoreThan16Digits stamp: 'G.L.S 6/16/2021 18:33:55'!
PASSED!